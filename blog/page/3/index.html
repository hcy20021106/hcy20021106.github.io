<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=2">
<meta name="theme-color" content="#222">
<meta name="generator" content="Hexo 7.3.0">
  <link rel="apple-touch-icon" sizes="180x180" href="/images/apple-touch-icon-next.png">
  <link rel="icon" type="image/png" sizes="32x32" href="/images/favicon-32x32-next.png">
  <link rel="icon" type="image/png" sizes="16x16" href="/images/favicon-16x16-next.png">
  <link rel="mask-icon" href="/images/logo.svg" color="#222">

<link rel="stylesheet" href="/css/main.css">


<link rel="stylesheet" href="/lib/font-awesome/css/all.min.css">

<script id="hexo-configurations">
    var NexT = window.NexT || {};
    var CONFIG = {"hostname":"hechenyi.github.io","root":"/","scheme":"Muse","version":"7.8.0","exturl":false,"sidebar":{"position":"left","display":"post","padding":18,"offset":12,"onmobile":false},"copycode":{"enable":false,"show_result":false,"style":null},"back2top":{"enable":true,"sidebar":false,"scrollpercent":false},"bookmark":{"enable":false,"color":"#222","save":"auto"},"fancybox":false,"mediumzoom":false,"lazyload":false,"pangu":false,"comments":{"style":"tabs","active":null,"storage":true,"lazyload":false,"nav":null},"algolia":{"hits":{"per_page":10},"labels":{"input_placeholder":"Search for Posts","hits_empty":"We didn't find any results for the search: ${query}","hits_stats":"${hits} results found in ${time} ms"}},"localsearch":{"enable":false,"trigger":"auto","top_n_per_article":1,"unescape":false,"preload":false},"motion":{"enable":true,"async":false,"transition":{"post_block":"fadeIn","post_header":"slideDownIn","post_body":"slideDownIn","coll_header":"slideLeftIn","sidebar":"slideUpIn"}}};
  </script>

  <meta property="og:type" content="website">
<meta property="og:title" content="Hexo">
<meta property="og:url" content="https://hechenyi.github.io/blog/page/3/index.html">
<meta property="og:site_name" content="Hexo">
<meta property="og:locale" content="en_US">
<meta property="article:author" content="John Doe">
<meta name="twitter:card" content="summary">

<link rel="canonical" href="https://hechenyi.github.io/blog/page/3/">


<script id="page-configurations">
  // https://hexo.io/docs/variables.html
  CONFIG.page = {
    sidebar: "",
    isHome : true,
    isPost : false,
    lang   : 'en'
  };
</script>

  <title>Hexo</title>
  






  <noscript>
  <style>
  .use-motion .brand,
  .use-motion .menu-item,
  .sidebar-inner,
  .use-motion .post-block,
  .use-motion .pagination,
  .use-motion .comments,
  .use-motion .post-header,
  .use-motion .post-body,
  .use-motion .collection-header { opacity: initial; }

  .use-motion .site-title,
  .use-motion .site-subtitle {
    opacity: initial;
    top: initial;
  }

  .use-motion .logo-line-before i { left: initial; }
  .use-motion .logo-line-after i { right: initial; }
  </style>
</noscript>

</head>

<body itemscope itemtype="http://schema.org/WebPage">
  <div class="container use-motion">
    <div class="headband"></div>

    <header class="header" itemscope itemtype="http://schema.org/WPHeader">
      <div class="header-inner"><div class="site-brand-container">
  <div class="site-nav-toggle">
    <div class="toggle" aria-label="Toggle navigation bar">
      <span class="toggle-line toggle-line-first"></span>
      <span class="toggle-line toggle-line-middle"></span>
      <span class="toggle-line toggle-line-last"></span>
    </div>
  </div>

  <div class="site-meta">

    <a href="/" class="brand" rel="start">
      <span class="logo-line-before"><i></i></span>
      <h1 class="site-title">Hexo</h1>
      <span class="logo-line-after"><i></i></span>
    </a>
  </div>

  <div class="site-nav-right">
    <div class="toggle popup-trigger">
    </div>
  </div>
</div>




<nav class="site-nav">
  <ul id="menu" class="main-menu menu">
        <li class="menu-item menu-item-home">

    <a href="/" rel="section"><i class="fa fa-home fa-fw"></i>Home</a>

  </li>
        <li class="menu-item menu-item-archives">

    <a href="/archives/" rel="section"><i class="fa fa-archive fa-fw"></i>Archives</a>

  </li>
        <li class="menu-item menu-item-categories">

    <a href="/categories/" rel="section"><i class="fa fa-th fa-fw"></i>Categories</a>

  </li>
  </ul>
</nav>




</div>
    </header>

    
  <div class="back-to-top">
    <i class="fa fa-arrow-up"></i>
    <span>0%</span>
  </div>


    <main class="main">
      <div class="main-inner">
        <div class="content-wrap">
          

          <div class="content index posts-expand">
            
      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="en">
    <link itemprop="mainEntityOfPage" href="https://hechenyi.github.io/2025/04/29/LMMSE-base-channel-estimation/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="John Doe">
      <meta itemprop="description" content="">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Hexo">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/2025/04/29/LMMSE-base-channel-estimation/" class="post-title-link" itemprop="url">LMMSE base channel estimation</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">Posted on</span>

              <time title="Created: 2025-04-29 00:45:01" itemprop="dateCreated datePublished" datetime="2025-04-29T00:45:01+08:00">2025-04-29</time>
            </span>
              <span class="post-meta-item">
                <span class="post-meta-item-icon">
                  <i class="far fa-calendar-check"></i>
                </span>
                <span class="post-meta-item-text">Edited on</span>
                <time title="Modified: 2025-08-02 00:10:05" itemprop="dateModified" datetime="2025-08-02T00:10:05+08:00">2025-08-02</time>
              </span>
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-folder"></i>
              </span>
              <span class="post-meta-item-text">In</span>
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/5G/" itemprop="url" rel="index"><span itemprop="name">5G</span></a>
                </span>
            </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      
          <h2 id="Basic-Concept"><a href="#Basic-Concept" class="headerlink" title="Basic Concept"></a>Basic Concept</h2><p>å…ˆäº†è§£MMSEï¼ŒMMSEï¼ˆMinimum Mean Square Errorï¼‰ï¼Œä¹Ÿå°±æ˜¯æœ€å°å‡æ–¹è¯¯å·®ï¼Œæ˜¯ä¸€ç§å¸¸ç”¨çš„ç»Ÿè®¡ä¼°è®¡æ–¹æ³•ï¼Œå®ƒçš„ç›®æ ‡å°±æ˜¯æœ€å°åŒ–ä¼°è®¡å€¼ä¸å®é™…å€¼ä¹‹é—´çš„å‡æ–¹è¯¯å·®ï¼ˆMSEï¼‰ã€‚åœ¨é€šä¿¡ç³»ç»Ÿä¸­ï¼ŒMMSEè¢«å¹¿æ³›ç”¨äºä¿¡é“ä¼°è®¡ï¼Œå› ä¸ºå®ƒèƒ½å¤Ÿåœ¨å™ªå£°å’Œå¹²æ‰°çš„å½±å“ä¸‹ï¼Œç»™å‡ºä¸€ä¸ªæœ€ä¼˜ä¼°è®¡ã€‚<br>å¦å¤–ï¼Œåœ¨ä¿¡é“ä¼°è®¡ä¸­ï¼Œäº¤å‰ç›¸å…³çŸ©é˜µé€šå¸¸ç”¨äºè®¡ç®—æ•°æ®å­è½½æ³¢å’Œå¯¼é¢‘å­è½½æ³¢ä¹‹é—´çš„ç›¸å…³æ€§ï¼Œè¿™å¯¹äºä¼°è®¡ä¿¡é“çš„çŠ¶æ€è‡³å…³é‡è¦ã€‚</p>
<h2 id="æ•°å­¦å…¬å¼æ¨å¯¼"><a href="#æ•°å­¦å…¬å¼æ¨å¯¼" class="headerlink" title="æ•°å­¦å…¬å¼æ¨å¯¼"></a>æ•°å­¦å…¬å¼æ¨å¯¼</h2><h1 id="OFDM-System-Simulation-with-LMMSE-Channel-Estimation"><a href="#OFDM-System-Simulation-with-LMMSE-Channel-Estimation" class="headerlink" title="OFDM System Simulation with LMMSE Channel Estimation"></a>OFDM System Simulation with LMMSE Channel Estimation</h1><p>This MATLAB project simulates an OFDM system using <strong>LMMSE (Linear Minimum Mean Square Error)</strong> channel estimation over a <strong>frequency-selective Rayleigh fading channel</strong>. The system uses QPSK modulation and pilot symbols to perform accurate channel estimation in the frequency domain.</p>
<hr>
<h2 id="ğŸ“Œ-Features"><a href="#ğŸ“Œ-Features" class="headerlink" title="ğŸ“Œ Features"></a>ğŸ“Œ Features</h2><ul>
<li>QPSK modulation  </li>
<li>Rayleigh fading multipath channel  </li>
<li>AWGN noise  </li>
<li>LMMSE-based pilot-aided channel estimation (PACE)  </li>
<li>Bit Error Rate (BER) analysis</li>
</ul>
<hr>
<h2 id="ğŸ§ -Theoretical-Background"><a href="#ğŸ§ -Theoretical-Background" class="headerlink" title="ğŸ§  Theoretical Background"></a>ğŸ§  Theoretical Background</h2><h3 id="1-OFDM-Signal-Model"><a href="#1-OFDM-Signal-Model" class="headerlink" title="1. OFDM Signal Model"></a>1. OFDM Signal Model</h3><p>The received signal on subcarrier ( k ) is:</p>
<p>$$<br>Y[k] &#x3D; H[k] \cdot X[k] + W[k]<br>$$</p>
<p>Where:</p>
<p>$$<br>X[k]: \text{ Transmitted signal on subcarrier } k \<br>H[k]: \text{ Channel frequency response at subcarrier } k \<br>W[k]: \text{ Additive white Gaussian noise (AWGN)} \<br>Y[k]: \text{ Received signal at subcarrier } k<br>$$</p>
<hr>
<h3 id="2-LMMSE-Channel-Estimation"><a href="#2-LMMSE-Channel-Estimation" class="headerlink" title="2. LMMSE Channel Estimation"></a>2. LMMSE Channel Estimation</h3><p>The LMMSE estimate of the channel at data subcarriers is:</p>
<p>$$<br>\hat{H}<em>{\text{data}} &#x3D; R</em>{hd,hp} \left( R_{hp,hp} + \sigma^2 (X X^H)^{-1} \right)^{-1} \hat{H}_{\text{pilot}}<br>$$</p>
<p>Where:</p>
<p>$$<br>R_{hd,hp}: \text{ Cross-correlation matrix between data and pilot subcarriers} \<br>R_{hp,hp}: \text{ Autocorrelation matrix of pilot subcarriers} \<br>\hat{H}_{\text{pilot}}: \text{ LS-estimated channel at pilot positions} \<br>\sigma^2: \text{ Noise variance} \<br>X: \text{ Diagonal matrix of known pilot symbols}<br>$$</p>
<hr>
<h3 id="3-Channel-Frequency-Response-DFT"><a href="#3-Channel-Frequency-Response-DFT" class="headerlink" title="3. Channel Frequency Response (DFT)"></a>3. Channel Frequency Response (DFT)</h3><p>The time-domain convolution isï¼Œè¿™ä¹Ÿæ˜¯ä¸€ä¸ªç¦»æ•£æ—¶é—´çš„çº¿æ€§å·ç§¯å…¬å¼ï¼Œå®ƒæè¿°äº†<strong>å¤šå¾„ä¿¡é“</strong>(å¤šå¾„æ•ˆåº”)å¯¹æ—¶åŸŸåŸºå¸¦ä¿¡å·çš„å½±å“ï¼Œå…¶ä¸­æ¯ä¸€ä¸ªh[l]è¡¨ç¤ºä¸åŒæ—¶é—´å»¶è¿Ÿä¸‹çš„è·¯å¾„å¢ç›Š:</p>
<hr>
<blockquote>
<p><strong>Notice</strong><br><br>å¼•å…¥OFDMå¯ä»¥æŠ—å¤šå¾„ï¼Œå› ä¸ºåœ¨å¾ªç¯å‰ç¼€CPè¶³å¤Ÿé•¿çš„æ¡ä»¶ä¸‹ï¼ŒæŠŠæ—¶åŸŸçš„å¤šå¾„çº¿æ€§å·ç§¯å˜æ¢ä¸º<strong>å¾ªç¯å·ç§¯</strong>,ä¹Ÿå°±æ˜¯Y[k] &#x3D; H[k]X[k] + W[k]<br></p>
</blockquote>
<hr>
<p>$$<br>y[n] &#x3D; \sum_{m&#x3D;0}^{L-1} h[m] \cdot x[n - m]<br>$$</p>
<p>The corresponding channel frequency response is obtained via DFT:</p>
<p>$$<br>H[k] &#x3D; \sum_{l&#x3D;0}^{L-1} h[l] \cdot e^{-j \frac{2\pi k l}{N}}<br>$$</p>
<p>Where:</p>
<p>$$<br>h[l]: \text{ Channel tap in time domain} \<br>N: \text{ FFT length (number of subcarriers)} \<br>k: \text{ Subcarrier index}<br>$$</p>
<hr>
<h3 id="4-Calculation-of-R-hp-hp"><a href="#4-Calculation-of-R-hp-hp" class="headerlink" title="4. Calculation of $R_{hp,hp}$"></a>4. Calculation of $R_{hp,hp}$</h3><p>åœ¨ç»Ÿè®¡é€šä¿¡ç†è®ºä¸­ï¼Œå¦‚æœH[i]æ˜¯é¢‘ç‡ç´¢å¼•ä¸ºiçš„é¢‘åŸŸä¿¡é“ç³»æ•°ï¼ˆä¾‹å¦‚OFDMä¸­ç¬¬iä¸ªå­è½½æ³¢çš„ä¿¡é“å“åº”ï¼‰<br>$R_H(i,j)&#x3D;E[H[i]H[j]]$<br>To calculate the autocorrelation matrix between pilot subcarriers $R_{hp,hp}$, we start from the frequency-domain channel representation. The channel frequency response at subcarrier ( n ) is given by the discrete Fourier transform (DFT) of the time-domain channel taps:</p>
<p>$$<br>H[n] &#x3D; \sum_{l&#x3D;0}^{L-1} h[l] e^{-j \frac{2\pi}{N} n l}<br>$$</p>
<p>where:</p>
<ul>
<li>( L ) is the number of channel taps,</li>
<li>( h[l] ) is the complex channel coefficient of the ( l )-th tap,</li>
<li>( N ) is the FFT length,</li>
<li>( n ) is the subcarrier index.</li>
</ul>
<p>The autocorrelation between frequency responses at pilot subcarrier indices ( n_i ) and ( n_j ) is:</p>
<p>$$<br>\begin{aligned}<br>R_{hp,hp}(i,j) &amp;&#x3D; E \left[ H[n_i] H^<em>[n_j] \right] \<br>&amp;&#x3D; E \left[ \left( \sum_{l&#x3D;0}^{L-1} h[l] e^{-j \frac{2\pi}{N} n_i l} \right) \left( \sum_{m&#x3D;0}^{L-1} h[m] e^{-j \frac{2\pi}{N} n_j m} \right)^</em> \right] \<br>&amp;&#x3D; \sum_{l&#x3D;0}^{L-1} \sum_{m&#x3D;0}^{L-1} e^{-j \frac{2\pi}{N} n_i l} e^{j \frac{2\pi}{N} n_j m} E \left[ h[l] h^*[m] \right]<br>\end{aligned}<br>$$</p>
<p>Assuming that the channel taps are uncorrelated with power delay profile $\sigma_l^2 &#x3D; E[|h[l]|^2]$, we have:</p>
<p>$$<br>E \left[ h[l] h^*[m] \right] &#x3D;<br>\begin{cases}<br>\sigma_l^2, &amp; l &#x3D; m \<br>0, &amp; l \neq m<br>\end{cases}<br>$$</p>
<p>Thus, the autocorrelation matrix element simplifies to:</p>
<p>$$<br>R_{hp,hp}(i,j) &#x3D; \sum_{l&#x3D;0}^{L-1} \sigma_l^2 e^{-j \frac{2\pi}{N} (n_i - n_j) l}<br>$$</p>
<p>This formula describes the correlation between frequency-domain channel coefficients at pilot positions ( n_i ) and ( n_j ), derived from the time-domain power delay profile.</p>
<hr>
<h3 id="5-Calculation-of-R-hd-hp"><a href="#5-Calculation-of-R-hd-hp" class="headerlink" title="5. Calculation of $R_{hd,hp}$"></a>5. Calculation of $R_{hd,hp}$</h3><p>è®¡ç®—è¿‡ç¨‹å’Œè®¡ç®—å¯¼é¢‘ä¹‹é—´çš„äº’ç›¸å…³å‡½æ•°ä¸€æ ·ï¼Œåªæ˜¯éœ€è¦æ³¨æ„dataéƒ¨åˆ†çš„ç´¢å¼•ã€‚</p>
<h2 id="ğŸ“-File-Structure"><a href="#ğŸ“-File-Structure" class="headerlink" title="ğŸ“ File Structure"></a>ğŸ“ File Structure</h2><ul>
<li><code>ofdm_lmmse_sim.m</code> â€“ Main simulation script  </li>
<li><code>Gen_autocorr.m</code> â€“ Generates channel autocorrelation values  </li>
<li><code>README.md</code> â€“ Project documentation</li>
</ul>
<hr>
<h2 id="âš™ï¸-Key-Parameters"><a href="#âš™ï¸-Key-Parameters" class="headerlink" title="âš™ï¸ Key Parameters"></a>âš™ï¸ Key Parameters</h2><table>
<thead>
<tr>
<th>Parameter</th>
<th>Value</th>
</tr>
</thead>
<tbody><tr>
<td>FFT Length</td>
<td>256</td>
</tr>
<tr>
<td>Pilot Count</td>
<td>32</td>
</tr>
<tr>
<td>Channel Taps</td>
<td>10</td>
</tr>
<tr>
<td>Cyclic Prefix</td>
<td>9</td>
</tr>
<tr>
<td>SNR</td>
<td>40 dB</td>
</tr>
<tr>
<td>Modulation</td>
<td>QPSK</td>
</tr>
<tr>
<td>Simulation Frames</td>
<td>1000</td>
</tr>
</tbody></table>
<hr>
<h2 id="CSI-Acquisition-and-Precoding-Impact-on-BER"><a href="#CSI-Acquisition-and-Precoding-Impact-on-BER" class="headerlink" title="CSI Acquisition and Precoding Impact on BER"></a>CSI Acquisition and Precoding Impact on BER</h2><p>In MIMO-OFDM systems, accurate Channel State Information (CSI) is essential for leveraging spatial multiplexing gains and optimizing transmission through precoding:</p>
<ul>
<li><strong>Channel Sounding:</strong> Known pilot or preamble sequences are transmitted to probe the channel. The receiver estimates the CSI (\hat{H}) using LMMSE or similar methods.  </li>
<li><strong>CSI Feedback &amp; Precoding:</strong> The estimated CSI is fed back to the transmitter, which computes a precoding matrix ( \mathbf{V} ) (e.g., based on SVD or LMMSE estimation) to pre-multiply data symbols. This precoding enhances signal quality and mitigates interference.  </li>
<li><strong>Data Transmission &amp; BER:</strong> The precoded data is transmitted through the MIMO channel. The receiver decodes the signals based on the estimated CSI. The accuracy of CSI directly affects Bit Error Rate (BER) performance â€” better CSI leads to lower BER.</li>
</ul>
<p>Example MATLAB snippet for per-subcarrier precoding:</p>
<figure class="highlight matlab"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">for</span> carrIdx = <span class="number">1</span>:prm.numCarriers</span><br><span class="line">    Q = <span class="built_in">squeeze</span>(v(carrIdx,:,:));</span><br><span class="line">    normQ = Q * <span class="built_in">sqrt</span>(numTx)/norm(Q,<span class="string">&#x27;fro&#x27;</span>);</span><br><span class="line">    preData(carrIdx,symIdx,:) = <span class="built_in">squeeze</span>(gridData(carrIdx,symIdx,:)).&#x27; * normQ;</span><br><span class="line"><span class="keyword">end</span></span><br><span class="line"></span><br></pre></td></tr></table></figure>

<h3 id="Deep-Learning-for-CSI-Prediction"><a href="#Deep-Learning-for-CSI-Prediction" class="headerlink" title="Deep Learning for CSI Prediction"></a>Deep Learning for CSI Prediction</h3><h4 id="Objective"><a href="#Objective" class="headerlink" title="Objective"></a>Objective</h4><p>Use a neural network to predict CSI vectors from the received LTF sequences instead of using LMMSE.</p>
<h4 id="Model-Architecture-Keras"><a href="#Model-Architecture-Keras" class="headerlink" title="Model Architecture (Keras)"></a>Model Architecture (Keras)</h4><ul>
<li>Fully Connected Neural Network (FCæˆ–MLP)</li>
</ul>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">if</span> args.model == <span class="string">&#x27;FC&#x27;</span>:</span><br><span class="line">    <span class="built_in">print</span>(<span class="string">&quot;now the model is Full Dense Model&quot;</span>)</span><br><span class="line">    <span class="keyword">if</span> args.datasource == <span class="string">&#x27;matlab_maMimo&#x27;</span>:</span><br><span class="line">        <span class="keyword">if</span> args.decimate_max:</span><br><span class="line">            decimate = Flatten()(MaxPooling1D()(next_layer_in))</span><br><span class="line">            next_layer_in = Concatenate(axis=1)([decimate, seq_p])</span><br><span class="line">        <span class="keyword">elif</span> args.decimate_avg:</span><br><span class="line">            decimate = Flatten()(AveragePooling1D()(next_layer_in))</span><br><span class="line">            next_layer_in = Concatenate(axis=1)([decimate, seq_p])</span><br><span class="line">        <span class="comment"># TODO aggiungere decimazione pura (senza max o avg pooling, solo scarto)</span></span><br><span class="line"></span><br><span class="line">        <span class="keyword">else</span>:</span><br><span class="line">            flatten = Flatten()(next_layer_in)</span><br><span class="line">            next_layer_in = Concatenate(axis=1)([flatten, seq_p])</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    <span class="keyword">for</span> i, n <span class="keyword">in</span> enumerate(nn):</span><br><span class="line">        layers[<span class="string">&#x27;dense&#x27;</span>].append(</span><br><span class="line">            Dense(nn[i], activation=<span class="string">&#x27;relu&#x27;</span>, kernel_initializer=<span class="string">&#x27;glorot_uniform&#x27;</span>, name=<span class="string">&#x27;fc_dense&#x27;</span>+str(i))(next_layer_in)</span><br><span class="line">        )</span><br><span class="line">        <span class="keyword">if</span> args.useBN:</span><br><span class="line">            layers[<span class="string">&#x27;batchnorm&#x27;</span>].append(</span><br><span class="line">                BatchNormalization()(layers[<span class="string">&#x27;dense&#x27;</span>][-1])</span><br><span class="line">            )</span><br><span class="line">            next_layer_in = layers[<span class="string">&#x27;batchnorm&#x27;</span>][-1]</span><br><span class="line">        <span class="keyword">else</span>:</span><br><span class="line">            next_layer_in = layers[<span class="string">&#x27;dense&#x27;</span>][-1]</span><br><span class="line">        <span class="keyword">if</span> (i &lt; (numDense - 1)) and (args.dropout != 0.0):  <span class="comment"># if not the last layer, add dropout</span></span><br><span class="line">            layers[<span class="string">&#x27;dropout&#x27;</span>].append(</span><br><span class="line">                Dropout(args.dropout, name=<span class="string">&#x27;drop&#x27;</span>+str(i))(next_layer_in)</span><br><span class="line">            )</span><br><span class="line">            next_layer_in = layers[<span class="string">&#x27;dropout&#x27;</span>][-1]</span><br><span class="line">    encoder = Dense(simParams[<span class="string">&#x27;nSubCarr&#x27;</span>], activation=<span class="string">&#x27;linear&#x27;</span>, kernel_initializer=<span class="string">&#x27;glorot_uniform&#x27;</span>, name=<span class="string">&#x27;fc_regressor&#x27;</span>)(next_layer_in)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    <span class="keyword">if</span> args.datasource == <span class="string">&#x27;matlab_maMimo&#x27;</span>:</span><br><span class="line">        CSI_predictor = Model([seq_in,seq_p], encoder)</span><br><span class="line">    <span class="keyword">else</span>:</span><br><span class="line">        CSI_predictor = Model(seq_in, encoder)</span><br><span class="line"></span><br></pre></td></tr></table></figure>
<p>å…¶ä¸­éšè—å±‚nnæ•°åˆ—ä¸º[1024,1024],å› æ­¤æœ€åçš„æ¨¡å‹summaryä¸ºï¼š</p>
<table>
<thead>
<tr>
<th>Layer Name</th>
<th>Type</th>
<th>Output Shape</th>
<th>Parameters</th>
<th>Description</th>
</tr>
</thead>
<tbody><tr>
<td><code>seq_in</code></td>
<td>Input</td>
<td><code>(None, T, F)</code></td>
<td>0</td>
<td>CSI time-series input</td>
</tr>
<tr>
<td><code>seq_p</code></td>
<td>Input</td>
<td><code>(None, P)</code></td>
<td>0</td>
<td>Position input</td>
</tr>
<tr>
<td><code>flatten</code></td>
<td>Flatten</td>
<td><code>(None, TÃ—F)</code></td>
<td>0</td>
<td>Flattens CSI sequence</td>
</tr>
<tr>
<td><code>concatenate</code></td>
<td>Concatenate</td>
<td><code>(None, TÃ—F + P)</code></td>
<td>0</td>
<td>Merges CSI and position inputs</td>
</tr>
<tr>
<td><code>fc_dense0</code></td>
<td>Dense</td>
<td><code>(None, 1024)</code></td>
<td><code>(TÃ—F + P + 1) Ã— 1024</code></td>
<td>Fully connected layer with ReLU</td>
</tr>
<tr>
<td><code>batch_norm_0</code></td>
<td>BatchNorm</td>
<td><code>(None, 1024)</code></td>
<td>4096</td>
<td>Batch normalization</td>
</tr>
<tr>
<td><code>drop0</code></td>
<td>Dropout</td>
<td><code>(None, 1024)</code></td>
<td>0</td>
<td>Dropout layer (optional)</td>
</tr>
<tr>
<td><code>fc_dense1</code></td>
<td>Dense</td>
<td><code>(None, 1024)</code></td>
<td><code>1024 Ã— 1024 + 1024 = 1,049,600</code></td>
<td>Hidden dense layer</td>
</tr>
<tr>
<td><code>batch_norm_1</code></td>
<td>BatchNorm</td>
<td><code>(None, 1024)</code></td>
<td>4096</td>
<td>Batch normalization</td>
</tr>
<tr>
<td><code>fc_regressor</code></td>
<td>Dense</td>
<td><code>(None, nSubCarr)</code></td>
<td><code>1024 Ã— nSubCarr + nSubCarr</code></td>
<td>Output prediction (e.g., CSI subcarriers)</td>
</tr>
</tbody></table>
<ul>
<li>CNN</li>
</ul>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">elif</span> args.model ==<span class="string">&#x27;CONV1D&#x27;</span>:</span><br><span class="line">    <span class="built_in">print</span>(<span class="string">&quot;now the model is Convolution 1D Model&quot;</span>)</span><br><span class="line"></span><br><span class="line">    conv1 = BatchNormalization()(Conv1D(128, 7, padding=<span class="string">&#x27;same&#x27;</span>, name=<span class="string">&#x27;cnn1d_1&#x27;</span>, activation=<span class="string">&#x27;relu&#x27;</span>)(next_layer_in))</span><br><span class="line">    maxpool1 = AveragePooling1D()(conv1)</span><br><span class="line">    <span class="string">&quot;&quot;</span><span class="string">&quot;</span></span><br><span class="line"><span class="string">    conv2 = BatchNormalization()(Conv1D(64, 7, padding=&#x27;same&#x27;, name=&#x27;cnn1d_2&#x27;, activation=&#x27;relu&#x27;)(maxpool1))</span></span><br><span class="line"><span class="string">    maxpool2 = AveragePooling1D()(conv2)</span></span><br><span class="line"><span class="string">   </span></span><br><span class="line"><span class="string">    conv3 = BatchNormalization()(Conv1D(64, 5, padding=&#x27;same&#x27;, name=&#x27;cnn1d_3&#x27;, activation=&#x27;relu&#x27;)(maxpool2))</span></span><br><span class="line"><span class="string">    maxpool3 = MaxPooling1D()(conv3)</span></span><br><span class="line"><span class="string">    &quot;</span><span class="string">&quot;&quot;</span></span><br><span class="line">    flatten = Flatten()(maxpool1)</span><br><span class="line">    <span class="comment"># TODO INSERT CONVOLUTIONAL AUTOENCODER HERE</span></span><br><span class="line"></span><br><span class="line">    next_layer_in = Concatenate(axis=1)([flatten, seq_p])</span><br><span class="line"></span><br><span class="line">    <span class="keyword">for</span> i, n <span class="keyword">in</span> enumerate(nn):</span><br><span class="line">        layers[<span class="string">&#x27;dense&#x27;</span>].append(</span><br><span class="line">            Dense(nn[i], activation=<span class="string">&#x27;relu&#x27;</span>, kernel_initializer=<span class="string">&#x27;glorot_uniform&#x27;</span>, name=<span class="string">&#x27;fc_dense&#x27;</span>+str(i))(next_layer_in)</span><br><span class="line">        )</span><br><span class="line">        <span class="keyword">if</span> args.useBN:</span><br><span class="line">            layers[<span class="string">&#x27;batchnorm&#x27;</span>].append(</span><br><span class="line">                BatchNormalization()(layers[<span class="string">&#x27;dense&#x27;</span>][-1])</span><br><span class="line">            )</span><br><span class="line">            next_layer_in = layers[<span class="string">&#x27;batchnorm&#x27;</span>][-1]</span><br><span class="line">        <span class="keyword">else</span>:</span><br><span class="line">            next_layer_in = layers[<span class="string">&#x27;dense&#x27;</span>][-1]</span><br><span class="line">        <span class="keyword">if</span> i &lt; (numDense - 1):  <span class="comment"># if not the last layer, add dropout</span></span><br><span class="line">            layers[<span class="string">&#x27;dropout&#x27;</span>].append(</span><br><span class="line">                Dropout(args.dropout, name=<span class="string">&#x27;drop&#x27;</span>+str(i))(next_layer_in)</span><br><span class="line">            )</span><br><span class="line">            next_layer_in = layers[<span class="string">&#x27;dropout&#x27;</span>][-1]</span><br><span class="line">    encoder = Dense(n_out, activation=<span class="string">&#x27;linear&#x27;</span>, kernel_initializer=<span class="string">&#x27;glorot_uniform&#x27;</span>, name=<span class="string">&#x27;fc_regressor&#x27;</span>)(next_layer_in)</span><br><span class="line"></span><br><span class="line">    CSI_predictor = Model([seq_in,seq_p], encoder)</span><br></pre></td></tr></table></figure>
<p>æ¨¡å‹çš„summaryå¦‚ä¸‹ï¼š</p>
<table>
<thead>
<tr>
<th>Layer Name</th>
<th>Layer Type</th>
<th>Output Shape</th>
<th>Number of Parameters</th>
<th>Description</th>
</tr>
</thead>
<tbody><tr>
<td>seq_in</td>
<td>InputLayer</td>
<td>(None, T, F)</td>
<td>0</td>
<td>Input CSI sequence</td>
</tr>
<tr>
<td>cnn1d_1</td>
<td>Conv1D</td>
<td>(None, T, 128)</td>
<td>(F * 7 * 128) + 128</td>
<td>1D convolution, kernel size 7, 128 filters</td>
</tr>
<tr>
<td>batch_normalization</td>
<td>BatchNormalization</td>
<td>(None, T, 128)</td>
<td>512</td>
<td>Normalization after conv1d</td>
</tr>
<tr>
<td>average_pooling1d</td>
<td>AveragePooling1D</td>
<td>(None, T&#x2F;&#x2F;2, 128)</td>
<td>0</td>
<td>Downsampling by average pooling</td>
</tr>
<tr>
<td>flatten</td>
<td>Flatten</td>
<td>(None, (T&#x2F;&#x2F;2) * 128)</td>
<td>0</td>
<td>Flatten pooled feature maps</td>
</tr>
<tr>
<td>seq_p</td>
<td>InputLayer</td>
<td>(None, P)</td>
<td>0</td>
<td>Additional parameter input (e.g., position)</td>
</tr>
<tr>
<td>concatenate</td>
<td>Concatenate</td>
<td>(None, (T&#x2F;&#x2F;2)*128 + P)</td>
<td>0</td>
<td>Concatenate flattened features and params</td>
</tr>
<tr>
<td>fc_dense0</td>
<td>Dense</td>
<td>(None, 1024)</td>
<td>((T&#x2F;&#x2F;2)*128 + P + 1) * 1024</td>
<td>Fully connected layer with 1024 units</td>
</tr>
<tr>
<td>batch_normalization_1</td>
<td>BatchNormalization</td>
<td>(None, 1024)</td>
<td>4096</td>
<td>Normalization after fc_dense0</td>
</tr>
<tr>
<td>drop0</td>
<td>Dropout</td>
<td>(None, 1024)</td>
<td>0</td>
<td>Dropout for regularization</td>
</tr>
<tr>
<td>fc_dense1</td>
<td>Dense</td>
<td>(None, 1024)</td>
<td>1,049,600 (1024*1024 + 1024)</td>
<td>Fully connected layer with 1024 units</td>
</tr>
<tr>
<td>batch_normalization_2</td>
<td>BatchNormalization</td>
<td>(None, 1024)</td>
<td>4096</td>
<td>Normalization after fc_dense1</td>
</tr>
<tr>
<td>drop1</td>
<td>Dropout</td>
<td>(None, 1024)</td>
<td>0</td>
<td>Dropout for regularization</td>
</tr>
<tr>
<td>fc_re</td>
<td></td>
<td></td>
<td></td>
<td></td>
</tr>
</tbody></table>
<hr>
<blockquote>
<p><strong>Notice</strong><br><br>éœ€è¦æ³¨æ„è¿™é‡Œçš„Tå°±æ˜¯inPreambleï¼Œå› æ­¤åœ¨å–å·ç§¯åoutput shapeä¸º(T,128)ï¼Œå…¶ä¸­128ä¸ºé€šé“æ•°<br></p>
</blockquote>
<hr>
<p>Output:</p>
<ul>
<li>Predicted CSI of shape $n_{Rx} \times n_{Tx} \times n_{SubCarriers}$</li>
</ul>
<h4 id="Loss"><a href="#Loss" class="headerlink" title="Loss"></a>Loss</h4><p>The model minimizes <strong>MSE</strong> between predicted CSI and ground truth:</p>
<p>$$<br>\text{MSE} &#x3D; \frac{1}{N} \sum_{i&#x3D;1}^{N} \left| H_i - \hat{H}_i \right|^2<br>$$</p>
<p>Also supports NMSE:</p>
<p>$$<br>\text{NMSE} &#x3D; \frac{| H - \hat{H} |^2}{| H |^2}<br>$$<br>è¿™é‡Œçš„$\hat{H}$æ˜¯é€šè¿‡LMMSEè®¡ç®—å¾—åˆ°çš„ï¼Œå› æ­¤æ˜¯å°†ä¼ ç»Ÿä¿¡é“ä¼°è®¡æ–¹æ³•å¾—åˆ°çš„CSIä½œä¸ºground truthï¼Œä¹Ÿå°±æ˜¯target</p>
<h4 id="æ•°æ®å¤„ç†"><a href="#æ•°æ®å¤„ç†" class="headerlink" title="æ•°æ®å¤„ç†"></a>æ•°æ®å¤„ç†</h4><p>nRxAts x nTxAts x nPacketsè¡¨ç¤ºnä¸ªæ ·æœ¬ï¼ŒæŒ‰ç…§batch_sizeä»ä¸­å–æ ·ï¼Œæ”¾åˆ°Xå’Œyä¸­ï¼Œç”¨äºåç»­train</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line">data_X = f[ref_X][:]</span><br><span class="line">data_y = f[ref_y][:]</span><br><span class="line">nUsers = f[<span class="string">&#x27;usr_data&#x27;</span>].shape[1]</span><br><span class="line"><span class="comment"># (4, 10240, 30),</span></span><br><span class="line">nRxAts, inPreambLen, nPackets = data_X.shape</span><br><span class="line"><span class="comment"># (4, 32, 234, 30)ï¼Œå…¶ä¸­nRxAtsè¡¨ç¤ºæ¥å—ç«¯å¤©çº¿æ•°é‡ï¼ŒnTxAtsè¡¨ç¤ºå‘é€ç«¯å¤©çº¿æ•°é‡</span></span><br><span class="line">nRxAts, nTxAts, nSubCarr, nPackets = data_y.shape</span><br><span class="line">P = f[<span class="string">&#x27;P&#x27;</span>][:]  <span class="comment"># retrieve pilot sequences matrix</span></span><br><span class="line"></span><br><span class="line">trainX_temp = np.zeros((nPackets*nTxAts*nRxAts, <span class="number">2</span>), dtype=int) # for every datapoint, this will contain every unique LTF relative [hash, iTx]</span><br><span class="line">trainy_real_temp = np.zeros((nPackets*nRxAts*nTxAts,nSubCarr))</span><br><span class="line">trainy_imag_temp = np.zeros((nPackets*nRxAts*nTxAts,nSubCarr))</span><br><span class="line"></span><br><span class="line"><span class="comment"># dæ˜¯realå’Œimag</span></span><br><span class="line"><span class="keyword">for</span> i, sampleIx <span class="keyword">in</span> enumerate(list_IDs_temp):</span><br><span class="line">    <span class="comment"># Store sample</span></span><br><span class="line">    Xsig[i] = self.dataset[<span class="string">&#x27;LTF&#x27;</span>][self.dataset[<span class="string">&#x27;X&#x27;</span>][sampleIx, 0]][self.d][</span><br><span class="line">                              0:int(self.prm[<span class="string">&#x27;lenLTF&#x27;</span>] / self.fraction)][:, np.newaxis]</span><br><span class="line">    Xp[i] = self.dataset[<span class="string">&#x27;P&#x27;</span>][:, self.dataset[<span class="string">&#x27;X&#x27;</span>][sampleIx, 1]]</span><br><span class="line"></span><br><span class="line">    <span class="comment"># Store class</span></span><br><span class="line">    y[i] = self.dataset[<span class="string">&#x27;y&#x27;</span>][self.d][sampleIx, :]</span><br><span class="line"></span><br></pre></td></tr></table></figure>
<h4 id="Training"><a href="#Training" class="headerlink" title="Training"></a>Training</h4><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">earlystop = EarlyStopping(patience=10, restore_best_weights=True)</span><br><span class="line">reduce_lr = ReduceLROnPlateau(<span class="built_in">factor</span>=0.1, patience=20)</span><br><span class="line">callbacks = [earlystop, reduce_lr]</span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span> args.method == <span class="string">&#x27;default_SNR&#x27;</span>:</span><br><span class="line">    applyGaussNoise = changeNoisePower(avg_sigPow, ...)</span><br><span class="line">    callbacks.append(applyGaussNoise)</span><br><span class="line"></span><br><span class="line">CSI_predictor.fit(</span><br><span class="line">    x=train_generator,</span><br><span class="line">    validation_data=valid_generator,</span><br><span class="line">    epochs=args.epochs,</span><br><span class="line">    callbacks=callbacks</span><br><span class="line">)</span><br></pre></td></tr></table></figure>

<h4 id="Evaluation-Metrics"><a href="#Evaluation-Metrics" class="headerlink" title="Evaluation Metrics"></a>Evaluation Metrics</h4><h5 id="ä¿¡é“ä¼°è®¡æ¥æºï¼ˆestSourceï¼‰"><a href="#ä¿¡é“ä¼°è®¡æ¥æºï¼ˆestSourceï¼‰" class="headerlink" title="ä¿¡é“ä¼°è®¡æ¥æºï¼ˆestSourceï¼‰"></a>ä¿¡é“ä¼°è®¡æ¥æºï¼ˆestSourceï¼‰</h5><ul>
<li><code>estSource = 3</code>ï¼šä½¿ç”¨ DNN è¿›è¡Œä¿¡é“ä¼°è®¡. </li>
<li><code>estSource = 4</code>ï¼šä½¿ç”¨å®Œç¾ CSIï¼ˆç†æƒ³ä¿¡é“ï¼‰<br>æ¥è‡ªä½å™ªå£°æƒ…å†µä¸‹çš„ä¿¡é“ä¼°è®¡</li>
</ul>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line">rxPreAmp_lowNoise = phased.ReceiverPreamp( ...</span><br><span class="line">            <span class="string">&#x27;Gain&#x27;</span>,gain_dB, ...    % account <span class="keyword">for</span> path loss</span><br><span class="line">            <span class="string">&#x27;NoiseMethod&#x27;</span>, <span class="string">&#x27;Noise power&#x27;</span>, ...</span><br><span class="line">            <span class="string">&#x27;NoisePower&#x27;</span>, db2pow(-100));        </span><br><span class="line">        </span><br><span class="line">rxPreSigAmp_real = rxPreAmp_lowNoise(rxPreSig&#123;uIdx&#125;); </span><br><span class="line">%   scale power <span class="keyword">for</span> used sub-carriers</span><br><span class="line">rxPreSigAmp_real = rxPreSigAmp_real * (sqrt(prm.FFTLength - ...</span><br><span class="line">    length(prm.NullCarrierIndices))/prm.FFTLength);</span><br><span class="line">        </span><br><span class="line">inputRXSig_real = rxPreSigAmp_real(chanDelay(uIdx)+1: ...</span><br><span class="line">                 end-(prm.numPadZeros-chanDelay(uIdx)),:);</span><br><span class="line">% OFDM demodulation</span><br><span class="line">rxOFDM_real = ofdmdemod(inputRXSig_real,prm.FFTLength, ...</span><br><span class="line">            prm.CyclicPrefixLength,prm.CyclicPrefixLength, ...</span><br><span class="line">            prm.NullCarrierIndices,prm.PilotCarrierIndices);</span><br><span class="line"></span><br><span class="line">% Channel estimation from preamble</span><br><span class="line">%       numCarr, numTx, numRx</span><br><span class="line">% Using classic (LS) method</span><br><span class="line">[hDp_real&#123;uIdx&#125;,~,~,~] = helperMIMOChannelEstimate(rxOFDM_real(:,1:numTx,:),prm,1,h,snr_dB_CS,<span class="literal">false</span>);     </span><br></pre></td></tr></table></figure>

<h5 id="NMSEè®¡ç®—"><a href="#NMSEè®¡ç®—" class="headerlink" title="NMSEè®¡ç®—"></a>NMSEè®¡ç®—</h5><p>ä½¿ç”¨ <code>NMSE_subk</code> å‡½æ•°è®¡ç®—æ¯ä¸ªå­è½½æ³¢ã€æ¯å¯¹å¤©çº¿çš„å½’ä¸€åŒ–å‡æ–¹è¯¯å·®ï¼Œå¹¶å–å¹³å‡ï¼š</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">function</span> [out] = NMSE_subk(real, pred)</span><br><span class="line">    diff = real - pred;</span><br><span class="line">    tx = size(real,2);</span><br><span class="line">    rx = size(real,3);</span><br><span class="line">    subK_nmse = zeros(tx,rx);</span><br><span class="line">    <span class="keyword">for</span> t=1:tx</span><br><span class="line">        <span class="keyword">for</span> r=1:rx</span><br><span class="line">            subK_nmse(t,r) = norm(squeeze(diff(:,t,r)))^2 / norm(squeeze(real(:,t,r)))^2;</span><br><span class="line">        end</span><br><span class="line">    end</span><br><span class="line">    out = mean(subK_nmse, <span class="string">&#x27;all&#x27;</span>);</span><br><span class="line">end</span><br></pre></td></tr></table></figure>


<h5 id="BER-Bit-Error-Rate"><a href="#BER-Bit-Error-Rate" class="headerlink" title="BER(Bit Error Rate)"></a>BER(Bit Error Rate)</h5><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">% Compute and display bit error rate</span><br><span class="line">ber = comm.ErrorRate;</span><br><span class="line">measures = ber(txDataBits&#123;uIdx&#125;,rxBits);</span><br><span class="line">            </span><br></pre></td></tr></table></figure>
<h5 id="EVM-Error-Vector-Magnitude"><a href="#EVM-Error-Vector-Magnitude" class="headerlink" title="EVM(Error Vector Magnitude)"></a>EVM(Error Vector Magnitude)</h5><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">evm = comm.EVM(<span class="string">&#x27;Normalization&#x27;</span>,<span class="string">&#x27;Average constellation power&#x27;</span>, ...</span><br><span class="line">                <span class="string">&#x27;ReferenceSignalSource&#x27;</span>,<span class="string">&#x27;Estimated from reference constellation&#x27;</span>, ...</span><br><span class="line">                <span class="string">&#x27;ReferenceConstellation&#x27;</span>, ...</span><br><span class="line">                qammod((<span class="number">0</span>:prm.modMode-<span class="number">1</span>)&#x27;,prm.modMode,&#x27;UnitAveragePower&#x27;,<span class="number">1</span>));</span><br><span class="line">rmsEVM = evm(rxSymbs);</span><br><span class="line">            </span><br></pre></td></tr></table></figure>
      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="en">
    <link itemprop="mainEntityOfPage" href="https://hechenyi.github.io/2025/04/28/C%E8%AF%AD%E8%A8%80%E5%AE%9E%E7%8E%B0%E7%BA%BF%E7%A8%8B%E6%B1%A0/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="John Doe">
      <meta itemprop="description" content="">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Hexo">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/2025/04/28/C%E8%AF%AD%E8%A8%80%E5%AE%9E%E7%8E%B0%E7%BA%BF%E7%A8%8B%E6%B1%A0/" class="post-title-link" itemprop="url">Cè¯­è¨€å®ç°çº¿ç¨‹æ± </a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">Posted on</span>

              <time title="Created: 2025-04-28 17:34:56" itemprop="dateCreated datePublished" datetime="2025-04-28T17:34:56+08:00">2025-04-28</time>
            </span>
              <span class="post-meta-item">
                <span class="post-meta-item-icon">
                  <i class="far fa-calendar-check"></i>
                </span>
                <span class="post-meta-item-text">Edited on</span>
                <time title="Modified: 2025-05-27 06:21:25" itemprop="dateModified" datetime="2025-05-27T06:21:25+08:00">2025-05-27</time>
              </span>
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-folder"></i>
              </span>
              <span class="post-meta-item-text">In</span>
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/C/" itemprop="url" rel="index"><span itemprop="name">C</span></a>
                </span>
            </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      
          <h2 id="Basic-Concept"><a href="#Basic-Concept" class="headerlink" title="Basic Concept"></a>Basic Concept</h2><p>åœ¨é«˜å¹¶å‘ç¨‹åºä¸­ï¼Œé¢‘ç¹åˆ›å»ºå’Œé”€æ¯çº¿ç¨‹ä¼šé€ æˆè¾ƒå¤§çš„èµ„æºæ¶ˆè€—å’Œç³»ç»Ÿå¼€é”€ã€‚çº¿ç¨‹æ± ï¼ˆThread Poolï¼‰æ˜¯ä¸€ç§å¸¸ç”¨çš„å¹¶å‘ç¼–ç¨‹æŠ€æœ¯ï¼Œé€šè¿‡ç»´æŠ¤ä¸€ä¸ªçº¿ç¨‹é›†åˆæ¥å¤„ç†ä»»åŠ¡ï¼Œé¿å…é¢‘ç¹åˆ›å»ºå’Œé”€æ¯çº¿ç¨‹ï¼Œæé«˜ç³»ç»Ÿæ€§èƒ½<br>çº¿ç¨‹æ± é€šå¸¸å…·å¤‡ä»¥ä¸‹åŠŸèƒ½ï¼š</p>
<ul>
<li>æ”¯æŒåŠ¨æ€æ·»åŠ ä»»åŠ¡</li>
<li>çº¿ç¨‹å¤ç”¨ï¼Œå‡å°‘çº¿ç¨‹åˆ›å»ºé”€æ¯çš„å¼€é”€</li>
<li>ä»»åŠ¡é˜Ÿåˆ—æ”¯æŒFIFOæœºåˆ¶</li>
<li>çº¿ç¨‹æ± çš„é”€æ¯ä¸èµ„æºå›æ”¶</li>
</ul>
<h2 id="Producer-Consumer-Model"><a href="#Producer-Consumer-Model" class="headerlink" title="Producer-Consumer Model"></a>Producer-Consumer Model</h2><p>ä»¥ä¸‹å…ƒç´ å’Œç»“æ„å‡ ä¹å‡ºç°åœ¨æ‰€æœ‰ç»å…¸çº¿ç¨‹æ± å®ç°ä¸­:</p>
<table>
<thead>
<tr>
<th>ç»„ä»¶</th>
<th>åŠŸèƒ½è¯´æ˜</th>
<th>æ˜¯å¦ä¸ºæ ‡å‡†åšæ³•</th>
</tr>
</thead>
<tbody><tr>
<td><strong>çº¿ç¨‹æ•°ç»„</strong></td>
<td>é¢„å…ˆåˆ›å»ºå›ºå®šæ•°é‡çš„çº¿ç¨‹ï¼Œç”¨äºå¤„ç†ä»»åŠ¡</td>
<td>âœ… æ˜¯</td>
</tr>
<tr>
<td><strong>ä»»åŠ¡é˜Ÿåˆ—</strong></td>
<td>å­˜æ”¾å°šæœªå¤„ç†çš„ä»»åŠ¡ï¼ŒæŒ‰é¡ºåºæ’é˜Ÿ</td>
<td>âœ… æ˜¯</td>
</tr>
<tr>
<td><strong>äº’æ–¥é”ï¼ˆmutexï¼‰</strong></td>
<td>ç”¨äºä¿æŠ¤ä»»åŠ¡é˜Ÿåˆ—çš„è®¿é—®ï¼Œé˜²æ­¢å¤šä¸ªçº¿ç¨‹ç«äº‰èµ„æº</td>
<td>âœ… æ˜¯</td>
</tr>
<tr>
<td><strong>æ¡ä»¶å˜é‡ï¼ˆcondï¼‰</strong></td>
<td>å½“ä»»åŠ¡é˜Ÿåˆ—ä¸ºç©ºæ—¶é˜»å¡çº¿ç¨‹ï¼Œæœ‰æ–°ä»»åŠ¡æ—¶å”¤é†’å·¥ä½œçº¿ç¨‹</td>
<td>âœ… æ˜¯</td>
</tr>
<tr>
<td><strong>æ— é™å¾ªç¯çš„ <code>worker_thread</code></strong></td>
<td>æ¯ä¸ªçº¿ç¨‹ä¸æ–­å°è¯•ä»ä»»åŠ¡é˜Ÿåˆ—ä¸­å–ä»»åŠ¡å¹¶æ‰§è¡Œ</td>
<td>âœ… æ˜¯</td>
</tr>
<tr>
<td><strong>stop æ ‡å¿—</strong></td>
<td>æ§åˆ¶çº¿ç¨‹æ± çš„é”€æ¯æµç¨‹ï¼Œä¼˜é›…åœ°é€šçŸ¥çº¿ç¨‹é€€å‡º</td>
<td>âœ… æ˜¯</td>
</tr>
<tr>
<td><strong>ä»»åŠ¡ç»“æ„åŒ…å« function + arg</strong></td>
<td>æ”¯æŒä¼ å…¥ä»»æ„å‡½æ•°å’Œå‚æ•°ï¼Œä½¿çº¿ç¨‹æ± ä»»åŠ¡æ›´é€šç”¨</td>
<td>âœ… æ˜¯</td>
</tr>
</tbody></table>
<h2 id="å®ç°æ€è·¯"><a href="#å®ç°æ€è·¯" class="headerlink" title="å®ç°æ€è·¯"></a>å®ç°æ€è·¯</h2><p>è¿™æ¶‰åŠåŒæ­¥çš„æ¦‚å¿µï¼Œéœ€è¦æ»¡è¶³åŒæ­¥ä¸äº’æ–¥ï¼Œå› æ­¤éœ€è¦ä½¿ç”¨äº’æ–¥é”ï¼ˆpthread_mutex_tï¼‰æ¥ä¿è¯ä»»åŠ¡é˜Ÿåˆ—æ“ä½œçš„çº¿ç¨‹å®‰å…¨ï¼Œä»¥åŠéœ€è¦æ¡ä»¶å˜é‡ï¼ˆpthread_cond_tï¼‰ç”¨äºé€šçŸ¥çº¿ç¨‹å¤„ç†ä»»åŠ¡<br>ä¸‹é¢ä»£ç å±•ç¤ºäº† åˆå§‹åŒ–çº¿ç¨‹æ±  -&gt; æ·»åŠ ä»»åŠ¡åˆ°çº¿ç¨‹æ±  -&gt; æŠŠä»»åŠ¡ä»çº¿ç¨‹æ± ä¸­å–å‡ºæ¥ï¼Œæ‰§è¡Œtaské‡Œçš„functionï¼Œå¹¶ä»¥æ­¤æ„å»ºå·¥ä½œçº¿ç¨‹ã€‚</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#include&lt;stdio.h&gt;</span></span><br><span class="line"><span class="comment">#include&lt;stdlib.h&gt;</span></span><br><span class="line"><span class="comment">#include&lt;pthread.h&gt;</span></span><br><span class="line"><span class="comment">#include&lt;unistd.h&gt;</span></span><br><span class="line">typedef struct task&#123;</span><br><span class="line">    void (*<span class="keyword">function</span>) (void *);</span><br><span class="line">    void *arg;</span><br><span class="line">    struct task *next;</span><br><span class="line">&#125; task_t;</span><br><span class="line">typedef struct&#123;</span><br><span class="line">    /// äº’æ–¥é”</span><br><span class="line">    pthread_mutex_t lock;</span><br><span class="line">    /// æ¡ä»¶å˜é‡</span><br><span class="line">    pthread_cond_t cond;</span><br><span class="line">    /// çº¿ç¨‹æ•°ç»„</span><br><span class="line">    pthread_t *threads;</span><br><span class="line">    /// ä»»åŠ¡é˜Ÿåˆ—</span><br><span class="line">    task_t *task_queue;</span><br><span class="line">    int thread_count;</span><br><span class="line">    int stop;</span><br><span class="line">&#125; thread_pool_t;</span><br><span class="line"></span><br><span class="line">// çº¿ç¨‹æ± å®ä¾‹</span><br><span class="line">thread_pool_t pool;</span><br><span class="line"></span><br><span class="line">// çº¿ç¨‹æ‰§è¡Œçš„ä»»åŠ¡å‡½æ•°,è¿™é‡Œå…·ä½“æ¥è¯´æ˜¯ä»poolé‡Œçš„ä»»åŠ¡é˜Ÿåˆ—ä¸­æŠŠä»»åŠ¡ä¸€ä¸ªä¸€ä¸ªçš„å–å‡ºæ¥ï¼Œç„¶åå†æ‰§è¡Œä»»åŠ¡é‡Œçš„<span class="keyword">function</span>ï¼ŒæŠŠç„¶åæ”¾åˆ°å½“å‰work_threadæ‰§è¡Œã€‚</span><br><span class="line">void *worker_thread(void *arg)&#123;</span><br><span class="line">    <span class="keyword">while</span>(1)&#123;</span><br><span class="line">        pthread_mutex_lock(&amp;pool.lock);</span><br><span class="line">        // ç­‰å¾…ä»»åŠ¡</span><br><span class="line">        <span class="keyword">while</span>(pool.task_queue == NULL &amp;&amp; !pool.stop)&#123;</span><br><span class="line">            pthread_cond_wait(&amp;pool.cond, &amp;pool.lock);</span><br><span class="line">        &#125;</span><br><span class="line">        // æ£€æŸ¥æ˜¯å¦éœ€è¦ç»ˆæ­¢çº¿ç¨‹</span><br><span class="line">        <span class="keyword">if</span>(pool.stop)&#123;</span><br><span class="line">            pthread_mutex_unlock(&amp;pool.lock);</span><br><span class="line">            pthread_exit(NULL);</span><br><span class="line">        &#125;</span><br><span class="line">        // å–å‡ºä»»åŠ¡</span><br><span class="line">        task_t *task = pool.task_queue;</span><br><span class="line">        <span class="keyword">if</span>(task)&#123;</span><br><span class="line">            pool.task_queue = task-&gt;next;</span><br><span class="line">        &#125;</span><br><span class="line">        pthread_mutex_unlock(&amp;pool.lock);</span><br><span class="line">        <span class="keyword">if</span>(task)&#123;</span><br><span class="line">            task-&gt;<span class="keyword">function</span>(task-&gt;arg);</span><br><span class="line">            free(task);</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line">void thread_pool_init(int thread_count)&#123;</span><br><span class="line">    pool.thread_count = thread_count;</span><br><span class="line">    pool.stop = 0;</span><br><span class="line">    pool.task_queue = NULL;</span><br><span class="line">    pthread_mutex_init(&amp;pool.lock, NULL);</span><br><span class="line">    pthread_cond_init(&amp;pool.cond, NULL);</span><br><span class="line">    pool.threads = (pthread_t *) malloc(sizeof(pthread_t)*thread_count );</span><br><span class="line">    // åˆ›å»ºå·¥ä½œçº¿ç¨‹</span><br><span class="line">    <span class="keyword">for</span>(int i = 0; i &lt; thread_count; i++)&#123;</span><br><span class="line">        pthread_create(&amp;pool.threads[i], NULL, worker_thread, NULL);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line">// æ·»åŠ ä»»åŠ¡åˆ°çº¿ç¨‹æ± </span><br><span class="line">void thread_pool_add_task(void (*<span class="keyword">function</span>)(void *), void *arg)&#123;</span><br><span class="line">    task_t *new_task = (task_t *) malloc(sizeof(task_t));</span><br><span class="line">    new_task-&gt;<span class="keyword">function</span> = <span class="keyword">function</span>;</span><br><span class="line">    new_task-&gt;arg = arg;</span><br><span class="line">    new_task-&gt;next = NULL;</span><br><span class="line">    pthread_mutex_lock(&amp;pool.lock);</span><br><span class="line">    //æ·»åŠ åˆ°ä»»åŠ¡é˜Ÿåˆ—å°¾éƒ¨</span><br><span class="line">    <span class="keyword">if</span>(pool.task_queue == NULL)&#123;</span><br><span class="line">        pool.task_queue = new_task;</span><br><span class="line">    &#125;<span class="keyword">else</span>&#123;</span><br><span class="line">        task_t *temp = pool.task_queue;</span><br><span class="line">        <span class="keyword">while</span>(temp-&gt;next)&#123;</span><br><span class="line">            temp = temp-&gt;next;</span><br><span class="line">        &#125;</span><br><span class="line">        temp-&gt;next = new_task;</span><br><span class="line">    &#125;</span><br><span class="line">    pthread_cond_signal(&amp;pool.cond);</span><br><span class="line">    pthread_mutex_unlock(&amp;pool.lock);</span><br><span class="line"></span><br><span class="line">&#125;</span><br><span class="line">// å…³é—­çº¿ç¨‹æ± </span><br><span class="line">void <span class="function"><span class="title">thread_pool_destroy</span></span>()&#123;</span><br><span class="line">    pthread_mutex_lock(&amp;pool.lock);</span><br><span class="line">    pool.stop = 1;</span><br><span class="line">    pthread_cond_broadcast(&amp;pool.cond);</span><br><span class="line">    pthread_mutex_unlock(&amp;pool.lock);</span><br><span class="line">    // ç­‰å¾…æ‰€æœ‰çº¿ç¨‹ç»“æŸ</span><br><span class="line">    <span class="keyword">for</span>(int i = 0; i &lt; pool.thread_count; i++)&#123;</span><br><span class="line">        pthread_join(pool.threads[i], NULL);</span><br><span class="line">    &#125;</span><br><span class="line">    free(pool.threads);</span><br><span class="line">    task_t *task;</span><br><span class="line">    <span class="keyword">while</span>(pool.task_queue)&#123;</span><br><span class="line">        task = pool.task_queue;</span><br><span class="line">        pool.task_queue = task-&gt;next;</span><br><span class="line">        free(task);</span><br><span class="line">    &#125;</span><br><span class="line">    pthread_mutex_destroy(&amp;pool.lock);</span><br><span class="line">    pthread_cond_destroy(&amp;pool.cond);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">// æµ‹è¯•ä»»åŠ¡</span><br><span class="line">void test_task(void *arg)&#123;</span><br><span class="line">    int num = *(int *) arg;</span><br><span class="line">    <span class="built_in">printf</span>(<span class="string">&quot;çº¿ç¨‹ %ld æ­£åœ¨æ‰§è¡Œä»»åŠ¡ %d\n&quot;</span>, pthread_self(),num);</span><br><span class="line">    <span class="built_in">sleep</span>(1);</span><br><span class="line">&#125;</span><br><span class="line">int <span class="function"><span class="title">main</span></span>()&#123;</span><br><span class="line">    //  åˆ›å»ºå››ä¸ªçº¿ç¨‹</span><br><span class="line">    thread_pool_init(4);</span><br><span class="line">    <span class="keyword">for</span>(int i = 0; i &lt; 10; i++)&#123;</span><br><span class="line">        int *task_num = malloc(sizeof(int));</span><br><span class="line">        *task_num = i;</span><br><span class="line">        thread_pool_add_task(test_task, task_num);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="built_in">sleep</span>(5);</span><br><span class="line">    thread_pool_destroy;</span><br><span class="line">    <span class="built_in">return</span> 0;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="en">
    <link itemprop="mainEntityOfPage" href="https://hechenyi.github.io/2025/04/27/FDD/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="John Doe">
      <meta itemprop="description" content="">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Hexo">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/2025/04/27/FDD/" class="post-title-link" itemprop="url">FDD</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">Posted on</span>

              <time title="Created: 2025-04-27 06:47:02" itemprop="dateCreated datePublished" datetime="2025-04-27T06:47:02+08:00">2025-04-27</time>
            </span>
              <span class="post-meta-item">
                <span class="post-meta-item-icon">
                  <i class="far fa-calendar-check"></i>
                </span>
                <span class="post-meta-item-text">Edited on</span>
                <time title="Modified: 2025-04-28 06:48:46" itemprop="dateModified" datetime="2025-04-28T06:48:46+08:00">2025-04-28</time>
              </span>
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-folder"></i>
              </span>
              <span class="post-meta-item-text">In</span>
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/5G/" itemprop="url" rel="index"><span itemprop="name">5G</span></a>
                </span>
            </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      
          <h2 id="Basic-Concept"><a href="#Basic-Concept" class="headerlink" title="Basic Concept"></a>Basic Concept</h2><p>åœ¨FDDç³»ç»Ÿä¸­ï¼Œä¿¡é“è¢«åˆ†ä¸ºä¸Šè¡Œé“¾è·¯ï¼ˆULï¼Œuplinkï¼‰å’Œä¸‹è¡Œé“¾è·¯ï¼ˆDLï¼Œdownlinkï¼‰ï¼Œå®ƒä»¬åˆ†åˆ«ä½¿ç”¨ä¸åŒçš„é¢‘æ®µè¿›è¡Œé€šä¿¡ã€‚å› æ­¤åœ¨FDDé€šä¿¡æ˜¯åŒæ—¶è¿›è¡Œä¸Šè¡Œå’Œä¸‹è¡Œçš„ã€‚<br>åœ¨FDDç³»ç»Ÿå’ŒTDDç³»ç»Ÿä¸­æœ‰å¤šç§è°ƒåº¦ç®—æ³•ï¼š</p>
<ul>
<li>RRï¼ˆRound Robinï¼‰ è¿™ç§è°ƒåº¦ç®—æ³•ä¸»è¦å…³æ³¨å…¬å¹³æ€§ï¼Œå³å°½å¯èƒ½å¹³ç­‰åœ°åˆ†é…èµ„æºç»™æ‰€æœ‰ç”¨æˆ·</li>
<li>PFï¼ˆæ¯”ä¾‹å…¬å¹³è°ƒåº¦ï¼ŒProportional Fairï¼‰ï¼Œè¿™ç§ç®—æ³•è¯•å›¾åœ¨å…¬å¹³æ€§å’Œååé‡ä¹‹é—´æ‰¾åˆ°ä¸€ä¸ªæŠ˜è¡·ï¼Œå®ƒåœ¨è€ƒè™‘å…¬å¹³æ€§çš„åŒæ—¶ï¼Œä¼˜å…ˆé€‰æ‹©ä¿¡é“è´¨é‡å¥½çš„ç”¨æˆ·ã€‚ç›¸æ¯”RRï¼Œå®ƒèƒ½åœ¨ååé‡å’Œå…¬å¹³æ€§ä¹‹é—´è¾¾åˆ°è¾ƒå¥½çš„å¹³è¡¡ã€‚</li>
<li>Best CQIï¼ˆæœ€ä½³ä¿¡é“è´¨é‡æŒ‡ç¤ºç¬¦è°ƒåº¦ï¼‰ è¿™ç§è°ƒåº¦ç®—æ³•ä¼˜å…ˆé€‰æ‹©ä¿¡é“è´¨é‡å¥½çš„ç”¨æˆ·ï¼Œè¿™èƒ½æ˜¾è‘—æé«˜ä¸‹è¡Œå’Œä¸Šè¡Œçš„ååé‡ï¼Œå› ä¸ºå®ƒå……åˆ†åˆ©ç”¨äº†ä¿¡é“è´¨é‡ä¿¡æ¯ï¼Œä½†æ˜¯ç‰ºç‰²äº†å…¬å¹³æ€§ã€‚</li>
</ul>
<p>åœ¨NR FDDæµ‹è¯•ä¸­éœ€è¦æ„å»ºRLCå±‚ï¼Œå› ä¸º:</p>
<ul>
<li>éœ€è¦æ¨¡æ‹ŸçœŸå®æ•°æ®æµçš„ä¼ è¾“è¿‡ç¨‹</li>
<li>RLCå±‚å†³å®šäº†æ•°æ®å¦‚ä½•ä»ä¸Šåˆ°ä¸‹åˆ†å‘ã€ç®¡ç†å’Œé‡ä¼ </li>
<li>çœŸå®çš„é“¾è·¯æœ‰ä¸¢åŒ…ã€é‡ä¼ ã€é¡ºåºä¹±åºç­‰é—®é¢˜è¦å¤„ç†</li>
</ul>
<h3 id="RLC"><a href="#RLC" class="headerlink" title="RLC"></a>RLC</h3><p>RLCå…¨ç§°æ˜¯Radio Link Controlï¼Œç”¨äºæ— çº¿é“¾è·¯æ§åˆ¶ï¼Œä¸»è¦æ˜¯ä¿è¯æ•°æ®ä¼ è¾“çš„å¯é æ€§ï¼Œå…¶èåˆäº†OSIä¸ƒå±‚åè®®çš„æ•°æ®é“¾è·¯å±‚å’Œä¼ è¾“å±‚çš„åŠŸèƒ½å’Œæœºåˆ¶ï¼ŒåŒ…æ‹¬æ»‘åŠ¨çª—å£ã€ARQç­‰ç­‰ </p>
<h4 id="SDUå’ŒPDU"><a href="#SDUå’ŒPDU" class="headerlink" title="SDUå’ŒPDU"></a>SDUå’ŒPDU</h4><p>åœ¨åè®®ä½“ç³»é‡Œï¼Œä¸‹å±‚åè®®æ˜¯ä¸ºä¸Šå±‚åè®®æä¾›æœåŠ¡(service)çš„ï¼Œå› æ­¤å‡¡æ˜¯ä¸Šå±‚å‘è¿‡æ¥çš„æˆ–è€…å‘å¾€ä¸Šå±‚çš„æ•°æ®éƒ½å«SDU(Service Data Unit)ã€‚è€Œä¸Šå±‚åè®®(Protocol)å®ä½“å¯¹æ•°æ®è¿›è¡Œå¤„ç†åï¼Œé€šè¿‡ä¸‹å±‚åè®®æä¾›çš„æœåŠ¡ç»§ç»­å¾€åé¢å‘é€ï¼Œå› æ­¤å‡¡æ˜¯å‘ç»™ä¸‹å±‚æˆ–ä»ä¸‹å±‚æ”¶åˆ°çš„æ•°æ®å«åšPDU(Protocol Data Unit)<br>ä¾‹å¦‚Network Layerçš„SDUå¯ä»¥ç†è§£ä¸ºPacketï¼ŒMACçš„PDUå¯ä»¥ç†è§£ä¸ºFrame</p>
<h4 id="ä¸‰ç§ä¼ è¾“æ¨¡å‹"><a href="#ä¸‰ç§ä¼ è¾“æ¨¡å‹" class="headerlink" title="ä¸‰ç§ä¼ è¾“æ¨¡å‹"></a>ä¸‰ç§ä¼ è¾“æ¨¡å‹</h4><ul>
<li>TM - Transparent Mode<br>å‘å°„ç«¯ä¸å¯¹RLC SDUåšåˆ†æ®µæ“ä½œï¼Œä¹Ÿä¸æ·»åŠ RLC Headerï¼Œåªæ˜¯ç¼“å­˜æ•°æ®ï¼Œæ¥æ”¶ç«¯åŒç†ï¼Œæ”¶åˆ°æ•°æ®åç›´æ¥å‘ç»™ä¸Šå±‚ã€‚</li>
<li>UM - Unacknowledged Mode<br>æ— å“åº”æ¨¡å¼ï¼Œç±»ä¼¼UDPï¼Œå‘å°„ç«¯å¯ä»¥å¯¹æ•°æ®è¿›è¡Œåˆ†æ®µå¤„ç†ï¼Œä½†ä¸éœ€è¦æ¥æ”¶ç«¯åé¦ˆæ¥æ”¶çŠ¶æ€</li>
<li>AM - Acknowledged Mode<br>å“åº”æ¨¡å¼ï¼Œæ¥æ”¶ç«¯é€šè¿‡RLC status reportåé¦ˆåŒ…æ¥æ”¶çŠ¶æ€ï¼Œå‘å°„ç«¯æ ¹æ®status reportå†³å®šæ˜¯å¦é‡ä¼ æ•°æ®</li>
</ul>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">openExample(<span class="string">&#x27;5g/NRFDDSchedulingPerformanceEvaluationExample&#x27;</span>)</span><br></pre></td></tr></table></figure>

<p>è¿™ä¸ªä¾‹å­å±•ç¤ºäº†RR scheduler. The scheduler allocates resources based on pending retransmissions, buffer status, and channel quality for the UE nodes.<br><img src="/images/FDDScheduler.png"></p>
<h2 id="åˆ†æä»£ç "><a href="#åˆ†æä»£ç " class="headerlink" title="åˆ†æä»£ç "></a>åˆ†æä»£ç </h2><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">networkSimulator = wirelessNetworkSimulator.init; ///Create a wireless network simulator</span><br></pre></td></tr></table></figure>
<p>gNB &#x3D; nrGNB(Position &#x3D; [0 0 30], DuplexMode &#x3D; â€œFDDâ€, CarrierFrequency &#x3D; 2.6e9, ChannelBandwidth &#x3D; 30e6, SubcarrierSpacing &#x3D; 15e3, ReceiveGain &#x3D; 11);</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">configureScheduler(gNB,Scheduler=<span class="string">&quot;RoundRobin&quot;</span>,ResourceAllocationType=0);</span><br></pre></td></tr></table></figure>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">uePositions = [100 0 3; 250 0 3; 700 0 3; 750 0 3];</span><br><span class="line">ueNames = <span class="string">&quot;UE-&quot;</span> + (1:size(uePositions,1));</span><br><span class="line">UEs = nrUE(Name=ueNames,Position=uePositions,ReceiveGain=11);</span><br></pre></td></tr></table></figure>
<p>Set ue positions</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">/// Set the AppConfig parameter.</span><br><span class="line">load(<span class="string">&quot;NRFDDAppConfig.mat&quot;</span>)</span><br></pre></td></tr></table></figure>
<p>è¾“å‡ºçš„AppConfigç»“æ„ä½“ï¼Œé‡Œé¢éƒ½æ˜¯æœ‰å…³åº”ç”¨å±‚æµé‡é…ç½®å’ŒRLCé…ç½®ï¼ˆRNTIï¼Œ LogicalChannelIDï¼‰</p>
<ul>
<li>DataRate</li>
<li>PacketSize</li>
<li>HostDevice</li>
<li>RNTI(Radio network temporary identifier of a UE node.)</li>
<li>LogicalChannelID</li>
<li>BearerType</li>
</ul>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">load(<span class="string">&quot;NRFDDRLCChannelConfig.mat&quot;</span>);</span><br></pre></td></tr></table></figure>
<p>è¿™æ˜¯ç”¨äºé…ç½®RLC,ä»¥ä¸‹å‚æ•°æ˜¯æœ‰å…³RLCé…ç½®<br>æ³¨æ„RNTIç”¨äºå”¯ä¸€æ ‡è¯†UEï¼Œå®ƒæ˜¯ä¸´æ—¶çš„æ ‡è¯†ç¬¦ï¼Œç”¨äºä¸Šä¸‹æ–‡ä¸­çš„è°ƒåº¦å’Œé€šä¿¡ã€‚<br>LogicalChannelIDç”¨äºæ ‡è¯†UEä¸Šçš„å…·ä½“é€»è¾‘ä¿¡é“ï¼Œå®ƒåŒºåˆ†ä¸åŒç±»å‹çš„æ•°æ®æµæˆ–ä¿¡å·ã€‚<br>RNTIå’ŒLogicalChannelIDçš„ç»“åˆå¯ä»¥å”¯ä¸€æ ‡è¯†æŸä¸ªUEä¸Šçš„ç‰¹å®šæ•°æ®æµï¼Œç¡®ä¿æ•°æ®çš„æ­£å¸¸è°ƒåº¦å’Œä¼ è¾“ã€‚</p>
<ul>
<li>RNTI</li>
<li>LogicalChannelID</li>
<li>LogicalChannelGroup</li>
<li>RLCEntityType</li>
<li>Priority</li>
<li>SNFieldLength</li>
<li>BufferSize</li>
<li>PollPDU</li>
<li>PollByte</li>
<li>PollRetransmitTimer</li>
<li>MaxRetxThreshold</li>
<li>ReassemblyTimer</li>
<li>StatusProhibitTimer</li>
<li>PrioritizedBitRate</li>
<li>BucketSizeDuration<br>å…·ä½“å¯å‚è€ƒmatlab 5g toolä¸­çš„nrRLCBearerConfigç»“æ„ä½“</li>
</ul>
<p>åœ¨é…ç½®æ¯ä¸ªueçš„RLCåï¼Œä½¿ç”¨connectionUEå‡½æ•°å°†ueå’Œgnbè¿›è¡Œè¿æ¥</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">connectUE(gNB,UEs&#123;ueIdx&#125;, BSRPeriodicity=5, RLCBearerConfig=rlcBearers&#123;ueIdx&#125;);</span><br></pre></td></tr></table></figure>
<p>ä¹‹åset the periodic DL and UL application traffic pattern for UEs.</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">app = networkTrafficOnOff(PacketSize=2000, GeneratePacket=<span class="literal">true</span>,OnTime=numFrameSimulation/100,OffTime=0,DataRate=AppConfig.DataRate(appIdx));</span><br><span class="line"><span class="keyword">if</span> AppConfig.HostDevice(appIdx) == 0</span><br><span class="line">% Add traffic pattern that generates traffic on downlink</span><br><span class="line">addTrafficSource(gNB, app, DestionationNode=UEs(AppConfig.RNTI(appIdx)), LogicalChannelID=AppConfig.LogicalChannelID(appIdx))</span><br><span class="line"><span class="keyword">else</span></span><br><span class="line">% Add traffic pattern that generates traffic on uplink</span><br><span class="line">addTrafficSource(UEs(AppConfig.RNTI(appIdx)),app,LogicalChannelID=AppConfig.LogicalChannelID(appIdx))</span><br></pre></td></tr></table></figure>

<p>Add the gNB and UE nodes to the network simulator</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">addNodes(networkSimulator,gNB)</span><br><span class="line">addNodes(networkSimulator,UEs)</span><br></pre></td></tr></table></figure>

<p>Use 3GPP TR 38.901 channel model for all links, take a free space path loss model as example</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line">channelModel = <span class="string">&quot;3GPP TR 38.901&quot;</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span> strcmp(channelModel,<span class="string">&quot;3GPP TR 38.901&quot;</span>)</span><br><span class="line">    % Define scenario boundaries</span><br><span class="line">    pos = reshape([gNB.Position UEs.Position],3,[]);</span><br><span class="line">    minX = min(pos(1,:));          % x-coordinate of the left edge of the scenario <span class="keyword">in</span> meters</span><br><span class="line">    minY = min(pos(2,:));          % y-coordinate of the bottom edge of the scenario <span class="keyword">in</span> meters</span><br><span class="line">    width = max(pos(1,:)) - minX;  % Width (right edge of the 2D scenario) <span class="keyword">in</span> meters, given as maxX - minX</span><br><span class="line">    height = max(pos(2,:)) - minY; % Height (top edge of the 2D scenario) <span class="keyword">in</span> meters, given as maxY - minY</span><br><span class="line"></span><br><span class="line">    % Create the channel model</span><br><span class="line">    channel = h38901Channel(Scenario=<span class="string">&quot;UMa&quot;</span>,ScenarioExtents=[minX minY width height]);</span><br><span class="line">    % Add the channel model to the simulator</span><br><span class="line">    addChannelModel(networkSimulator,@channel.channelFunction);</span><br><span class="line">    connectNodes(channel,networkSimulator);</span><br><span class="line">end</span><br></pre></td></tr></table></figure>

<p>Run the simulation for the specified numFrameSimulation frames</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">simulationTime = numFrameSimulation*1e-2;</span><br><span class="line">run(networkSimulator, simulationTime);</span><br><span class="line">% Read per-node statistics</span><br><span class="line">gNBStats = statistics(gNB, <span class="string">&quot;all&quot;</span>);</span><br><span class="line">ueStats = statistics(UEs);</span><br></pre></td></tr></table></figure>

<p>Show prefomrance like throughput and spectral efficiency(UL and DL)</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">displayPerformanceIndicators(metricsVisualizer);</span><br></pre></td></tr></table></figure>

<p>è¾“å‡ºçš„metricVisulaizeré‡Œé¢æœ‰MACTxBytesã€MACRxBytesï¼Œå¯ä»¥ç”¨æ¥è®¡ç®—throughputå’Œdata rateï¼Œéœ€è¦æ³¨æ„çš„æ˜¯MACTxByteså’ŒMACRxByteséƒ½æœ‰ä¸¤åˆ—ï¼Œåˆ†åˆ«å¯¹åº”çš„ULå’ŒDLï¼Œä»¥MACTxBytesä¸ºä¾‹ï¼ŒULä¸€åˆ—å¯¹åº”çš„æ˜¯ueç«¯ï¼Œè€ŒDLä¸€åˆ—åˆ™å¯¹åº”çš„æ˜¯gNBç«¯ï¼Œä¸‹é¢ä»£ç å¯ä»¥ä½è¯</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">txBytes = gNBMACStats(rnti).TransmittedBytes + gNBMACStats(rnti).RetransmissionBytes;</span><br><span class="line">txRate(ueIdx, obj.DownlinkIdx) = (txBytes - obj.MACTxBytes(ueIdx, obj.DownlinkIdx))* 8 / (obj.MetricsStepDuration * 1000); % In Mbps</span><br><span class="line">bufferstatus(ueIdx, obj.DownlinkIdx) = bufferSize(rnti) ./ 1000; % In KB</span><br><span class="line">% Save the previous metrics</span><br><span class="line">obj.MACTxBytes(ueIdx, obj.DownlinkIdx) = txBytes;</span><br></pre></td></tr></table></figure>

<p>æœ‰ç‚¹ç´¯ï¼Œæ€»ä¹‹æ˜å¤©è§</p>

      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="en">
    <link itemprop="mainEntityOfPage" href="https://hechenyi.github.io/2025/04/24/%E9%9A%8F%E7%AC%94/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="John Doe">
      <meta itemprop="description" content="">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Hexo">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/2025/04/24/%E9%9A%8F%E7%AC%94/" class="post-title-link" itemprop="url">éšç¬”</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">Posted on</span>

              <time title="Created: 2025-04-24 22:32:31" itemprop="dateCreated datePublished" datetime="2025-04-24T22:32:31+08:00">2025-04-24</time>
            </span>
              <span class="post-meta-item">
                <span class="post-meta-item-icon">
                  <i class="far fa-calendar-check"></i>
                </span>
                <span class="post-meta-item-text">Edited on</span>
                <time title="Modified: 2025-08-01 00:17:42" itemprop="dateModified" datetime="2025-08-01T00:17:42+08:00">2025-08-01</time>
              </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      
          <p>It did not take evil to produce evil.</p>
<p>ä½ è¦æ˜¯æ²¡æœ‰ç¢°åˆ°é‚£ä¸ªåäº‹ï¼Œä½ å°±å­¦ä¸åˆ°å¯¹ä»˜é‚£ä¸ªåäº‹çš„æœ¬äº‹ï¼Œæ‰€ä»¥è‰°éš¾å›°è‹¦èƒ½ä½¿æˆ‘ä»¬çš„äº‹ä¸šæˆåŠŸ</p>
<p>åœ¨å±é™©ç¯å¢ƒä¸­è¡¨ç¤ºç»æœ›çš„äººï¼Œåœ¨é»‘æš—ä¸­çœ‹ä¸è§å…‰æ˜çš„äººï¼Œåªæ˜¯æ‡¦å¤«ä¸æœºä¼šä¸»ä¹‰è€…  </p>
<p>æœ‰åˆ©çš„æ¡ä»¶å’Œä¸»åŠ¨çš„æ¢å¤ï¼Œäº§ç”Ÿäºå†åšæŒä¸€ä¸‹çš„åŠªåŠ›ä¹‹ä¸­  </p>
<p>æ³±æ³±åå¤ï¼Œä¸€æ’‡ä¸€æºçš†æ˜¯è„Šæ¢<br>ç¥å·å¤§åœ°ï¼Œä¸€ä¸ä¸€å¿µçš†æ˜¯æœªæ¥<br>æµ©æµ©ä¹å·ï¼Œä¸€æ–‡ä¸€å¢¨å‡æ˜¯éª„é˜³</p>
<p>åœ¨åšå†°è¿˜ç›–ç€åŒ—æµ·çš„æ—¶å€™ï¼Œæˆ‘çœ‹åˆ°äº†æ€’æ”¾çš„æ¢…èŠ±  </p>
<p>æ”¿æ²»è¶Šæ”¹è¿›ï¼ŒæŠ—æˆ˜è¶Šèƒ½åšæŒï¼›æŠ—æˆ˜è¶ŠåšæŒï¼Œæ”¿æ²»å°±è¶Šèƒ½æ”¹è¿›ã€‚æŠ—æˆ˜çš„ç»éªŒå·²ç»è¯æ˜ï¼Œåä¸ªæœˆçš„ä¸­å›½äººæ°‘çš„è¿›æ­¥æŠµå¾—ä¸Šè¿‡å»å¤šå°‘å¹´çš„è¿›æ­¥ã€‚</p>
<p>A person with a similar soul is like gift.</p>
<p>è¯»ä¸‡å·ä¹¦è¡Œä¸‡é‡Œè·¯ï¼Œèƒ¸ä¸­è„±å»å°˜åŸƒã€‚ </p>
<p>æœ‰ä¸€ä¸ªå–œæ¬¢çš„äººçœŸçš„å¤ªé‡è¦äº†ï¼Œåœ¨ä½ æ‰“ç®—ç¨€é‡Œç³Šæ¶‚è¿‡è¿™æ™®æ™®é€šé€šä¸€ç”Ÿçš„æ—¶å€™ï¼Œä¼šå› ä¸ºå¯¹æ–¹è€Œå†æƒ³è¦åŠªåŠ›ä¸€ä¸‹ï¼Œåœ¨é‚£ä¹ˆå¤šç–²æƒ«ä¸å ªç”šè‡³æŠ¬ä¸èµ·å¤´çš„æ—¥å­é‡Œï¼Œä¼šå› ä¸ºå¯¹æ–¹è€Œè§‰å¾—äººç”Ÿè¿˜æœ‰ç›¼å¤´ã€‚å› ä¸ºæœ‰å¿µæƒ³ï¼Œæ‰æœ‰åŠ¨åŠ›ï¼Œå¯¹ç”Ÿæ´»æ‰ä¼šé‡Šæ”¾æ›´å¤šçƒ­æƒ…ã€‚æ€»ä¹‹å²æœˆæ¼«é•¿ï¼Œç„¶è€Œå€¼å¾—ç­‰å¾…ã€‚  â€“ æ‘ä¸Šæ˜¥æ ‘</p>
<p>çˆ±æƒ…ä¸æ˜¯æ•´å¤©æ— æ‰€äº‹äº‹çš„é»åœ¨ä¸€èµ·</p>
<p>äººæ°‘æ°‘ä¸»ä¸“æ”¿çš„åŸºç¡€æ˜¯å·¥äººé˜¶çº§ã€å†œæ°‘é˜¶çº§å’ŒåŸå¸‚å°èµ„äº§é˜¶çº§çš„è”ç›Ÿï¼Œè€Œä¸»è¦æ˜¯å·¥äººå’Œå†œæ°‘çš„è”ç›Ÿï¼Œå› ä¸ºè¿™ä¸¤ä¸ªé˜¶çº§å äº†ä¸­å›½äººå£çš„ç™¾åˆ†ä¹‹å…«ååˆ°ä¹åã€‚æ¨ç¿»å¸å›½ä¸»ä¹‰å’Œå›½æ°‘å…šååŠ¨æ´¾ï¼Œä¸»è¦æ˜¯è¿™ä¸ªä¸¤ä¸ªé˜¶çº§çš„åŠ›é‡ã€‚ç”±æ–°æ°‘ä¸»ä¸»ä¹‰åˆ°ç¤¾ä¼šä¸»ä¹‰ï¼Œä¸»è¦ä¾é è¿™ä¸¤ä¸ªé˜¶çº§çš„è”ç›Ÿã€‚å­™ä¸­å±±çš„â€œå”¤èµ·æ°‘ä¼—â€â€œæ‰¶åŠ©å†œå·¥â€çš„æ„æ€æ˜¯è¯´å°èµ„äº§é˜¶çº§å’Œæ°‘æ—èµ„äº§é˜¶çº§ã€‚</p>
<p>æˆ‘ä»¬å¿…é¡»å…‹æœè‹¦éš¾ï¼Œæˆ‘ä»¬å¿…é¡»å­¦ä¼šè‡ªå·±ä¸æ‡‚çš„ä¸œè¥¿ã€‚æˆ‘ä»¬å¿…é¡»å‘ä¸€åˆ‡å†…è¡Œçš„äººä»¬ï¼ˆä¸ç®¡ä»€ä¹ˆäººï¼‰å­¦ç»æµå·¥ä½œã€‚æ‹œä»–ä»¬åšè€å¸ˆï¼Œæ­æ­æ•¬æ•¬åœ°å­¦ï¼Œè€è€å®å®åœ°å­¦ã€‚ä¸æ‡‚å°±æ˜¯ä¸æ‡‚ï¼Œä¸è¦è£…æ‡‚ã€‚</p>
<p>life always finds its own way out.</p>
<p>å¥½åƒé‚£æ—¶æˆ‘ä»¬éƒ½åœ¨ï¼Œå½“æ—¶çš„äº‹éƒ½è®°äº†èµ·æ¥ï¼Œæ—¶é—´çœŸçš„åƒæ˜¯é•¿äº†è„šçš„å¦–æ€ªï¼Œè·‘çš„é£å¿«ã€‚<br>å¾€äº‹åªæ˜¯å†°å†·å†·çš„è¿‡å¾€ï¼Œåªæ˜¯å› ä¸ºäººçš„åˆ°æ¥è€Œå˜çš„æ¸©æš–ã€‚</p>
<p>æˆ‘å’Œä½ æŠ•ç¼˜ï¼Œä½ å’Œæˆ‘åŒé¢‘ï¼Œæˆ‘ä»¬ä¿©å°±è¿™æ ·åœ¨ä¸€èµ·å§</p>
<p>å§‹äºé¢œå€¼ï¼Œæ•¬äºæ‰åï¼Œåˆäºæ€§æ ¼ï¼Œä¹…äºå–„è‰¯ï¼Œç»ˆäºäººå“<br>å’Œæ¼‚äº®çš„äººåœ¨ä¸€èµ·ï¼Œä¼šè¶Šæ¥è¶Šç¾ï¼Œå’Œé˜³å…‰çš„äººåœ¨ä¸€èµ·ï¼Œå¿ƒé‡Œå°±ä¼šå¾ˆé˜³å…‰ï¼Œå’Œå¿«ä¹çš„äººåœ¨ä¸€èµ·ï¼Œå˜´è§’å°±å¸¸å¸¦å¾®ç¬‘ï¼Œå’Œèªæ˜çš„äººåœ¨ä¸€èµ·ï¼Œåšäº‹å°±å˜æœºæ•ï¼Œå’Œå¤§æ–¹çš„äººåœ¨ä¸€èµ·ï¼Œå‡ºäº‹å°±ä¸å°æ°”ï¼Œå’Œç¿æ™ºçš„äººåœ¨ä¸€èµ·ï¼Œé‡äº‹å°±ä¸è¿·èŒ«ã€‚<br>è€Œä½ ï¼Œæ¼‚äº®é˜³å…‰å¿«ä¹èªæ˜å¤§æ–¹ç¿æ™ºï¼Œå¤«æ¬²ä½•æ±‚ã€‚</p>
<p>ä¸€ä¸ªäººçœŸæ­£å€¼å¾—ç‚«è€€çš„ä¸œè¥¿ï¼Œæ˜¯å–„è‰¯ï¼Œæ˜¯æ•™å…»ï¼Œæ˜¯åŒ…å®¹ã€‚æ˜¯è§è¿‡ä¸–é¢çš„æ¶µå…»ï¼Œå‘é˜³è€Œç”Ÿï¼ŒåŠªåŠ›å‘ä¸Šï¼Œåšä¸€ä¸ªæ¸©æš–çš„äººã€‚ </p>
<p>æœ¬è´¨æ˜¯åœ¨å¤±å»åæ˜¾ç°</p>
<p>äº«å—é˜³å…‰ï¼Œä¿è¯ä¼‘æ¯ï¼ŒåšæŒé”»ç‚¼ï¼Œå¥åº·é¥®é£Ÿï¼Œå¼ºå¤§è‡ªä¿¡ï¼ŒçœŸå¿ƒçš„æœ‹å‹</p>
<p>åšæŒåŸåˆ™çš„ä½ ï¼Œè¢«è¯´å›ºæ‰§ï¼›æ¨é™ˆå‡ºæ–°çš„ä½ ï¼Œè¢«æŒ‡æ¿€è¿›ã€‚<br>æ”¹å˜ä¸–ç•Œçš„äººï¼Œä¸éœ€è¦æŒå£°é“ºè·¯ï¼›é‚£äº›æ’¼åŠ¨æ—¶ä»£çš„ç†æƒ³ï¼Œå¾€å¾€å…ˆæŠŠè‡ªå·±æ´»æˆç«ç‚¬ã€‚<br>èŠ±ä¸è¯­ï¼Œ<br>è·ªç€æŠŠç†æƒ³æ‚çƒ­çš„äººï¼Œç«™ç€çœ‹çš„ä¸–ç•Œæ›´è¾½é˜”</p>
<p>If your feelings are still what they were last April, tell me so at once, my affections and wishes have not changed.</p>
<p>Dear Cecilia, the story can resume.  </p>
<p>Do not go gentle into that good night. Old age should burn and rave at close of day. Rage, rage against the dying light.</p>
<p>So do you want to take a leap of faith, or become an old man, filled with regret waiting to die alone?</p>
<p>åˆ†äº«æ¬²æ˜¯é å›åº”æ¥å»¶ç»­çš„ï¼Œçƒ­æƒ…ä¹Ÿæ˜¯</p>
<p>ç¤¾ä¼šå½¢æ€çš„è½¬å˜éœ€è¦æ—¶é—´ï¼Œè€Œåœ¨ä¸€ä¸ªå†å²è§’åº¦ä¸Šå¾ˆçŸ­ç¯‡å¹…çš„è½¬å˜æ—¶é—´ï¼Œè½åœ¨ä¸€ä»£äººèº«ä¸Šå°±æ˜¯ä»–ä»¬çš„ä¸€èº«</p>
<p>ä½†æˆ‘æ‰€è¯´çš„ä¸­å›½é©å‘½é«˜æ½®å¿«è¦åˆ°æ¥ï¼Œå†³ä¸æ˜¯å¦‚æœ‰äº›äººæ‰€è°“â€œæœ‰åˆ°æ¥ä¹‹å¯èƒ½â€é‚£æ ·å®Œå…¨æ²¡æœ‰è¡ŒåŠ¨æ„ä¹‰çš„ã€å¯æœ›è€Œä¸å¯å³çš„ä¸€ç§ç©ºçš„ä¸œè¥¿ã€‚å®ƒæ˜¯ç«™åœ¨æµ·å²¸é¥æœ›æµ·ä¸­å·²ç»çœ‹å¾—è§æ¡…æ†å°–å¤´äº†çš„ä¸€åªèˆªèˆ¹ï¼Œå®ƒæ˜¯ç«‹äºé«˜å±±ä¹‹å·…è¿œçœ‹ä¸œæ–¹å·²è§å…‰èŠ’å››å°„å–·è–„æ¬²å‡ºçš„ä¸€è½®æœæ—¥ï¼Œå®ƒæ˜¯èºåŠ¨äºæ¯è…¹ä¸­çš„å¿«è¦æˆç†Ÿäº†çš„ä¸€ä¸ªå©´å„¿ã€‚</p>
<p>å¤©åœ¨å°†é»‘æœªé»‘æ—¶æœ€ç¾ï¼Œçˆ±åœ¨å°†çˆ±æœªçˆ±æ—¶æœ€è¿·äºº</p>
<p>åªæœ‰çŸ¥é“äº†ä¹¦çš„ç»“å°¾ï¼Œæ‰ä¼šæ˜ç™½ä¹¦çš„å¼€å¤´ã€‚å¯æ­£åœ¨é˜…è¯»å¼€å¤´ä¹‹æ—¶åˆæ€çŸ¥æ•…äº‹ç»“å°¾</p>
<p>æ¯æœ¨ä¼šé€¢æ˜¥</p>
<p>ä½†æ˜¯å¤ªé˜³ï¼Œå®ƒæ¯æ—¶æ¯åˆ»éƒ½æ˜¯å¤•é˜³ä¹Ÿéƒ½æ˜¯æ—­æ—¥ã€‚å½“å®ƒç†„ç­ç€èµ°ä¸‹å±±å»æ”¶å°½è‹å‡‰æ®‹ç…§ä¹‹é™…ï¼Œæ­£æ˜¯å®ƒåœ¨å¦ä¸€é¢ç‡ƒçƒ§ç€çˆ¬ä¸Šå±±å·…å¸ƒæ»¡çƒˆçƒˆæœæ™–ä¹‹æ—¶ã€‚</p>
<p>æ—¶é—´å¯ä»¥åå™¬ä¸€åˆ‡ï¼Œä½†å®ƒä¸æ¯«ä¸èƒ½å‡å°‘çš„æ˜¯ä½ ä¼Ÿå¤§çš„æ€æƒ³ï¼Œä½ çš„å¹½é»˜ï¼Œä½ çš„å–„è‰¯ï¼Œè¿˜æœ‰ä½ çš„å‹‡æ°”ã€‚</p>
<p>æˆ‘ä»¬å¹¶ä¸æ˜¯ç”Ÿæ´»åœ¨åœŸåœ°ä¸Šï¼Œäº‹å®ä¸Šæˆ‘ä»¬ç”Ÿæ´»åœ¨æ—¶é—´é‡Œã€‚ç”°é‡ã€è¡—é“ã€æ²³æµã€æˆ¿å±‹æ˜¯æˆ‘ä»¬ç½®èº«åº¦å¤–æ—¶é—´ä¹‹ä¸­çš„ä¼™ä¼´ã€‚æ—¶é—´å°†æˆ‘ä»¬æ¨ç§»å‘å‰æˆ–å‘åï¼Œå¹¶æ”¹å˜è¿™æˆ‘ä»¬çš„æ¨¡æ ·</p>
<p>èŠ‚çœæ¯ä¸€ä¸ªé“œæ¿ä¸ºç€æˆ˜äº‰å’Œé©å‘½äº‹ä¸šï¼Œä¸ºç€æˆ‘ä»¬çš„ç»æµå»ºè®¾ï¼Œæ˜¯æˆ‘ä»¬çš„ä¼šè®¡åˆ¶åº¦çš„åŸåˆ™ã€‚</p>
<p>å°Šé‡ï¼Œæ˜¯ä¸€ç§è¢«æ•™è‚²å‡ºæ¥çš„æµªæ¼«ï¼Œç©¿ä¸Šå®ƒæ˜¯è£è€€ï¼Œé“ºä¸‹æ¥æ˜¯æ•¬é‡ï¼Œå¤§å­¦æ˜¯æ–‡æ˜çš„ç¯å¡”ï¼Œä¹Ÿæ˜¯äººæ€§çš„ç†”ç‚‰ã€‚åœ¨æ¯•ä¸šå…¸ç¤¼çš„äººæ½®ä¸­å›æœ›ï¼Œæ‰ä¼šæ˜ç™½è¿™æ–¹å¤©åœ°æœ€çè´µçš„ä»ä¸æ˜¯æ–‡å‡­ï¼Œè€Œæ˜¯ä»–æ…·æ…¨èµ äºˆæ¯ä¸ªé—¯å…¥è€…çš„ç¤¼ç‰©ã€‚<br>æ°¸è¿œå¯¹æœªçŸ¥ä¿æŒæœ€è°¦å‘çš„çƒ­æœ›ï¼Œè¿™ä¸ä»…æ˜¯äººç±»æ–‡æ˜çš„ä¿é™©æŸœï¼Œæ”¾ç€åƒå¹´æ™ºæ…§çš„ç»“æ™¶ï¼Œæ›´æ˜¯æœªæ¥çš„å­µåŒ–å™¨ï¼Œè„šè¸å…ˆè¾ˆè„Šæ¢ï¼Œè§¦ç¢°æ›´è€€çœ¼çš„å…‰èŠ’ã€‚</p>
<p>æ˜¥åç§‹å®ï¼Œç”Ÿå‘½çš„æ„ä¹‰å°±åœ¨äºå®ƒçš„æ— æ„ä¹‰ï¼ŒèŠ±æµ·ç››å¼€çš„ç’€ç’¨ï¼Œç‡•å­å½’æ¥çš„å®‰å¿ƒï¼Œæœ‰é—ªå…‰å°±ä¼šæœ‰å è½çš„å¿…ç»ä¹‹è·¯ï¼ŒåŸå”±å£°å£°ï¼Œåƒæ˜¯ä¸€å¥å¥å‘¼å”¤ï¼Œå‘¼å”¤é—è½åœ¨è¿œæ–¹çš„äººçš„å¿ƒã€‚æƒ…ç»ªçš„è’å²›ä¸€å®šä¼šç”Ÿå‡ºç¿çƒ‚çš„ç«ç‘°ï¼Œåœ¨æ¸©æ¶¦æœ‰åŠ›åˆæå…·æ•…äº‹æ„Ÿçš„å£°éŸ³é‡Œï¼Œæ„Ÿå—åˆ°äº†åšå®šå­˜åœ¨çš„ä¿¡å¿µï¼Œåœ¨æµ©ç€šæ˜Ÿè¾°é‡Œçœ‹åˆ°å¹³å‡¡ç”Ÿæ´»é‡Œçš„é—ªå…‰ã€‚</p>
<p>å¦‚æœä½ ç«™åœ¨ç«¥å¹´çš„ä½ç½®ï¼Œå±•æœ›æœªæ¥ï¼Œä½ ä¼šè¯´å‰é€”æ— é‡ï¼Œä½†æ˜¯ä½ å¦‚æœç«™åœ¨ç»ˆç‚¹çœ‹ç”Ÿå‘½çš„è½¨è¿¹ï¼Œä½ å°±åªèƒ½çœ‹åˆ°ä¸€æ¡å‘½è¿ä¹‹è·¯ã€‚ä½ ä¸çŸ¥é“å‘½è¿æ˜¯ä»€ä¹ˆï¼Œæ‰çŸ¥é“ä»€ä¹ˆæ˜¯å‘½è¿ï¼Œæ‰€ä»¥å¾ˆå¤šäººå£ä¸­è¯´çš„ï¼Œçœ‹ä¸åˆ°å­©å­çš„æœªæ¥ï¼Œå…¶å®æ˜¯çœ‹åˆ°äº†æœªæ¥ï¼Œäººç”Ÿå”¯ä¸€çš„ç¡®å®šæ€§ï¼Œå°±æ˜¯ä¸ç¡®å®šã€‚æ‰€ä»¥å¤§èƒ†çš„è®©å­©å­å»åšä»–æƒ³åšçš„ä»»ä½•äº‹æƒ…ï¼Œä»»ä½•ç¾å¥½çš„äº‹æƒ…ï¼Œæ´»åœ¨å½“ä¸‹ï¼ŒæŠ“ä½ä¸€åˆ‡çš„ç¾å¥½ã€‚</p>
<p>æˆ‘ç«™åœ¨ä»Šå¤©è®¾æƒ³è¿‡å»åˆå¹»æƒ³æœªæ¥ï¼Œè¿‡å»å’Œæœªæ¥åœ¨ä»Šå¤©éšæ„äº¤å‰ï¼Œå› è€Œè¿‡å»å’Œæœªæ¥éƒ½åˆ®ç€ç°åœ¨çš„é£ã€‚</p>
<p>æ—¶é—´æ˜¯ä¸ªæ€ªç‰©ï¼Œæœ€ä»¤äººä¸è§£çš„è¿·ï¼ŒåŒæ—¶æ—¶é—´åˆæ˜¯é•¿äº†è„šçš„å¦–æ€ªï¼Œè·‘çš„é£å¿«ã€‚</p>
<p>è«é€†ä¹‹äº¤</p>
<p>æˆ‘åœ¨æ„Ÿæƒ…ä¸Šçš„æ„šé’å°±åƒæ˜¯é—¨çª—ç´§é—­çš„å±‹å­ï¼Œè™½ç„¶çˆ±æƒ…çš„è„šæ­¥åœ¨å±‹å‰èµ°è¿‡å»åˆèµ°è¿‡æ¥ï¼Œæˆ‘ä¹Ÿå¬åˆ°äº†ï¼Œå¯æ˜¯æˆ‘è§‰å¾—é‚£æ˜¯è·¯è¿‡çš„è„šæ­¥ï¼Œé‚£æ˜¯èµ°å‘åˆ«äººçš„è„šæ­¥ã€‚ç›´åˆ°æœ‰ä¸€å¤©ï¼Œè¿™ä¸ªè„šæ­¥åœç•™åœ¨è¿™é‡Œï¼Œç„¶åé—¨é“ƒå“äº†ã€‚</p>
<p>ä»»ä½•å½±å“ï¼Œåªä¼šè®©ä¸€ä¸ªäººå˜å¾—è¶Šæ¥è¶Šåƒä»–è‡ªå·±ï¼Œè€Œä¸ä¼šåƒåˆ«äººï¼Œè¿™å°±æ˜¯é˜…è¯»å’Œå­¦ä¹ çˆ±ç»™æˆ‘ä»¬æœ€å¥½çš„ä¸€ä¸ªä½“ä¼šã€‚</p>
<p>ç¯å¢ƒä¸èƒ½å½±å“ä¸€ä¸ªäººï¼Œè€Œæ˜¯æ­ç¤ºä¸€ä¸ªäºº</p>
<p>But poetry, beauty, romance, love â€¦ these are what we stay alive for.</p>
<p>ç”Ÿæ´»çš„æ„ä¹‰åœ¨äºç‹¬ç«‹è‡ªæˆ‘ï¼Œæ•™è‚²çš„æœ¬è´¨åœ¨äºç‹¬ç«‹æ€è€ƒã€‚ä»è€å¸ˆçš„è§’åº¦æ¥è¯´å…ˆä¼ é“åæœ‰æˆä¸šè§£æƒ‘ï¼Œè€Œä»å­¦ç”Ÿçš„è§’åº¦å‡ºå‘è¡Œæœ‰ä½™åŠ›åˆ™ä»¥å­¦æ–‡ï¼Œæ•™è‚²å¾€å¾€ä¸å¿…å°†å­¦ä¹ ç›´è‡³é¦–ä½ï¼Œç²¾ç¥çš„å»ºç«‹ï¼Œæ€æƒ³çš„å¡‘é€ ï¼Œæ‰æ˜¯çœŸæ­£çš„é‡è¦ã€‚</p>
<p>è¢«åŠ¨å’Œé€ƒé¿æ€»æ˜¯å¾ˆå®¹æ˜“è®©äººé”™å¤±é‚£äº›ç¾å¥½ï¼Œè€Œåªæœ‰æ‡‚å¾—äº†çœŸæ­£çš„å‹‡æ•¢å’ŒçœŸæ­£çš„é‡Šæ€€ï¼Œç”Ÿè€…æ‰å¯ä»¥æ›´å¥½åœ°ç”Ÿï¼Œæ­»äº¡æ‰èƒ½ä¸æˆä¸ºä¼¤ç–¤ï¼Œè€Œæˆä¸ºé‡Šæ€€çš„è®°å¿†ã€‚</p>
<p>å¹¶æœªåœ¨ä¸€èµ·äº¦æ— ä»ç¦»å¼ƒ<br>ä¸ç”¨æ²¦ä¸ºä¼´ä¾£åˆ«å¯»æ˜¯æƒ¹é<br>å°±åƒè´æ‹èŠ±åæ— å‡­æ— æ®<br>äº²å¯†ç»´æŒåç§’åˆéšä¼´è¿œé£</p>
<p>æ›¾è°ˆæƒ…åˆ°å¤©äº®</p>
<p>â€œI know of no better life purpose than to perish in attempting the great and the impossibleâ€¦â€ â€‰â€”â€‰ Nietzsche, 1873.</p>
<p>ç”Ÿå‘½å°±åƒæ˜¯ä¸€ä¸ªç–—ä¼¤çš„è¿‡ç¨‹ï¼Œæˆ‘ä»¬å—ä¼¤ï¼Œç—Šæ„ˆï¼Œå†å—ä¼¤ã€‚æ¯ä¸€æ¬¡çš„ç—Šæ„ˆå¥½åƒéƒ½æ˜¯ä¸ºäº†è¿æ¥ä¸‹ä¸€æ¬¡çš„å—ä¼¤ã€‚æˆ–è®¸æ€»è¦å½»å½»åº•åº•çš„ç»æœ›ä¸€æ¬¡ï¼Œæ‰èƒ½é‡æ–°å†æ´»ä¸€æ¬¡ã€‚</p>
<p>å¤§æ±Ÿæ­Œç½¢æ‰å¤´ä¸œï¼Œé‚ƒå¯†ç¾¤ç§‘æµä¸–ç©·ã€‚<br>é¢å£åå¹´å›¾ç ´å£ï¼Œéš¾é…¬è¹ˆæµ·äº¦è‹±é›„ã€‚</p>
<p>æ— ç”±è§é¢œè‰²ï¼Œè¿˜è‡ªæ‰˜å¾®æ³¢</p>
<p>æ— è®ºæµ·è§’ä¸å¤©æ¶¯ï¼Œå¤§æŠµå¿ƒå®‰å³æ˜¯å®¶</p>
<p>ä¸€ä¸ªçœŸæ­£çš„å¼ºè€…ï¼Œåœ¨é¢å¯¹ç€éå¸¸ä¸¥å³»çš„å½¢åŠ¿ï¼Œé¢å¯¹ç€å‘½è¿çš„æŠ˜ç£¨çš„æ—¶å€™ï¼Œä»–ä»¬èƒ½å¤ŸæŒ½æ•‘è‡ªå·±ï¼Œä»–ä»¬æœ‰åšå¼ºçš„ç¥ç»ï¼Œé’¢é“ä¸€èˆ¬çš„æ„å¿—ã€‚</p>
<p>å½’æ¢¦ç¢§çº±çª—ï¼Œè¯´ä¸äººäººé“</p>
<p>ç§€è‰²ç©ºç»ä¸–ï¼Œé¦¨é¦™ä¸ºè°ä¼ </p>
<p>This is the dream! It is conflict and it is compromise, and it is very, very exciting!</p>
<p>â€œä½™è‡´åŠ›å›½æ°‘é©å‘½å‡¡å››åå¹´ï¼Œå…¶ç›®çš„åœ¨æ±‚ä¸­å›½ä¹‹è‡ªç”±å¹³ç­‰ã€‚ç§¯å››åå¹´ä¹‹ç»éªŒï¼Œæ·±çŸ¥æ¬²è¾¾åˆ°æ­¤ç›®çš„ï¼Œå¿…é¡»å”¤èµ·æ°‘ä¼—åŠè”åˆä¸–ç•Œä¸Šä»¥å¹³ç­‰å¾…æˆ‘ä¹‹æ°‘æ—å…±åŒå¥‹æ–—â€ â€“ å­™ä¸­å±±</p>
<p>è‡ªä¸»çš„ï¼Œè€Œéå¥´éš¶çš„ã€‚<br>è¿›æ­¥çš„ï¼Œè€Œéä¿å®ˆçš„<br>è¿›å–çš„ï¼Œè€Œéé€€éšçš„<br>ä¸–ç•Œçš„ï¼Œè€Œéé”å›½çš„<br>å®åˆ©çš„ï¼Œè€Œéè™šæ–‡çš„<br>ç§‘å­¦çš„ï¼Œè€Œéæƒ³è±¡çš„<br>å¥å£®çš„ï¼Œè€Œéä½“å¼±çš„</p>
<p>é‚£ä¸ªä¸ºä¸­åä¹‹å´›èµ·è€Œè¯»ä¹¦ï¼Œå…¨æ°‘è®¨è®ºä¸­å›½å¾€ä½•å¤„å»çš„å†å²æ˜¯<strong>çœŸå®å­˜åœ¨</strong>çš„ï¼Œç”šè‡³å¾ˆéš¾ç›¸ä¿¡ï¼Œåœ¨é‚£è‹¦éš¾çš„å¹´ä»£ï¼Œè®¤çœŸç«Ÿæ˜¯è¢«å¤§å®¶æ‰€æ¨å´‡çš„ï¼Œç†æ€§çš„äº‰è®ºç«Ÿç„¶æ˜¯å¯ä»¥å®ç°çš„ã€‚åœ¨è¿™æ ·çš„å›½åœŸä¸Šï¼ŒçœŸçš„æœ‰è¿™æ ·ä¸€ç¾¤äººï¼Œä¸€ç§ç”Ÿæ´»æ–¹å¼ï¼Œä»–ä»¬èƒ½ä¸ºäº†å›½å®¶ä»˜å‡ºï¼Œä¸ºäº†ç†æƒ³å¥‹æ–—ï¼Œè€Œä¸ä»…ä»…åªæ˜¯å…³æ³¨è‡ªå·±åŸºé‡‘çš„æ¶¨è·Œï¼Œè„¸ä¸Šç—˜ç—˜çš„å¤šå°‘ï¼Œåˆæˆ–è€…æ–°å‘çš„æœ‹å‹åœˆæœ‰å¤šå°‘äººç‚¹èµã€‚æ€»ä¹‹ï¼Œç†æƒ³å¯ä»¥ä»¥çœŸå®çš„å½¢å¼å­˜åœ¨ã€‚</p>
<p>é†’æ—¶åŒäº¤æ¬¢ï¼Œé†‰åå„åˆ†ç¦»</p>
<p>ç†æ€§è®¤è¯†ä¾èµ–äºæ„Ÿæ€§è®¤è¯†ï¼Œç†æ€§çš„ä¸œè¥¿æ‰€ä»¥é å¾—ä½ï¼Œæ­£æ˜¯ç”±äºå®ƒæ¥æºäºæ„Ÿæ€§ï¼Œå¦åˆ™ç†æ€§çš„ä¸œè¥¿å°±æˆäº†æ— æºä¹‹æ°´ï¼Œæ— æœ¨ä¹‹æœ¬ï¼Œè€Œåªæ˜¯ä¸»è§‚è‡ªç”Ÿçš„é ä¸ä½çš„ä¸œè¥¿äº†ã€‚æ­¤å¤–ï¼Œä¹Ÿï¼Œè®¤è¯†æœ‰å¾…äºæ·±åŒ–å°±æ˜¯è¯´è®¤è¯†ä¸èƒ½åªåœé¡¿åœ¨ä½çº§çš„æ„Ÿæ€§é˜¶æ®µï¼Œå¦åˆ™å°±æˆäº†â€œç»éªŒè®ºâ€çš„é”™è¯¯ï¼Œå› è€Œä¸èƒ½é€šè§‚å®¢è§‚è¿‡ç¨‹çš„å…¨ä½“ï¼Œä¹Ÿç§°ä¸ºåº¸ä¿—çš„äº‹åŠ¡ä¸»ä¹‰å®¶ã€‚ç†æ€§è®¤è¯†ä¹‹åéœ€è¡ŒåŠ¨èµ·æ¥ï¼Œåœ¨æ‡‚å¾—äº†å®¢è§‚ä¸–ç•Œçš„è§„å¾‹æ€§åéœ€è¦å»è§£é‡Šä¸–ç•Œï¼Œä¹Ÿå°±æ˜¯æ‹¿äº†è¿™ç§å¯¹äºå®¢è§‚è§„å¾‹æ€§çš„è®¤è¯†å»èƒ½åŠ¨åœ°æ”¹é€ ä¸–ç•Œï¼Œä¹Ÿå¯ç§°ä¹‹ä¸ºæ”¹é€ ä¸–ç•Œçš„å®è·µè¿‡ç¨‹ã€‚æ€»çš„æ¥è¯´ï¼Œé€šè¿‡å®è·µè€Œå‘ç°çœŸç†ï¼Œåˆé€šè¿‡å®è·µè€Œè¯å®çœŸç†å’Œå‘å±•çœŸç†ã€‚ä»æ„Ÿæ€§è®¤è¯†è€Œèƒ½åŠ¨åœ°å‘å±•åˆ°ç†æ€§è®¤è¯†ï¼Œåˆä»ç†æ€§è®¤è¯†è€Œèƒ½åŠ¨åœ°æŒ‡å¯¼é©å‘½å®è·µï¼Œæ”¹é€ ä¸»è§‚ä¸–ç•Œå’Œå®¢è§‚ä¸–ç•Œã€‚è¿™å°±æ˜¯è¾©è¯å”¯ç‰©è®ºçš„çŸ¥è¡Œç»Ÿä¸€è§‚ã€‚</p>
<p>å¯†åˆ‡è”ç³»äººæ°‘ç¾¤ä¼—ï¼Œæ´æ‚‰ç¤¾ä¼šå¼Šç—…çš„äººï¼Œç„¶åå°†åŸºäºæ­¤å½¢æˆçš„ç†æ€§è®¤è¯†ï¼Œå¹¶æŠ•å…¥æ”¹é€ ä¸–ç•Œçš„å®è·µè¿‡ç¨‹çš„äººï¼Œå¯ç§°ä¸ºå…ˆç”Ÿã€‚è€Œå¤§å¤šæ˜¯çš„äººåªäº†è§£å°‘æ•°ç²¾è‹±é˜¶å±‚ï¼Œè€Œå¿½è§†åº•å±‚çš„å¤§å¤šæ•°ã€‚</p>
<p>ä¸­å›½äººçš„æ€§æ ¼å’Œä¸­å›½æ–‡æ˜çš„ä¸‰å¤§ç‰¹å¾ï¼Œæ­£æ˜¯æ·±æ²‰ï¼Œåšå¤§å’Œæ·³æœ´ï¼Œæ­¤å¤–è¿˜æœ‰çµæ•<br>â€”â€” è¾œé¸¿é“­ã€Šä¸­å›½äººçš„ç²¾ç¥ã€‹</p>
<p>çœŸæ­£çš„å¹³ç­‰ï¼Œæ„å‘³ç€ä¸€è§†åŒä»ï¼Œé—¨æˆ·å¼€æ”¾ï¼Œæœ‰æ•™æ— ç±»ï¼Œæˆ–åƒä¼Ÿå¤§çš„æ‹¿ç ´ä»‘æ‰€è¡¨è¿°çš„äººå°½å…¶æ‰ï¼Œè€Œä¸æ˜¯å°†ç¬¨è›‹ä¸éç¬¨è›‹çš„å¤´è„‘å¼„å¹³ï¼Œä½¿å›½å®¶ä¸­æœ€å¥½ä¹‹äººä¸æœ€å·®ä¹‹äººä¸€æ ·å·®çš„ç»å¯¹å¹³ç­‰ï¼›çœŸæ­£çš„è‡ªç”±ï¼Œå¹¶ä¸æ„å‘³ç€å¯ä»¥éšå¿ƒæ‰€æ¬²ï¼Œè€Œæ˜¯å¯ä»¥è‡ªç”±åœ°åšæ­£ç¡®çš„äº‹æƒ…ï¼Œå³ä¸­å›½ç»ä¹¦ä¸­æ‰€è°“ç‡æ€§ä¹‹è°“é“ã€‚çœŸæ­£çš„æ°‘ä¸»ï¼Œæ˜¯æŒ‡æ•å¼€çš„å¤§é—¨ï¼Œæ²¡æœ‰å‡ºèº«ã€åœ°ä½å’Œç§æ—ä¹‹åˆ«ï¼Œè€Œä¸æ˜¯æŒ‡æ²¡æœ‰å›ã€ç‹æƒï¼Œæ›´ä¸æ˜¯æŒ‡åº¶æ°‘è®®æ”¿ã€‚å¤§å¤šæ•°æ°¸è¿œæ˜¯ä¸å¥½çš„ï¼Œä»–ä»¬ä¸å…·å¤‡å‚æ”¿è®®æ”¿çš„èƒ½åŠ›ã€‚è¿‘ä»£è¥¿æ–¹ç”±å¤§å¤šæ•°äººæ¥å‚ä¸å’Œæ”¯é…æ”¿æ²»çš„è§‚å¿µä¸ºç¾¤æ°“å´‡æ‹œï¼Œå®ƒæ˜¯éç†æ€§æ°‘ä¸»æ”¿æ²»çš„æ¥æºï¼Œæ˜¯æ¬§ç¾è¿‘æ¥æ‰€æœ‰ç¤¾ä¼šã€æ”¿æ²»å’Œä¸–ç•Œæ— æ”¿åºœçŠ¶æ€çš„æ ¹æºï¼Œä¹Ÿæ˜¯å¯¼è‡´æ¬§æ´²å¤§æˆ˜çš„éç›´æ¥åŸå› ã€‚</p>
<p>ä¸è§‰ç¢§å±±æš®ï¼Œç§‹äº‘æš—å‡ é‡</p>
<p>ä½ ç»ˆä¼šæ˜ç™½å‰é€”æ¯”çˆ±æƒ…é‡è¦ï¼Œä½ è¿˜ä¼šæ˜ç™½çˆ±æƒ…æ¯”å‰é€”æ›´éš¾å¾—ï¼Œä½†æœ€åä½ ä¼šæ˜ç™½ï¼Œå¯¹çš„äººï¼Œä¼šç«™åœ¨ä½ çš„å‰é€”é‡Œã€‚</p>
<p>ä¸å¿…å¬è‡ªæš´è‡ªå¼ƒè€…æµçš„è¯ï¼Œåªæ˜¯å‘ä¸Šèµ°ã€‚ä¸å¿…ç­‰å¾…ç‚¬ç«ï¼Œæ­¤åå¦‚ç«Ÿæ²¡æœ‰ç‚¬ç«ï¼Œæˆ‘ä¾¿æ˜¯å”¯ä¸€çš„å…‰</p>
<p>çŠ¹è®°ç¢§æ¡ƒå½±é‡Œï¼Œèª“ä¸‰ç”Ÿã€‚</p>
<p>åƒå¹´å²å†Œè€»æ— åï¼Œä¸€ç‰‡ä¸¹å¿ƒæŠ¥å¤©å­ã€‚</p>
<p>æ¥šè™½ä¸‰æˆ·èƒ½äº¡ç§¦ï¼Œå²‚æœ‰å ‚å ‚ä¸­å›½ç©ºæ— äººï¼</p>
<p>â€œæˆ‘ä¹Ÿæ˜çŸ¥ç™½é©¹è¿‡éš™ï¼Œé€è€…å¦‚æ–¯ï¼Œæœªæ¥å¯èƒ½è®²æ›´æœ‰æ„æ€çš„è¯ï¼Œè‘—æ›´å…¶å®Œç¾çš„æ–‡ï¼Œåšæ›´å…¶å£®ä¸½çš„äº‹ä¸šï¼Œä½†ä»Šå¤©åªæ˜¯ä»Šå¤©ï¼Œæœªæ¥ä¹Ÿåªæ˜¯ä»Šå¤©çš„æœªæ¥ã€‚â€</p>
<p>ä¸€ç‚¹æµ©ç„¶æ°”ï¼Œåƒé‡Œå¿«å“‰é£ã€‚</p>
<p>è¿‡å»éƒ½æ˜¯å‡çš„ï¼Œå›å¿†æ˜¯ä¸€æ¡æ²¡æœ‰å½’é€”çš„è·¯ã€‚è¿‡å»çš„ä¸€åˆ‡æ˜¥å¤©éƒ½ä¸å¤å­˜åœ¨ï¼Œçºµç„¶æœ€ç‹‚çƒ­ã€æœ€åšå®šçš„çˆ±æƒ…ï¼Œå½’æ ¹ç»“åº•ä¸è¿‡æ˜¯ä¸€ç§è½¬ç¬å³é€çš„ç°å®</p>
<p>å¤§å­¦endingï¼Œå…¶å®åœ¨endingå‰ä¹Ÿæ—¶å¸¸ä¼šæ€è€ƒæœ‰ä»€ä¹ˆé—æ†¾çš„äº‹æƒ…ï¼Œæˆ‘æ„Ÿè§‰å¤§å­¦å››å¹´è¿˜æ˜¯å¾ˆå®Œç¾çš„ï¼Œæœ‰åœ¨ä¸ºæˆä¸ºæ›´å¥½çš„è‡ªå·±ä¸æ–­åŠªåŠ›ï¼Œä¹Ÿè®¤è¯†åˆ°äº†å¾ˆå¤šå¾ˆå¥½çš„æœ‹å‹ã€‚ä»¥èµ´å¾·ä¸ºç•Œï¼Œåœ¨åç†è®¤è¯†åˆ°çš„ç­ä¸Šçš„åŒå­¦ã€éš”å£ç­çš„å¾·ç¯åŒå­¦è¿˜æœ‰å­¦å¼Ÿå­¦å¦¹ä»¬ï¼Œåé¢åœ¨å¾·å›½è®¤è¯†åˆ°çš„æ•™ä¼šæœ‹å‹è¿˜æœ‰å¾·å›½æœ‹å‹ã€‚æˆ‘å–œæ¬¢è·Ÿä¼˜ç§€çš„äººäº¤å¾€ï¼Œæ‰€å¹¸çš„æ˜¯å¤§å­¦å››å¹´æˆ‘è®¤è¯†åˆ°çš„äººéƒ½å¾ˆä¼˜ç§€ï¼Œä¹Ÿéƒ½å¾ˆå¯çˆ±ã€‚<br>é‚£ä¹ˆçœŸæ­£é—æ†¾çš„æ˜¯ä»€ä¹ˆï¼Œæ˜¯å› ä¸ºæ°´è¯¾å¯¼è‡´å‡åˆ†0.04çš„åˆ†å·®ä¸å›½å¥–å¤±ä¹‹äº¤è‡‚ï¼Œè¿˜æ˜¯å…­è¿›äº”è¯„é€‰DAADå¥–å­¦é‡‘æˆ‘å´æˆä¸ºäº†é‚£ä¸ªä¸€ã€‚æ„Ÿè§‰éƒ½ä¸æ˜¯ï¼ŒçœŸæ­£çš„é—æ†¾æ˜¯ï¼Œè‹¦äºå­¦ç”Ÿæ€ç»´å¤ªä¹…äº†ï¼Œå¤§ä¸€å¤§äºŒåªçŸ¥å­¦ä¹ è¯¾æœ¬çŸ¥è¯†ï¼Œæ²¿ç”¨åˆé«˜ä¸­çš„how to studyè€Œä»æœªæ€è€ƒè¿‡why to stusyï¼Œè¿™ä¹Ÿå¯¼è‡´äº†ç§‘ç ”ä¸Šæ‰‹çš„å¤ªæ™šäº†ï¼Œä¹Ÿåšçš„ä¸æ¸©ä¸ç«ï¼Œä¸è¿‡è¿˜æ˜¯æ‰¾åˆ°å¹¶ç¡®å®šäº†æ–¹å‘ã€‚å½“ç„¶è¿™ä¹Ÿæ˜¯é—æ†¾ä¹‹ä¸€ï¼Œè¿˜æœ‰å…¶å®æ€§æ ¼ä¸Šè™½ç„¶æ”¹å˜äº†ä¸å°‘ï¼Œæˆ‘å˜å¾—æ›´åŠ ä¸»åŠ¨æ›´åŠ å¼€æœ—äº†ï¼Œä¹Ÿåšåˆ°äº†åŸºæœ¬ä¸Šä¸å‘ç«ä¸è¯´è„è¯ã€‚ä½†æˆ‘çŸ¥é“è¿™è¿˜è¿œè¿œä¸å¤Ÿï¼Œæˆ‘è¿˜éœ€è¦æ›´åŠ é˜³å…‰ç§¯æï¼Œå°‘ä¸€äº›ç„¦èºã€‚<br>æ— è®ºå¦‚ä½•ï¼Œæˆ‘å¾ˆåº†å¹¸ã€å¾ˆæ„Ÿæ¿€è‡ªå·±è¿˜æ˜¯æ›¾ç»é¢„æƒ³çš„æ¨¡æ ·ã€‚æ²¡æœ‰å“ªä¸€å¤©æ˜¯åœ¨æµ‘æµ‘å™©å™©ä¸­åº¦è¿‡çš„ï¼Œåœ¨æ€è€ƒå’Œå›°æƒ‘ä¸­åŠªåŠ›æˆé•¿ã€‚</p>
<p>ç›¸é€¢ä¸€é†‰æ˜¯å‰ç¼˜ï¼Œé£é›¨æ•£ã€é£˜ç„¶ä½•å¤„  </p>
<p>æ±‚ç”°é—®èˆï¼Œæ€•åº”ç¾è§ï¼Œåˆ˜éƒæ‰æ°”ã€‚å¯æƒœæµå¹´ï¼Œå¿§æ„é£é›¨ï¼Œæ ‘çŠ¹å¦‚æ­¤ã€‚  </p>
<p>å› ç¬‘ç‹è°¢è¯¸äººï¼Œç™»é«˜æ€€è¿œï¼Œä¹Ÿå­¦è‹±é›„æ¶•</p>
<p>æ‚Ÿå·²å¾€ä¹‹ä¸è°ï¼ŒçŸ¥æ¥è€…ä¹‹å¯è¿½ã€‚</p>
<p>äºŒåä½™å¹´å¦‚ä¸€æ¢¦ï¼Œæ­¤èº«è™½åœ¨å ªæƒŠ</p>
<p>ä¸€ç‚¹æµ©ç„¶æ°”ï¼Œåƒé‡Œå¿«å“‰é£</p>
<p>å¤ä»Šå¦‚æ¢¦ï¼Œä½•æ›¾æ¢¦è§‰ï¼Œä½†æœ‰æ—§æ¬¢æ–°æ€¨</p>
<p>å¯æƒœä¸€æºªé£æœˆï¼Œè«æ•™è¸ç¢ç¼ç‘¶</p>
<p>ä½ å°±æ˜¯æˆ‘çš„å¤„å¢ƒï¼Œæˆ‘æƒ³é€ƒç¦»è¿™ä¸ªå¤„å¢ƒï¼Œå·²ç»è·‘åˆ°äº†â€œå¯¹è·–ç‚¹â€çš„æ—¶å€™ï¼Œæˆ‘å·²å‘ç°æ— è·¯å¯é€€ã€‚å› ä¸ºå¤šè¿ˆä¸€æ­¥ï¼Œæˆ‘å°±ç¦»æˆ‘çš„å¤„å¢ƒæœ‰å¤šäº†ä¸€æ­¥ã€‚ä½†æ˜¯å¦‚æœèµ°å¿ƒçš„è¯ï¼Œæˆ‘ä»¬æ˜¯æœ€è¿‘çš„ï¼Œä¸èµ°å¿ƒï¼Œå¯èƒ½å°±æ˜¯æœ€è¿œçš„ã€‚</p>
<p>ä¸€ä¸ªäººèƒ½åŠ›æœ‰å¤§å°ï¼Œä½†åªè¦æœ‰è¿™ç‚¹ç²¾ç¥ï¼ˆæ¯«æ— è‡ªç§è‡ªåˆ©ä¹‹å¿ƒçš„ç²¾ç¥ï¼‰ï¼Œå°±æ˜¯ä¸€ä¸ªé«˜å°šçš„äººï¼Œä¸€ä¸ªçº¯ç²¹çš„äººï¼Œä¸€ä¸ªæœ‰é“å¾·çš„äººï¼Œä¸€ä¸ªè„±ç¦»äº†ä½çº§è¶£å‘³çš„äººï¼Œä¸€ä¸ªæœ‰ç›Šäºäººæ°‘çš„äººã€‚</p>
<p>åšå®˜ä¹‹é“ï¼Œå…¶å®å°±ä¸‰å¥è¯ï¼šå’Œå…‰åŒå°˜ï¼Œé›¨éœ²å‡æ²¾ï¼ŒèŠ±èŠ±è½¿å­ä¼—äººæŠ¬ã€‚ä¸€äººåƒç‹¬é£Ÿï¼Œæ˜¯åƒä¸é•¿ä¹…çš„ã€‚</p>
<p>å°±ç®—å¤±è´¥ï¼Œæˆ‘ä¹Ÿæƒ³çŸ¥é“ï¼Œè‡ªå·±å€’åœ¨è·ç¦»ç»ˆç‚¹å¤šè¿œçš„åœ°æ–¹ã€‚</p>
<p>ç»™å†å²ä»¥ä¸€å®šçš„ç§‘å­¦çš„åœ°ä½ï¼Œæ˜¯å°Šé‡å†å²çš„è¾©è¯æ³•çš„å‘å±•ï¼Œè€Œä¸æ˜¯é¢‚å¤éä»Šï¼Œä¸æ˜¯èµæ‰¬ä»»ä½•å°å»ºçš„æ¯’ç´ ã€‚å¯¹äºäººæ°‘ç¾¤ä¼—å’Œé’å¹´å­¦ç”Ÿï¼Œä¸»è¦åœ°ä¸æ˜¯è¦å¼•å¯¼ä»–ä»¬å‘åçœ‹ï¼Œè€Œæ˜¯è¦å¼•å¯¼ä»–ä»¬å‘å‰çœ‹ã€‚</p>
<p>ä½ åƒæ˜¯æµ·é¸¥ï¼Œå¼ºå¥ï¼Œéš¾ä»¥çº¦æŸï¼Œå–œæ¬¢ç‹‚é£æš´é›¨ï¼Œè¿œè¿œé£å‘å¤§æµ·ï¼Œè‡ªå¾—å…¶ä¹ã€‚</p>
<p>I am not throwing away my shot.</p>
<p>Raise a glass to the four of us. Tomorrow, there will be more of us.</p>
<p>æ•™æ•·è¥ï¼Œé›¨èŠ±å°ï¼ŒæŒ¹æ±Ÿé—¨ï¼Œä¸­å±±é—¨ï¼Œä¸­åé—¨</p>
<p>what is next? Shall we go next? How to go next?</p>
<p>é¡»çŸ¥å°‘æ—¥æ‹äº‘å¿—ï¼Œæ›¾è®¸äººé—´ç¬¬ä¸€æµ</p>

      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="en">
    <link itemprop="mainEntityOfPage" href="https://hechenyi.github.io/2025/04/24/MATLAB%E5%9F%BA%E7%A1%80%E8%AF%AD%E6%B3%95/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="John Doe">
      <meta itemprop="description" content="">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Hexo">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/2025/04/24/MATLAB%E5%9F%BA%E7%A1%80%E8%AF%AD%E6%B3%95/" class="post-title-link" itemprop="url">MATLABåŸºç¡€è¯­æ³•</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">Posted on</span>

              <time title="Created: 2025-04-24 20:50:46" itemprop="dateCreated datePublished" datetime="2025-04-24T20:50:46+08:00">2025-04-24</time>
            </span>
              <span class="post-meta-item">
                <span class="post-meta-item-icon">
                  <i class="far fa-calendar-check"></i>
                </span>
                <span class="post-meta-item-text">Edited on</span>
                <time title="Modified: 2025-06-30 21:26:12" itemprop="dateModified" datetime="2025-06-30T21:26:12+08:00">2025-06-30</time>
              </span>
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-folder"></i>
              </span>
              <span class="post-meta-item-text">In</span>
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/MATLAB/" itemprop="url" rel="index"><span itemprop="name">MATLAB</span></a>
                </span>
            </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      
          <h2 id="å‘é‡å¤„ç†"><a href="#å‘é‡å¤„ç†" class="headerlink" title="å‘é‡å¤„ç†"></a>å‘é‡å¤„ç†</h2><p>a &#x3D; [1:3:100]<br>å…¶ä¸­aæ˜¯åˆå§‹å€¼ï¼Œbæ˜¯æ­¥é•¿ï¼Œcæ˜¯ç»ˆç‚¹å€¼<br>è¿”å›ç»“æœæ˜¯[1,4,7,â€¦,100]<br>b(a) &#x3D; []<br>æŠŠå‘é‡bä¸­çš„aå¯¹åº”ç´¢å¼•ç»™åˆ æ‰</p>
<h2 id="åˆ—å‘é‡å’Œæ¨ªå‘é‡"><a href="#åˆ—å‘é‡å’Œæ¨ªå‘é‡" class="headerlink" title="åˆ—å‘é‡å’Œæ¨ªå‘é‡"></a>åˆ—å‘é‡å’Œæ¨ªå‘é‡</h2><p>åˆ—å‘é‡ä½¿ç”¨;<br>a &#x3D; [1;2;3]<br>b &#x3D; [4;5;6]<br>c &#x3D; [a;b]<br>å…¶ä¸­cå°†ä¸¤ä¸ªåˆ—å‘é‡è¿›è¡Œæ‹¼æ¥<br>æ¨ªå‘é‡ä½¿ç”¨é€—å·ï¼Œå…¶ä»–åŒç†<br>å¦‚æœæƒ³ä½¿ç”¨a&#x3D;(1:100)ç±»ä¼¼è¯­æ³•æ„å»ºåˆ—å‘é‡ï¼Œå¯ä»¥å…ˆæ„å»ºæ¨ªå‘é‡ï¼Œä¾‹å¦‚a&#x3D;(1:100),ç„¶åå†ä½¿ç”¨(:)è¿›è¡Œè½¬æ¢a&#x3D;a(:)</p>
<h2 id="table"><a href="#table" class="headerlink" title="table"></a>table</h2><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line">% æ„å»ºtable</span><br><span class="line">RNTI = [1;2;3];</span><br><span class="line">LogicalChannelID = [3;4;5];</span><br><span class="line">RLCEntityType = [<span class="string">&quot;AM&quot;</span>; <span class="string">&quot;AM&quot;</span>; <span class="string">&quot;UM&quot;</span>];</span><br><span class="line">RLCChannelConfig = table(</span><br><span class="line">    RNTI, LogicalChannelID,LogicalChannelGroup,RLCEntityType,...</span><br><span class="line"></span><br><span class="line">);</span><br><span class="line">% æŸ¥è¯¢è¡¨çš„è¡Œæ•°</span><br><span class="line">nRows = size(RLCChannelConfig, 1);</span><br><span class="line">% æŸ¥è¯¢è¡¨çš„åˆ—æ•°</span><br><span class="line">nCols = size(RLCChannelConfig, 2);</span><br><span class="line">% æŠŠtableä¿å­˜æˆ.matæ–‡ä»¶</span><br><span class="line">save(<span class="string">&#x27;RLCChannelConfig.mat&#x27;</span>, <span class="string">&#x27;RLCChannelConfig&#x27;</span>)</span><br><span class="line">% å–å‡ºtableä¸­çš„æŸä¸ªå­—æ®µä¸­çš„æŸä¸€è¡Œçš„æ•°æ®</span><br><span class="line">data = RLCChannelConfig.RNTI(1);</span><br><span class="line">% æŠŠtableè½¬æˆstruct</span><br><span class="line">myStruct = table2struct(RLCChannelConfig)</span><br><span class="line">myStruct_1 = table2struct(RLCChannelConfig(1,2:end));</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<h2 id="å¯¹è§’çŸ©é˜µæ“ä½œ"><a href="#å¯¹è§’çŸ©é˜µæ“ä½œ" class="headerlink" title="å¯¹è§’çŸ©é˜µæ“ä½œ"></a>å¯¹è§’çŸ©é˜µæ“ä½œ</h2><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">% åˆ›å»ºå¯¹è§’çŸ©é˜µ</span><br><span class="line">A = diag([1 2 3]);   % ç”Ÿæˆå¯¹è§’çº¿ä¸º [1 2 3] çš„çŸ©é˜µ</span><br><span class="line"></span><br><span class="line">% æå–çŸ©é˜µçš„å¯¹è§’çº¿</span><br><span class="line">d = diag(A);         % è¿”å› A çš„ä¸»å¯¹è§’çº¿</span><br><span class="line"></span><br><span class="line">% ç”Ÿæˆåç§»å¯¹è§’çŸ©é˜µ</span><br><span class="line">B = diag([4 5 6], 1);  % å°† [4 5 6] æ”¾åœ¨ä¸»å¯¹è§’çº¿ä¸Šæ–¹ä¸€æ¡å¯¹è§’çº¿ä¸Š</span><br><span class="line">X = diag((<span class="number">1</span>+<span class="number">1</span>i)*ones(<span class="number">1</span>,Pilot_num));   % all pilots are 1+1i.</span><br><span class="line">    </span><br><span class="line"></span><br></pre></td></tr></table></figure>

<h2 id="Cell"><a href="#Cell" class="headerlink" title="Cell"></a>Cell</h2><p>Cellæ˜¯ä¸€ç§å¯ä»¥å®¹çº³ä»»æ„ç±»å‹æ•°æ®çš„å®¹å™¨ï¼Œå¯ä»¥ä¿å­˜ä¸åŒç±»å‹ã€ä¸åŒå¤§å°çš„æ•°æ®åœ¨ä¸€ä¸ªæ•°ç»„ä¸­&#x2F;</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">% åˆ›å»ºç©ºcell</span><br><span class="line">x = &#123;&#125;;</span><br><span class="line">x&#123;1&#125; = 1;</span><br><span class="line">x&#123;2&#125; = <span class="string">&#x27;hello&#x27;</span>;</span><br><span class="line">x&#123;3&#125; = [1 2 3];</span><br><span class="line"></span><br></pre></td></tr></table></figure>
<h2 id="class"><a href="#class" class="headerlink" title="class"></a>class</h2><p>å‡è®¾æœ‰ä¸€ä¸ªnrUEç±»<br>æ„å»ºnrUEsæ•°ç»„å¾ˆç®€å•</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">UEs = nrUE(Name=ueNames,Position=uePositions, Receive=11);</span><br></pre></td></tr></table></figure>
<p>åªéœ€è¦åœ¨ä¼ å‚æ—¶å°†æ•°ç»„ä¼ è¿›å»å³å¯ï¼Œè¿™æ ·è¾“å‡ºè‡ªåŠ¨æˆä¸ºæ•°ç»„</p>

      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="en">
    <link itemprop="mainEntityOfPage" href="https://hechenyi.github.io/2025/04/24/NRTDDPerformanceEvaluation/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="John Doe">
      <meta itemprop="description" content="">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Hexo">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/2025/04/24/NRTDDPerformanceEvaluation/" class="post-title-link" itemprop="url">NRTDDPerformanceEvaluation</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">Posted on</span>
              

              <time title="Created: 2025-04-24 05:47:47 / Modified: 18:56:11" itemprop="dateCreated datePublished" datetime="2025-04-24T05:47:47+08:00">2025-04-24</time>
            </span>
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-folder"></i>
              </span>
              <span class="post-meta-item-text">In</span>
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/5G/" itemprop="url" rel="index"><span itemprop="name">5G</span></a>
                </span>
            </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      
          <h2 id="1-Basic-Concept"><a href="#1-Basic-Concept" class="headerlink" title="1. Basic Concept"></a>1. Basic Concept</h2><p>In TDD (Time division duplexing) mode, physical uplink shared channel (PUSCH) and physical downlink shared channel (PDSCH) transmissions are scheduled in the same frequency band with separation in time domain. The scheduling strategy can be customized and network performance can be evaluated accordingly. </p>
<h3 id="1-1-ä¸¾ä¾‹è¯´æ˜"><a href="#1-1-ä¸¾ä¾‹è¯´æ˜" class="headerlink" title="1.1 ä¸¾ä¾‹è¯´æ˜"></a>1.1 ä¸¾ä¾‹è¯´æ˜</h3><p>matlabé‡Œé¢å‚æ•°è®¾ç½®å¦‚ä¸‹<br>reference_scs &#x3D; 15kHz(i.e. 1 ms slot), DLULPeriodicity &#x3D; 5 ms, numDLSlots &#x3D; 3, numDLSyms &#x3D; 7, numULSlots &#x3D; 1, numULSyms &#x3D; 5<br>æ‰€ä»¥Number of slots in DL-UL periodicity with respect to reference SCS of 15 kHzå¯¹åº”çš„NumSlotsDLULPeriodicity &#x3D; 5<br>æœ€åSlotåˆ†å¸ƒå›¾å¦‚ä¸‹<br>Slot Index:     0   1   2    3    4<br>            +â€”â€“+â€”+â€”-+â€”-+â€”â€“+<br>Slot Type:  DL     Dl   Dl    Up   UL<br>Symbol Use: full   full  7sym  full 5sym</p>

      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="en">
    <link itemprop="mainEntityOfPage" href="https://hechenyi.github.io/2025/04/23/JavaSwing/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="John Doe">
      <meta itemprop="description" content="">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Hexo">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/2025/04/23/JavaSwing/" class="post-title-link" itemprop="url">JavaSwing</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">Posted on</span>

              <time title="Created: 2025-04-23 05:20:59" itemprop="dateCreated datePublished" datetime="2025-04-23T05:20:59+08:00">2025-04-23</time>
            </span>
              <span class="post-meta-item">
                <span class="post-meta-item-icon">
                  <i class="far fa-calendar-check"></i>
                </span>
                <span class="post-meta-item-text">Edited on</span>
                <time title="Modified: 2025-04-25 19:48:01" itemprop="dateModified" datetime="2025-04-25T19:48:01+08:00">2025-04-25</time>
              </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      
          <h2 id="Basic-Concept"><a href="#Basic-Concept" class="headerlink" title="Basic Concept"></a>Basic Concept</h2><p>Swing is part of API for providing native look and feel GUI for Java, which has more components than AWT(Abstract Window Toolkit), and these components are more lightweight.  </p>
<p>Documents:<br><a target="_blank" rel="noopener" href="https://docs.oracle.com/en/java/javase/20/docs/api/java.desktop/javax/swing/package-summary.html">https://docs.oracle.com/en/java/javase/20/docs/api/java.desktop/javax/swing/package-summary.html</a>  </p>
<p>These components are as below:</p>
<ul>
<li>Windows and dialogs<ul>
<li>JFrame<br>  <strong>JFrame</strong>æ˜¯ä¸€ä¸ª<strong>é¡¶å±‚å®¹å™¨</strong>ï¼Œç”¨äºåˆ›å»ºä¸€ä¸ªçª—å£ï¼Œçª—å£ä¸­å¯ä»¥åŒ…å«æŒ‰é’®ã€æ–‡æœ¬æ¡†ã€æ ‡ç­¾ç­‰å„ç§ç»„ä»¶ï¼Œå¹¶ä¸”JFrameä¹Ÿå¯ä»¥å¸ƒå±€ï¼Œä¾‹å¦‚æ·»åŠ BorderLayout</li>
<li>JDialog</li>
<li>JColorChooser</li>
<li>JFileChooser</li>
<li>JOptionPane</li>
</ul>
</li>
<li>Menus<ul>
<li>JMenuItem</li>
<li>JMenu</li>
<li>JMenuBar</li>
<li>JCheckBoxMenuItem</li>
<li>JRadioButtonMenuItem</li>
<li>JPopupMenu</li>
<li>JSeparator</li>
</ul>
</li>
<li>Container<ul>
<li>JPanel<br>  JPanelæ˜¯é¢æ¿ç»„ä»¶ï¼Œé€šå¸¸ä¸å•ç‹¬æ˜¾ç¤ºï¼Œè€Œæ˜¯ä½œä¸ºå…¶ä»–å®¹å™¨ï¼ˆæ¯”å¦‚JFrameï¼‰ä¸­çš„å­å®¹å™¨ï¼Œä¸»è¦ç”¨æ¥ï¼šç»„ç»‡ç»„ä»¶ï¼ˆæ¯”å¦‚æŠŠæŒ‰é’®ã€æ–‡æœ¬æ¡†æ”¾åœ¨ä¸€ä¸ªé¢æ¿é‡Œï¼‰ï¼Œé…åˆä¸åŒçš„å¸ƒå±€ç®¡ç†å™¨ä½¿ç”¨ï¼ˆFlowLayoutã€ BorderLayoutã€ GridLayoutï¼‰</li>
<li>JTappedPane</li>
<li>JSplitPane</li>
<li>JScrollPane</li>
<li>JToolBar</li>
<li>JDesktopPane</li>
<li>JInternalFrame</li>
<li>JLayeredPane</li>
</ul>
</li>
<li>Control elements<ul>
<li>JLabel</li>
<li>JButton</li>
<li>JToggleButton</li>
<li>JCheckBox<br>  å¤é€‰æ¡†ç»„ä»¶ï¼Œç”¨æ¥è®©ç”¨æˆ·åœ¨å¤šä¸ªé€‰é¡¹ä¸­è¿›è¡Œå•é€‰æˆ–å¤šé€‰</li>
<li>JRadioButton</li>
<li>ButtonGroup</li>
<li>JComboBox</li>
<li>JList</li>
<li>JTextField</li>
<li>JTextArea</li>
<li>JSeperator</li>
</ul>
</li>
<li>Event handling<ul>
<li>ActionEvent</li>
<li>AdjustmentEvent</li>
<li>FocusEvent</li>
<li>ItemEvent</li>
<li>MouseEvent</li>
<li>TextEvent</li>
<li>WindowEvent</li>
<li>Menuvent</li>
<li>ListSelectionEvent</li>
<li>TableModelEvent<br>ä»¥WindowEventä¸ºä¾‹</li>
</ul>
</li>
</ul>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">JFrame testFrame = new JFrame(<span class="string">&quot;Listener Test&quot;</span>);</span><br><span class="line">testFrame.setSize(300,200);</span><br><span class="line">testFrame.addWindowListener(new <span class="function"><span class="title">WindowAdpater</span></span>()&#123;</span><br><span class="line">    public void windowClosing(WindowEvent e)&#123;</span><br><span class="line">        JOptionPane testOpt = new JOptionPane();</span><br><span class="line">        testOpt.showMessageDialog(new JFrame(), <span class="string">&quot;closing Window!&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure>
<p>è¿™é‡Œä½¿ç”¨äº†åŒ¿åå‡½æ•°ï¼Œç­‰åŒäºä»¥ä¸‹</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">JFrame testFrame = new JFrame(<span class="string">&quot;Listener Test&quot;</span>);</span><br><span class="line">class MyWindowListener extends WindowAdpater&#123;</span><br><span class="line">    public void windowClosing(WindowEvent e)&#123;</span><br><span class="line">        System.out.println(<span class="string">&quot;çª—å£å…³é—­&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line">testFrame.addWindowListener(new MyWindowListener());</span><br></pre></td></tr></table></figure>
<ul>
<li>Layout manager<ul>
<li>FlowLayout</li>
<li>GridLayout</li>
<li>BorderLayout</li>
<li>BoxLayout</li>
<li>CardLayout</li>
<li>GridBagLayout</li>
<li>GroupLayout</li>
<li>SpringLayout</li>
</ul>
</li>
</ul>
<h2 id="Javaçš„æŠ½è±¡ç±»å’Œæ¥å£"><a href="#Javaçš„æŠ½è±¡ç±»å’Œæ¥å£" class="headerlink" title="Javaçš„æŠ½è±¡ç±»å’Œæ¥å£"></a>Javaçš„æŠ½è±¡ç±»å’Œæ¥å£</h2><p>ä»¥æŠ½è±¡ç±»WindowAdapterå’Œæ¥å£WindowListenerä¸ºä¾‹ã€‚<br>é€šå¸¸æ¥è¯´ï¼ŒæŠ½è±¡ç±»ç»§æ‰¿äº†æ¥å£çš„æ–¹æ³•ï¼Œä½†æ˜¯æ¯ä¸ªæ–¹æ³•éƒ½ç•™äº†ä¸ªç©ºå£³å®ç°ï¼Œæ­£å› ä¸ºè¿™äº›ç©ºå£³ï¼Œç»§æ‰¿äº†æ¥å£çš„æŠ½è±¡ç±»åªéœ€è¦å†™åƒè¦†ç›–çš„é‚£å‡ ç§æ–¹æ³•ï¼Œè€Œä¸æ˜¯è¢«è¿«å†™å®Œå…¨éƒ¨ã€‚<br>ä¾‹å¦‚WindowAdapterç»§æ‰¿WindowListener</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">public abstract class WindowAdapter implements WindowListener&#123;</span><br><span class="line">    public void windowOpened(WindowEvent e)&#123;&#125;</span><br><span class="line">    ...</span><br><span class="line">    public void windowDeactivated(WindowEvent e)&#123;&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h2 id="ä½¿ç”¨ç»§æ‰¿çš„æ–¹æ³•æ„å»ºMainFrameç±»"><a href="#ä½¿ç”¨ç»§æ‰¿çš„æ–¹æ³•æ„å»ºMainFrameç±»" class="headerlink" title="ä½¿ç”¨ç»§æ‰¿çš„æ–¹æ³•æ„å»ºMainFrameç±»"></a>ä½¿ç”¨ç»§æ‰¿çš„æ–¹æ³•æ„å»ºMainFrameç±»</h2><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">public class MainFrame extends JFrame&#123;</span><br><span class="line">    public <span class="function"><span class="title">MainFrame</span></span>()&#123;</span><br><span class="line">        setTitle(<span class="string">&quot;Choose Your Favorite Items&quot;</span>);</span><br><span class="line">        setSize(400, 300);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>å¯ä»¥è¿™ä¹ˆç†è§£,ä»¥ä¸‹çš„JFrameçˆ¶ç±»çš„æ„é€ å‡½æ•°ä¼šåœ¨å­ç±»MainFrameè°ƒç”¨æ„é€ å‡½æ•°æ—¶è¢«è°ƒç”¨ï¼Œå› ä¸ºå¦‚æœçˆ¶ç±»æ„é€ å‡½æ•°å¦‚æœæ˜¯æ— å‚çš„è¯é‚£ä¹ˆå°±ä¼šè¢«éšå‹è°ƒç”¨ï¼Œå¦‚æœæ˜¯æœ‰å‚çš„è¯éœ€è¦é€šè¿‡superå‡½æ•°æ¥è°ƒç”¨ã€‚</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">public class JFrame&#123;</span><br><span class="line">    public <span class="function"><span class="title">JFrame</span></span>()&#123;</span><br><span class="line">        ...</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure>
<p>ç»§æ‰¿äº†è¿™ä¸ªçˆ¶ç±»çš„MyFrameå­ç±»ç›¸å½“äºåœ¨æ„é€ å‡½æ•°é‡Œé¢æ‰§è¡Œäº†ä¸€ésuper()</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">public <span class="function"><span class="title">MainFrame</span></span>()&#123;</span><br><span class="line">    super();</span><br><span class="line">    setTitle(<span class="string">&quot;Choose your favourite items&quot;</span>);</span><br><span class="line">    ...</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>


<img src="/images/ä½ .jpg">
ä½ å¥½å¯çˆ±ï¼Œä¸ºä»€ä¹ˆæˆ‘ä»¬æ€§æ ¼ä¼šå¦‚ä½•ç›¸åƒ

      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="en">
    <link itemprop="mainEntityOfPage" href="https://hechenyi.github.io/2025/04/22/openairinterface/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="John Doe">
      <meta itemprop="description" content="">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Hexo">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/2025/04/22/openairinterface/" class="post-title-link" itemprop="url">openairinterface</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">Posted on</span>

              <time title="Created: 2025-04-22 17:45:43" itemprop="dateCreated datePublished" datetime="2025-04-22T17:45:43+08:00">2025-04-22</time>
            </span>
              <span class="post-meta-item">
                <span class="post-meta-item-icon">
                  <i class="far fa-calendar-check"></i>
                </span>
                <span class="post-meta-item-text">Edited on</span>
                <time title="Modified: 2025-05-31 21:42:00" itemprop="dateModified" datetime="2025-05-31T21:42:00+08:00">2025-05-31</time>
              </span>
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-folder"></i>
              </span>
              <span class="post-meta-item-text">In</span>
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/5G/" itemprop="url" rel="index"><span itemprop="name">5G</span></a>
                </span>
            </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      
          <h2 id="openairinterface"><a href="#openairinterface" class="headerlink" title="openairinterface"></a>openairinterface</h2><h3 id="PHY-MODULATION"><a href="#PHY-MODULATION" class="headerlink" title="PHY&#x2F;MODULATION&#x2F;"></a>PHY&#x2F;MODULATION&#x2F;</h3><h4 id="slot-fep-nr-c"><a href="#slot-fep-nr-c" class="headerlink" title="slot_fep_nr.c"></a>slot_fep_nr.c</h4><p><strong>nr_slot_fep_init_sync</strong> function æ˜¯5G NR UE PHYå±‚çš„ä¸€ä¸ªå‡½æ•°ï¼Œä¸»è¦åŠŸèƒ½æ˜¯é’ˆå¯¹æŸä¸ªæŒ‡å®šçš„slotå’ŒOFDMç¬¦å·<br>åˆ†ä¸ºä»¥ä¸‹å‡ ä¸ªéƒ¨åˆ†:</p>
<ul>
<li>ä»æ—¶åŸŸé‡‡æ ·ä¸­æå–è¯¥ç¬¦å·çš„æ ·æœ¬</li>
<li>åšDFTè½¬æ¢ ï¼ˆæ—¶åŸŸ-&gt;é¢‘åŸŸï¼‰</li>
<li>å¯¹é¢‘åŸŸç¬¦å·è¿›è¡Œæ—‹è½¬è¡¥å¿(symbol rotation)</li>
<li>å°†é¢‘åŸŸç»“æœå­˜å…¥ç¼“å†²åŒºï¼Œä¸ºåç»­å¤„ç†ï¼ˆè§£è°ƒï¼Œæµ‹é‡ç­‰ï¼‰åšå‡†å¤‡</li>
</ul>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line">/// è·å–å½“å‰ofdmç¬¦å·åœ¨æ—¶åŸŸä¸­çš„rx_offset</span><br><span class="line">/// å…¶ä¸­is * fp-&gt;samples_per_frameå‰é¢æ‰€æœ‰frameçš„é‡‡æ ·ç‚¹æ•°ç›®</span><br><span class="line">nr_slot_fep_init_sync(ue, proc, i, j, is * fp-&gt;samples_per_frame + ue-&gt;ssb_offset);</span><br><span class="line">/// nr_slot_fep_init_syncå‡½æ•°å†…éƒ¨</span><br><span class="line">/// å…¶ä¸­Nsè¡¨ç¤ºSlotæ•°ï¼Œsymbolè¡¨ç¤ºç¬¦å·æ•°ï¼Œä»è€Œå¯ä»¥ä½¿å¾—å¯¹æ¯ä¸ªç¬¦å·éƒ½èƒ½åšå¤„ç†</span><br><span class="line">unsigned int slot_offset = frame_parms-&gt;get_samples_slot_timestamp(Ns,frame_parms,0);</span><br><span class="line">unsigned int rx_offset   = sample_offset + slot_offset;</span><br><span class="line">unsigned int abs_symbol  = Ns * frame_parms-&gt;symbols_per_slot + symbol;</span><br><span class="line"><span class="keyword">for</span> (int idx_symb = Ns*frame_parms-&gt;symbols_per_slot; idx_symb &lt;= abs_symbol; idx_symb++)</span><br><span class="line"></span><br><span class="line">    rx_offset += (abs_symbol%(0x7&lt;&lt;<span class="string">frame_parms-&gt;numerology_index)) ? nb_prefix_samples : nb_prefix_samples0;</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">/// æœ€åï¼Œå†åŠ ä¸Šå½“å‰ slot å†…çš„ symbol ä¸ªæ•° * æ¯ä¸ªç¬¦å·çš„æ•°æ®é•¿åº¦ï¼ˆä¸å« CPï¼‰  </span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">rx_offset += frame_parms</span>-&gt;ofdm_symbol_size * symbol;</span><br><span class="line"></span><br></pre></td></tr></table></figure>


<p>ç”±ä»£ç å¯çŸ¥rx_offsetè®¡ç®—äº†åˆ°å½“å‰å¸§ä¸­æŸä¸ª slot å†…æŸä¸ª OFDM ç¬¦å·åœ¨æ—¶åŸŸï¼ˆé‡‡æ ·ï¼‰æ•°æ®ä¸­çš„ç²¾ç¡®ä½ç½®ï¼ˆé‡‡æ ·ç‚¹æ•°ï¼‰â€ã€‚<br>å®ƒè€ƒè™‘äº†æ‰€æœ‰é‡‡æ ·æ•°æ®åç§»ï¼ˆåŒ…å«cpï¼‰</p>
<p>è¿™ä¸ªè®¡ç®—è€Œæ¥çš„rx_offsetåé¢ä¼šè¢«ç”¨äºæ›´æ–°æ—¶é—´æˆ³ï¼Œä¼šå°†RFæ¥æ”¶é“¾ä¸­çš„é‡‡æ ·æ—¶é—´æˆ³å‘å‰æ¨è¿›<strong>rx_offset_sl</strong>ä¸ªé‡‡æ ·ç‚¹ï¼Œç¡®ä¿åç»­çš„è§£è°ƒ&#x2F;è§£ç ä»æ­£ç¡®ä½ç½®å¼€å§‹,å…·ä½“å¯è§ä¸‹é¢<strong>syncInFrame</strong>å‡½æ•°</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line">void syncInFrame(PHY_VARS_NR_UE *UE, openair0_timestamp *timestamp) &#123;</span><br><span class="line">    int rx_offset = (get_softmodem_params()-&gt;sl_mode == 2) ? UE-&gt;rx_offset_sl : UE-&gt;rx_offset;</span><br><span class="line">    LOG_I(NR_PHY, <span class="string">&quot;Resynchronizing RX by %d samples (mode = %d)\n&quot;</span>, rx_offset, UE-&gt;mode);</span><br><span class="line">    *timestamp += UE-&gt;frame_parms.get_samples_per_slot(1,&amp;UE-&gt;frame_parms);</span><br><span class="line">    <span class="keyword">for</span> (int size = rx_offset; size &gt; 0; size -= UE-&gt;frame_parms.samples_per_subframe) &#123;</span><br><span class="line">      int unitTransfer=size&gt;UE-&gt;frame_parms.samples_per_subframe ? UE-&gt;frame_parms.samples_per_subframe : size ;</span><br><span class="line">      // we write before <span class="built_in">read</span> because gNB waits <span class="keyword">for</span> UE to write and both executions halt</span><br><span class="line">      // this happens here as the <span class="built_in">read</span> size is samples_per_subframe <span class="built_in">which</span> is very much larger than samp_per_slot</span><br><span class="line">      <span class="keyword">if</span> (IS_SOFTMODEM_RFSIM &amp;&amp; !get_softmodem_params()-&gt;sync_ref) dummyWrite(UE,*timestamp, unitTransfer);</span><br><span class="line">      AssertFatal(unitTransfer ==</span><br><span class="line">                  UE-&gt;rfdevice.trx_read_func(&amp;UE-&gt;rfdevice,</span><br><span class="line">                                             timestamp,</span><br><span class="line">                                             (void **)UE-&gt;common_vars.rxdata,</span><br><span class="line">                                             unitTransfer,</span><br><span class="line">                                             UE-&gt;frame_parms.nb_antennas_rx),<span class="string">&quot;&quot;</span>);</span><br><span class="line">      *timestamp += unitTransfer; // this does not affect the <span class="built_in">read</span> but needed <span class="keyword">for</span> RFSIM write</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>ä»ä»£ç å¯è§ï¼Œæ¯æ¬¡å¤„ç†sample_per_subframe æ•°ç›®çš„æ•°æ®ï¼Œç„¶åæ›´æ–°timestampæ—¶é—´æˆ³ï¼Œæœ€åå°†timestampåŠ ä¸Šäº†rx_offset,éœ€è¦æ³¨æ„çš„çš„æ˜¯å¯¹äºéœ€è¦è·³è¿‡çš„æ•°æ®ä¹Ÿéœ€è¦è¿›è¡Œ<strong>rfdevice.trx_read_func</strong>å¤„ç†ï¼Œå› ä¸ºRFé‡‡é›†çš„æ•°æ®æ˜¯æµå¼çš„ï¼Œæ•°æ®æ˜¯è¿ç»­äº§ç”Ÿå¹¶å­˜æ”¾åˆ°ç¡¬ä»¶ç¼“å†²åŒºé‡Œçš„ã€‚</p>
<hr>
<blockquote>
<p><strong>Notice</strong><br><br>ä¸€ä¸ªOFDMç¬¦å·çš„é‡‡æ ·ç‚¹æ•°é‡ï¼ˆä¸åŒ…å«cpï¼‰ç­‰äºFFT sizeï¼Œ<br>ä¹Ÿå°±è¯´FFT sizeä¸åŒ…å«cpï¼Œä½†æ˜¯åœ¨è®¡ç®—æ—¶åŸŸä¸Šçš„offsetæ—¶éœ€è¦è€ƒè™‘cpï¼Œæ­£å¦‚ä¸Šè¿°ä»£ç æ‰€ç¤º</p>
</blockquote>
<hr>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br></pre></td><td class="code"><pre><span class="line">/// æ ¹æ®rx_offsetå–å‡ºrxdata</span><br><span class="line">  <span class="keyword">for</span> (unsigned char aa=0; aa&lt;frame_parms-&gt;nb_antennas_rx; aa++) &#123;</span><br><span class="line">    memset(&amp;common_vars-&gt;common_vars_rx_data_per_thread[proc-&gt;thread_id].rxdataF[aa][frame_parms-&gt;ofdm_symbol_size*symbol],0,frame_parms-&gt;ofdm_symbol_size*sizeof(int32_t));</span><br><span class="line"></span><br><span class="line">    int16_t *rxdata_ptr;</span><br><span class="line">    rx_offset%=frame_length_samples*2;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">if</span> (rx_offset+frame_parms-&gt;ofdm_symbol_size &gt; frame_length_samples*2 ) &#123;</span><br><span class="line">      // rxdata is 2 frames len</span><br><span class="line">      // we have to wrap on the end</span><br><span class="line"></span><br><span class="line">      memcpy((void *)&amp;tmp_dft_in[<span class="number">0</span>],</span><br><span class="line">             (void *)&amp;common_vars-&gt;rxdata[aa][rx_offset],</span><br><span class="line">             (frame_length_samples*<span class="number">2</span> - rx_offset) * sizeof(int32_t));</span><br><span class="line">      memcpy((void *)&amp;tmp_dft_in[frame_length_samples*<span class="number">2</span> - rx_offset],</span><br><span class="line">             (void *)&amp;common_vars-&gt;rxdata[aa][<span class="number">0</span>],</span><br><span class="line">             (frame_parms-&gt;ofdm_symbol_size - (frame_length_samples*<span class="number">2</span> - rx_offset)) * sizeof(int32_t));</span><br><span class="line">      rxdata_ptr = (int16_t *)tmp_dft_in;</span><br><span class="line"></span><br><span class="line">    &#125; <span class="keyword">else</span> <span class="keyword">if</span> ((rx_offset &amp; <span class="number">7</span>) != <span class="number">0</span>) &#123;</span><br><span class="line"></span><br><span class="line">      // if input to dft is not <span class="number">256</span>-bit aligned</span><br><span class="line">      memcpy((void *)&amp;tmp_dft_in[<span class="number">0</span>],</span><br><span class="line">             (void *)&amp;common_vars-&gt;rxdata[aa][rx_offset],</span><br><span class="line">             frame_parms-&gt;ofdm_symbol_size * sizeof(int32_t));</span><br><span class="line">      rxdata_ptr = (int16_t *)tmp_dft_in;</span><br><span class="line"></span><br><span class="line">    &#125; <span class="keyword">else</span> &#123;</span><br><span class="line"></span><br><span class="line">      // use dft input from RX buffer directly</span><br><span class="line">      rxdata_ptr = (int16_t *)&amp;common_vars-&gt;rxdata[aa][rx_offset];</span><br><span class="line"></span><br><span class="line">    &#125;</span><br><span class="line">/// è°ƒç”¨dft()å‡½æ•°åšæ—¶åŸŸåˆ°é¢‘åŸŸè½¬æ¢ï¼Œè¾“å‡ºå­˜åˆ°rxdataFç¼“å†²åŒº</span><br><span class="line">dft(dftsize,</span><br><span class="line">    rxdata_ptr,</span><br><span class="line">    (int16_t *)&amp;common_vars-&gt;common_vars_rx_data_per_thread[proc-&gt;thread_id].rxdataF[aa][frame_parms-&gt;ofdm_symbol_size*symbol],</span><br><span class="line">    1);</span><br><span class="line"></span><br></pre></td></tr></table></figure>



<h5 id="rxdata-æ—¶åŸŸé‡‡æ ·æ•°æ®-å’Œ-rxdataF-ï¼ˆé¢‘åŸŸç¬¦å·æ•°æ®ï¼‰"><a href="#rxdata-æ—¶åŸŸé‡‡æ ·æ•°æ®-å’Œ-rxdataF-ï¼ˆé¢‘åŸŸç¬¦å·æ•°æ®ï¼‰" class="headerlink" title="rxdata (æ—¶åŸŸé‡‡æ ·æ•°æ®) å’Œ rxdataF ï¼ˆé¢‘åŸŸç¬¦å·æ•°æ®ï¼‰"></a>rxdata (æ—¶åŸŸé‡‡æ ·æ•°æ®) å’Œ rxdataF ï¼ˆé¢‘åŸŸç¬¦å·æ•°æ®ï¼‰</h5><p>rxdata<br>æ¯ä¸¤ä¸ªint16_tæ˜¯ä¸€ä¸ªå¤æ•°é‡‡æ ·(I + jQ)</p>
<p>| I1 | Q1 | I2 | Q2 | I3 | Q3 | I4 | Q4 | â€¦  (æ—¶åŸŸé‡‡æ ·åºåˆ—)<br>|â€”-|â€”-|â€”-|â€”-|â€”-|â€”-|â€”-|â€”-|<br>  t0   t0  t1   t1  t2   t2  t3   t3     æ—¶é—´é¡ºåºé‡‡æ ·ç‚¹</p>
<p>rxdataF<br>æ¯ä¸¤ä¸ªint16_tæ˜¯ä¸€ä¸ªå­è½½æ³¢çš„é¢‘åŸŸå¤æ•°ç³»æ•°  </p>
<p>| Re(k&#x3D;0) | Im(k&#x3D;0) | Re(k&#x3D;1) | Im(k&#x3D;1) | Re(k&#x3D;2) | Im(k&#x3D;2) | â€¦ (é¢‘åŸŸå­è½½æ³¢åºåˆ—)<br>|â€”â€”â€”|â€”â€”â€”|â€”â€”â€”|â€”â€”â€”|â€”â€”â€”|â€”â€”â€”|<br>  å­è½½æ³¢0    å­è½½æ³¢0    å­è½½æ³¢1    å­è½½æ³¢1    å­è½½æ³¢2    å­è½½æ³¢2</p>
<h3 id="executable"><a href="#executable" class="headerlink" title="executable"></a>executable</h3><p>é‡Œé¢æœ‰å¤šä¸ªä¸buildåç”Ÿæˆçš„å¯æ‰§è¡Œæ–‡ä»¶åŒåçš„.hå’Œ.cæ–‡ä»¶ï¼Œä¾‹å¦‚nr-uesoftmodem.cï¼Œç›¸å½“äºåœ¨æ‰§è¡Œnr-uesoftmodemåå°±ä¼šå»è¿™ä¸ªcæ–‡ä»¶é‡Œæ‰¾ä¸»å‡½æ•°ï¼Œç„¶åä¾æ¬¡è¿è¡Œã€‚</p>
<h4 id="softmodem-common-h"><a href="#softmodem-common-h" class="headerlink" title="softmodem-common.h"></a>softmodem-common.h</h4><ul>
<li>ç¬¬ä¸€æ­¥ï¼Œå…ˆ#define CMDLINE_PARAMS_DESC,ç”¨äºå°†ç»ˆç«¯ä¼ å…¥çš„å‚æ•°æ”¾å…¥ä¸€ä¸ªä¸´æ—¶å˜é‡ä¸­</li>
</ul>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#define CMDLINE_PARAMS_DESC &#123;  \</span></span><br><span class="line">    &#123;<span class="string">&quot;rf-config-file&quot;</span>,       CONFIG_HLP_RFCFGF,       0,              strptr:&amp;RF_CONFIG_FILE,             defstrval:NULL,        TYPE_STRING, 0&#125;,                     \</span><br><span class="line">    &#123;<span class="string">&quot;split73&quot;</span>,              CONFIG_HLP_SPLIT73,      0,              strptr:&amp;SPLIT73,                    defstrval:NULL,        TYPE_STRING, 0&#125;,                     \</span><br><span class="line">    &#123;<span class="string">&quot;thread-pool&quot;</span>,          CONFIG_HLP_TPOOL,        0,              strptr:&amp;TP_CONFIG,                  defstrval:<span class="string">&quot;-1,-1,-1,-1,-1,-1,-1,-1&quot;</span>, TYPE_STRING, 0&#125;,       \</span><br><span class="line">    &#123;<span class="string">&quot;phy-test&quot;</span>,             CONFIG_HLP_PHYTST,       PARAMFLAG_BOOL, iptr:&amp;PHY_TEST,                     defintval:0,           TYPE_INT,    0&#125;,                     \</span><br><span class="line">    &#123;<span class="string">&quot;sl-phy-test&quot;</span>,          CONFIG_HLP_SL_PHYTST,    PARAMFLAG_BOOL, iptr:&amp; </span><br><span class="line">    ....</span><br><span class="line">    TUNE_OFFSET,                defintval:0,           TYPE_DOUBLE, 0&#125;,                     \</span><br><span class="line">    &#123;<span class="string">&quot;wait-for-sync&quot;</span>,        NULL,                    PARAMFLAG_BOOL, iptr:&amp;WAIT_FOR_SYNC,                defintval:0,           TYPE_INT,    0&#125;,                     \</span><br><span class="line">    &#123;<span class="string">&quot;single-thread-enable&quot;</span>, CONFIG_HLP_NOSNGLT,      PARAMFLAG_BOOL, iptr:&amp;SINGLE_THREAD_FLAG,           defintval:0,           TYPE_INT,    0&#125;,                     \</span><br><span class="line">    &#123;<span class="string">&quot;C&quot;</span> ,                   CONFIG_HLP_DLF,          0,              u64ptr:&amp;(downlink_frequency[0][0]), defuintval:3600000000, TYPE_UINT64, 0&#125;,                     \</span><br><span class="line">    &#123;<span class="string">&quot;CO&quot;</span> ,                  CONFIG_HLP_ULF,          0,              iptr:&amp;(uplink_frequency_offset[0][0]), defintval:0,        TYPE_INT,    0&#125;,                     \</span><br><span class="line">    &#123;<span class="string">&quot;a&quot;</span> ,                   CONFIG_HLP_CHOFF,        0,              iptr:&amp;CHAIN_OFFSET,                 defintval:0,           TYPE_INT,    0&#125;,                     \</span><br><span class="line">    &#123;<span class="string">&quot;d&quot;</span> ,                   CONFIG_HLP_SOFTS,        PARAMFLAG_BOOL, uptr:(uint32_t *)&amp;do_forms,         defintval:0,           TYPE_INT8,   0&#125;,                     \</span><br><span class="line">    &#123;<span class="string">&quot;q&quot;</span> ,                   CONFIG_HLP_STMON,        PARAMFLAG_BOOL, iptr:&amp;opp_enabled,                  defintval:0,           TYPE_INT,    0&#125;,                     \</span><br><span class="line">    &#123;<span class="string">&quot;numerology&quot;</span> ,          CONFIG_HLP_NUMEROLOGY,   PARAMFLAG_BOOL, iptr:&amp;NUMEROLOGY,                   defintval:1,           TYPE_INT,    0&#125;,                     \</span><br><span class="line">    &#123;<span class="string">&quot;band&quot;</span> ,                CONFIG_HLP_BAND,         0,              iptr:&amp;BAND,                         defintval:78,          TYPE_INT,    0&#125;,                     \</span><br><span class="line">    &#123;<span class="string">&quot;emulate-rf&quot;</span> ,          CONFIG_HLP_EMULATE_RF,   PARAMFLAG_BOOL, iptr:&amp;EMULATE_RF,                   defintval:0,           TYPE_INT,    0&#125;,                     \</span><br><span class="line">    &#123;<span class="string">&quot;parallel-config&quot;</span>,      CONFIG_HLP_PARALLEL_CMD, 0,              strptr:&amp;parallel_config,            defstrval:NULL,        TYPE_STRING, 0&#125;,                     \</span><br><span class="line">    &#123;<span class="string">&quot;worker-config&quot;</span>,        CONFIG_HLP_WORKER_CMD,   0,              strptr:&amp;worker_config,              defstrval:NULL,        TYPE_STRING, 0&#125;,                     \</span><br><span class="line">    &#123;<span class="string">&quot;noS1&quot;</span>,                 CONFIG_HLP_NOS1,         PARAMFLAG_BOOL, uptr:&amp;noS1,                         defintval:0,           TYPE_INT,    0&#125;,                     \</span><br><span class="line">    &#123;<span class="string">&quot;rfsim&quot;</span>,                CONFIG_HLP_RFSIM,        PARAMFLAG_BOOL, uptr:&amp;rfsim,                        defintval:0,           TYPE_INT,    0&#125;,                     \</span><br><span class="line">    &#123;<span class="string">&quot;nokrnmod&quot;</span>,             CONFIG_HLP_NOKRNMOD,     PARAMFLAG_BOOL, uptr:&amp;nokrnmod,                     defintval:0,           TYPE_INT,    0&#125;,                     \</span><br><span class="line">    &#123;<span class="string">&quot;nbiot-disable&quot;</span>,        CONFIG_HLP_DISABLNBIOT,  PARAMFLAG_BOOL, uptr:&amp;nonbiot,                      defuintval:0,          TYPE_INT,    0&#125;,                     \</span><br><span class="line">    &#123;<span class="string">&quot;chest-freq&quot;</span>,           CONFIG_HLP_CHESTFREQ,    0,              iptr:&amp;SYNC_REF,                     defintval:0,           TYPE_INT,    0&#125;,                     \</span><br><span class="line">    &#123;<span class="string">&quot;nid1&quot;</span>,                 CONFIG_HLP_NID1,         0,              iptr:&amp;NID1,                         defintval:10,          TYPE_INT,    0&#125;,                     \</span><br><span class="line">    &#123;<span class="string">&quot;nid2&quot;</span>,                 CONFIG_HLP_NID2,         0,              iptr:&amp;NID2,                         defintval:1,           TYPE_INT,    0&#125;,                     \</span><br><span class="line">    &#123;<span class="string">&quot;message&quot;</span>,              CONFIG_HLP_MSG,          0,              strptr:&amp;SL_USER_MSG,                defstrval:NULL,        TYPE_STRING, 0&#125;,                     \</span><br><span class="line">  &#125;</span><br></pre></td></tr></table></figure>
<ul>
<li>ç¬¬äºŒæ­¥ï¼Œå°†ä¸´æ—¶å˜é‡æ”¾å…¥ç»“æ„ä½“å˜é‡ä¸­ï¼Œç”¨äºåç»­è°ƒç”¨</li>
</ul>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#define NODE_NUMBER         softmodem_params.node_number</span></span><br><span class="line"><span class="comment">#define SL_DEST_ID          softmodem_params.dest_id</span></span><br><span class="line"><span class="comment">#define NON_STOP            softmodem_params.non_stop</span></span><br><span class="line"><span class="comment">#define EMULATE_L1          softmodem_params.emulate_l1</span></span><br><span class="line"><span class="comment">#define CONTINUOUS_TX       softmodem_params.continuous_tx</span></span><br><span class="line"><span class="comment">#define SYNC_REF            softmodem_params.sync_ref</span></span><br><span class="line"><span class="comment">#define NID1                softmodem_params.nid1</span></span><br><span class="line"><span class="comment">#define NID2                softmodem_params.nid2</span></span><br><span class="line"><span class="comment">#define SL_USER_MSG         softmodem_params.sl_user_msg</span></span><br><span class="line">...</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<h4 id="è°ƒç”¨nr-uesoftmodem-c"><a href="#è°ƒç”¨nr-uesoftmodem-c" class="headerlink" title="è°ƒç”¨nr-uesoftmodem.c"></a>è°ƒç”¨nr-uesoftmodem.c</h4><h5 id="è°ƒç”¨UE-thread-SL"><a href="#è°ƒç”¨UE-thread-SL" class="headerlink" title="è°ƒç”¨UE_thread_SL"></a>è°ƒç”¨UE_thread_SL</h5><ul>
<li><p>Initialization</p>
<ul>
<li>åˆå§‹åŒ–UE</li>
<li>æ”¶å‘ç¼“å†²åŒºæŒ‡é’ˆ</li>
<li>å°„é¢‘è®¾å¤‡è®¾ç½®</li>
<li>FIFOåˆå§‹åŒ–<br>  åˆå§‹åŒ–ä¸€ä¸ªå‘½åä¸ºnfçš„<strong>notifiedFIFO</strong>,è¿™æ˜¯ä¸€ä¸ªçº¿ç¨‹å®‰å…¨çš„FIFOï¼ˆå…ˆè¿›å…ˆå‡ºï¼‰é˜Ÿåˆ—ï¼Œç”¨äºç®¡ç†ä»å·¥ä½œçº¿ç¨‹ï¼ˆçº¿ç¨‹æ± Tpoolä¸­ï¼‰è¿”å›çš„ç»“æœã€‚å·¥ä½œçº¿ç¨‹åœ¨å®Œæˆæ—¶éš™å¤„ç†ä»»åŠ¡åä¼šé€šçŸ¥è¿™ä¸ªFIFI<br>  åˆå§‹åŒ–ä¸€ä¸ªå‘½åä¸ºfreeBlocksçš„notifiedFIFOï¼Œè¿™ä¸ªé˜Ÿåˆ—å°†æŒæœ‰é¢„å…ˆåˆ†é…å¥½çš„æ•°æ®ç»“æ„<strong>nr_rxtx_thread_data_t</strong>,å‡†å¤‡ç”¨äºå¤„ç†å³å°†åˆ°æ¥çš„æ—¶éš™ã€‚ä½¿ç”¨é¢„å…ˆåˆ†é…å—å¯ä»¥é¿å…åœ¨ä¸»å¾ªç¯ä¸­é¢‘ç¹è¿›è¡Œå†…å­˜åˆ†é…å’Œé‡Šæ”¾</li>
<li>åˆå§‹åŒ–å˜é‡ï¼ŒåŒ…æ‹¬sync_running_slç­‰æ ‡è¯†ä½</li>
</ul>
</li>
<li><p>é¢„åˆ†é…å¤„ç†å—ï¼ˆpre-allocate processing blocksï¼‰<br>è¿™é‡Œä½¿ç”¨äº†FIFOä»»åŠ¡é˜Ÿåˆ—ï¼Œå…·ä½“æ¥è¯´æ„å»ºäº†TPoolçº¿ç¨‹æ± ï¼Œç„¶åè¿˜æ„å»ºäº†ä¸€ä¸ªFIFOä»»åŠ¡é˜Ÿåˆ—ï¼Œé˜Ÿåˆ—ä¸­æ¯ä¸ªæˆå‘˜æ˜¯ä¸€ä¸ªä»»åŠ¡ç»“æ„ä½“ï¼Œé‡Œé¢åŒ…å«ä¸€ä¸ªä»»åŠ¡å‡½æ•° + msgdata</p>
<ul>
<li>notifiedFIFO<br>  è¿™ä¸ªé˜Ÿåˆ—æ˜¯ç”¨æ¥ç®¡ç†ä»»åŠ¡é˜Ÿåˆ—</li>
</ul>
  <figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">typedef struct notifiedFIFO&#123;</span><br><span class="line">    /// é˜Ÿåˆ—çš„å°¾éƒ¨ï¼ˆç”¨äºå…¥åˆ—ï¼‰</span><br><span class="line">    notifiedFIFO_elt_t *inF;</span><br><span class="line">    /// é˜Ÿåˆ—çš„å¤´éƒ¨ï¼ˆç”¨äºå‡ºåˆ—ï¼‰</span><br><span class="line">    notifiedFIFO_elt_t *outF;</span><br><span class="line"></span><br><span class="line">&#125; notifiedFIFO_t;</span><br><span class="line"></span><br></pre></td></tr></table></figure>
<ul>
<li>newNotifiedFIFO_elt, notifiedFIFO_eltç»“æ„ä½“æ˜¯notifiedFIFOé˜Ÿåˆ—çš„æˆå‘˜ï¼Œä¹Ÿå°±æ˜¯æ¯ä¸€ä¸ªä»»åŠ¡å…ƒç´ ï¼Œé‡Œé¢åŒ…å«ä»»åŠ¡å‡½æ•°è¿˜æœ‰æ•°æ®ã€‚ä¸ºäº†é˜Ÿåˆ—ä¸­çš„ä¸€ä¸ªå…ƒç´ åˆ†é…å†…å­˜ï¼Œå¹¶ä¸ºå…¶æä¾›ä¸€äº›é¢å¤–çš„åŠŸèƒ½ï¼ˆæ¯”å¦‚å­˜å‚¨msgDataï¼Œå¹¶ç¡®ä¿æ•°æ®å¯¹é½ä»¥ä¾¿SIMDå¤„ç†ï¼‰</li>
</ul>
  <figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">typedef struct notifiedFIFO_elt_s&#123;</span><br><span class="line"></span><br><span class="line">    struct notifiedFIFO_elt_s *next;</span><br><span class="line">    void (*processingFunc) (void *);</span><br><span class="line">    void *msgData;</span><br><span class="line">    ...</span><br><span class="line">&#125; notifiedFIFO_elt_t;</span><br><span class="line"></span><br></pre></td></tr></table></figure>
<ul>
<li>pushNotifiedFIFO_nothreadSafe<br>  è¿™æ®µä»£ç å®ç°çš„æ˜¯ä¸€ä¸ªéçº¿ç¨‹å®‰å…¨çš„é˜Ÿåˆ—æ“ä½œï¼Œå…·ä½“æ˜¯å°†ä¸€ä¸ªæ–°çš„å…ƒç´ ï¼ˆnotifiedFIFO_elt_t *msgï¼‰æ¨å…¥é˜Ÿåˆ—(notifiedFIFO_t *nf)çš„æœ«å°¾ï¼Œå®ƒçš„åŠŸèƒ½æ˜¯å°†<strong>msg</strong>æ·»åŠ åˆ°ä¸€ä¸ªåä¸º<strong>notifiedFIFO_t</strong>çš„é˜Ÿåˆ—ä¸­ï¼Œ å¹¶ç»´æŠ¤é˜Ÿåˆ—çš„å…¥å£å’Œå‡ºå£æŒ‡é’ˆ</li>
</ul>
  <figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">pushNotifiedFIFO_nothreadSafe(notifiedFIFO_t *nf, notifiedFIFO_elt_t *msg)&#123;</span><br><span class="line">    msg-&gt;next = NULL;</span><br><span class="line">    <span class="keyword">if</span>(nf-&gt;outF == NULL)</span><br><span class="line">    nf-&gt;outF = msg;</span><br><span class="line">    <span class="keyword">if</span>(nf-&gt;inF != NULL)</span><br><span class="line">    nf-&gt;inF-&gt;next = msg;</span><br><span class="line">    </span><br><span class="line">    nf-&gt;inF = msg;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<ul>
<li>pushTpool<br>  è¿™ä¸ªå‡½æ•°çš„ç›®çš„æ˜¯å°†ä»»åŠ¡æ·»åŠ åˆ°çº¿ç¨‹æ± ä¸­ï¼Œå¹¶æ ¹æ®çº¿ç¨‹æ± çš„çŠ¶æ€å†³å®šä»»åŠ¡çš„å¤„ç†æ–¹å¼ã€‚å…·ä½“æ¥è¯´ï¼Œå®ƒæœ‰ä¸¤ç§å¤„ç†æ–¹å¼ï¼š1. çº¿ç¨‹æ± å·²æ¿€æ´»æ—¶ï¼Œä»»åŠ¡ä¼šè¢«æ”¾å…¥é˜Ÿåˆ—ï¼Œç­‰å¾…å·¥ä½œçº¿ç¨‹ä»é˜Ÿåˆ—ä¸­å–å‡ºå¹¶æ‰§è¡Œã€‚2. çº¿ç¨‹æ± æœªæ¿€æ´»æ—¶ï¼Œä»»åŠ¡ä¼šåœ¨å½“å‰çº¿ç¨‹ä¸­ç†è§£æ‰§è¡Œã€‚</li>
</ul>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line">static inline void pushTpool(tpool_t *t, notifiedFIFO_elt_t *msg)&#123;</span><br><span class="line">  <span class="keyword">if</span> (t-&gt;measurePerf) msg-&gt;creationTime=rdtsc_oai();</span><br><span class="line">    <span class="keyword">if</span> ( t-&gt;activated)</span><br><span class="line">        pushNotifiedFIFO(&amp;t-&gt;incomingFifo, msg);</span><br><span class="line">    <span class="keyword">else</span> &#123;</span><br><span class="line">        <span class="keyword">if</span> (t-&gt;measurePerf)</span><br><span class="line">         msg-&gt;startProcessingTime=rdtsc_oai();</span><br><span class="line"></span><br><span class="line">            msg-&gt;processingFunc(NotifiedFifoData(msg));</span><br><span class="line"></span><br><span class="line">            <span class="keyword">if</span> (t-&gt;measurePerf)</span><br><span class="line">        msg-&gt;endProcessingTime=rdtsc_oai();</span><br><span class="line"></span><br><span class="line">            <span class="keyword">if</span> (msg-&gt;reponseFifo)</span><br><span class="line">            pushNotifiedFIFO(msg-&gt;reponseFifo, msg);</span><br><span class="line">        &#125;         </span><br><span class="line">    &#125;</span><br></pre></td></tr></table></figure>
<ul>
<li>pullTpool<br>  è¿™ä¸ªå‡½æ•°æ˜¯å°†çº¿ç¨‹æ± å“åº”é˜Ÿåˆ—ä¸­æ‹‰å–ä»»åŠ¡.</li>
</ul>
  <figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">  static inline notifiedFIFO_elt_t *pullTpool(notifiedFIFO_t *responseFifo, tpool_t *t) &#123;</span><br><span class="line">notifiedFIFO_elt_t *msg= pullNotifiedFIFO(responseFifo);</span><br><span class="line"><span class="keyword">if</span> (msg == NULL)</span><br><span class="line">  <span class="built_in">return</span> NULL;</span><br><span class="line">AssertFatal(t-&gt;traceFd, <span class="string">&quot;Thread pool used while not initialized&quot;</span>);</span><br><span class="line"><span class="keyword">if</span> (t-&gt;measurePerf)</span><br><span class="line">  msg-&gt;returnTime=rdtsc_oai();</span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span> (t-&gt;traceFd &gt; 0)</span><br><span class="line">  <span class="keyword">if</span>(write(t-&gt;traceFd, msg, sizeof(*msg)));</span><br><span class="line"></span><br><span class="line"><span class="built_in">return</span> msg;</span><br><span class="line">  &#125;</span><br></pre></td></tr></table></figure></li>
</ul>
<h5 id="Tx-Sync-UE"><a href="#Tx-Sync-UE" class="headerlink" title="Tx(Sync UE)"></a>Tx(Sync UE)</h5><ul>
<li>processSlotTx<br>å¦‚æœsl_mode &#x3D;&#x3D; 2,ä¼šè°ƒç”¨phy_procedures_nrUE_SL_TX</li>
<li>phy_procedures_nrUE_SL_TX(æ—¶éš™æ§åˆ¶æ¥å‘å°„S-SSBå’ŒSCHï¼Œå…·ä½“å¯è§<strong>5gNRSidelink</strong>)<ul>
<li>phy_ssb_slot_allocation_slï¼ˆå‰ææ˜¯sync_ref&#x3D;&#x3D;1ï¼‰<br>  å‘å°„S-SSB</li>
<li>nr-ue-set-slsch(å‰ææ˜¯sync_ref&#x3D;&#x3D;1)<br>  é…ç½®slsch</li>
<li>nr-ue_slsch_tx_procedures(å‰ææ˜¯sync_ref&#x3D;&#x3D;1)<br>  uint32_t sl_bitmap_tx &#x3D; 0x00000;<br>  if(ue-&gt;sync_ref){<br>  sl_bitmap_tx &#x3D; (ue-&gt;is_synchronized_sl &#x3D;&#x3D; 0) ? 0x00001:0x00002;<br>  }<br>  å‘å°„slsch</li>
</ul>
</li>
</ul>
<h5 id="Rx-Nearby-UE"><a href="#Rx-Nearby-UE" class="headerlink" title="Rx(Nearby UE)"></a>Rx(Nearby UE)</h5><ul>
<li>ç¬¬ä¸€æ­¥ï¼Œå…ˆinclude &lt;nr-uesoftmode.h&gt;(é‡Œé¢externäº†nr-ue.cé‡Œçš„å‡½æ•°)</li>
<li>ç¬¬äºŒæ­¥ï¼Œget_optins</li>
<li>init_NR_UE</li>
<li>set_options(åŒ…æ‹¬max_ldpc_iterations, tx_total_gain_dBç­‰ç­‰)</li>
<li>nr_phy_config_request_sl(ä¼ å‚æ¥é…ç½®PHYå±‚çš„UE)<br>é…ç½®nrUE_configï¼ˆç”¨äºå­˜å‚¨é€šè¿‡ FAPI æ¥å£ä¼ é€’ç»™ PHY å±‚çš„é…ç½®ä¿¡æ¯ï¼ˆå¦‚é¢‘ç‡ã€å¸¦å®½ã€SSB é…ç½®ç­‰ï¼‰ã€‚ï¼‰å’Œueï¼Œä¾‹å¦‚é…ç½®nrUE_config-&gt;ssb,<br>  nrUE_config-&gt;carrier_config.sl_frequency<br>  UE-&gt;sync_ref,<br>  UE-&gt;configured<br>  UE-&gt;synchronized</li>
<li>init_nr_ue_varsï¼ˆå…³æ‰MACï¼Œæ— éœ€ç»è¿‡gNBï¼Œå› æ­¤ä¸éœ€è¦ä¼ ç»Ÿçš„MACå±‚å¤„ç†ï¼Œæ¯”å¦‚è°ƒåº¦ã€DCIã€HARQï¼Œåè€Œé€šå¸¸æ˜¯ç›´æ¥ä½¿ç”¨ç‰©ç†å±‚è¿›è¡Œå¹¿æ’­æˆ–ç‚¹å¯¹å¯¹é€šä¿¡ï¼‰</li>
<li>init_openair0</li>
<li>init_NR_UE_threads(nrUE)  <ul>
<li><p>threadCreate</p>
</li>
<li><p>UE_thread_SL(é‡Œé¢æœ‰UE_synchå’ŒprocessSlotRXä¸¤ä¸ªå­çº¿ç¨‹ï¼Œç”±çº¿ç¨‹æ± Tpoolè¿›è¡Œç»´æŠ¤)</p>
</li>
<li><p>processSlotRX</p>
</li>
<li><p>phy_procedures_nrUE_SL_RX<br>è¿™ä¸ªå‡½æ•°ä¸»è¦åˆ¤æ–­ueæ˜¯å¦éœ€è¦æ‰§è¡Œå¯¹rx slotçš„å¤„ç†ï¼Œå…·ä½“å¯è§å¦‚ä¸‹ä»£ç </p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">è¿™é‡Œå¯ä»¥é˜²æ­¢<span class="built_in">sync</span> ueæ¥æ‰§è¡Œè¿™ä¸ªæ¥å—å‡½æ•°ï¼Œå¹¶ä¸”ä½¿å¾—nearbyueåªèƒ½åœ¨åŒæ­¥ä¹‹åå°†is_synchronized_sl=1åæ‰ä¼šæ‰§è¡Œ.</span><br><span class="line"><span class="keyword">if</span>(ue-&gt;is_synchronized_sl == 0)</span><br><span class="line">  <span class="built_in">return</span> (0);</span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span>ï¼ˆue-&gt;sync_ref == 0ï¼‰  </span><br><span class="line">uint32_t sl_bitmap_rx = ue-&gt;sync_ref  ? 0x00001 : 0x00002;</span><br><span class="line"><span class="keyword">if</span>(((sl_bitmap_rx = ue-&gt;sync_ref?) &amp; <span class="number">1</span> ) == <span class="number">0</span> )</span><br><span class="line">return(<span class="number">0</span>);</span><br></pre></td></tr></table></figure>

<p>åœ¨æ‰¾åˆ°æ­£ç¡®çš„frameå’Œslotåï¼Œä¼šæ‰§è¡Œnr_ue_slsch_rx_procedureså‡½æ•°ï¼Œè¿™ä¸ªå‡½æ•°ä½“å†…ä¼šå…·ä½“å¯¹PSSCHè¿›è¡Œå¤„ç†ï¼ŒåŒ…æ‹¬demappingå’Œdescramblingä»¥åŠdecoding(nr_slsch_decoding)ï¼Œè¿™ä¸ªdocodingåŒ…æ‹¬å¯¹SLSCHå’ŒSCI2çš„è§£ç <br>ä¸ºäº†è¡¨ç¤ºæ¯ä¸€ä¸ªæ”¶åˆ°çš„çš„frameï¼Œæˆ‘ä»¬åœ¨nr_slsch_decodingå‡½æ•°é‡Œé¢LOG_I(frame,slot), beacuse each frame received will go through the process in nr_slsch_decoding, be careful that not each frame received will go through the <strong>validate_rx_str</strong> function, beacuse it should satisfy a prerequirement (destination is matched). </p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">/// æ­£å¸¸æƒ…å†µä¸‹çš„LOG_I</span><br><span class="line">[NR_PHY]In nr_ue_sl_pssch_rsrp_measurements: </span><br><span class="line">[NR_PHY]SLSCH received ok</span><br><span class="line">[PHY] Frame:..., Slot:...</span><br><span class="line">[NR_PHY] Received your text!...</span><br><span class="line">[PHY] PSSCH <span class="built_in">test</span> ...f</span><br></pre></td></tr></table></figure>
<p>å…¶ä¸­SLSCH received okä¸ä¸€å®šæ‰§è¡Œ(it is in nr_ue_sl_postDocode function after polar_decoded_int16 and it has a prerequisited that all segments are done), and these two funcations are all in the <strong>nr_slsch_decoding</strong> function.<br>Received your text is in the <strong>valdiate_rx_str</strong> function, and has a prerequisit that the dest is matched.</p>
<p>openair1&#x2F;SCHED_NR_UE&#x2F;phy_procedures_nr_ue.cä¸­,è°ƒç”¨nr_ue_slsch_rx_proceduresæ¥return ret</p>
<ul>
<li>nr_ue_slsch_rx_procedures(åœ¨openair1&#x2F;PHY&#x2F;NR_UE_TRANSPORT&#x2F;nl_slsch_ue.c)<ul>
<li>nr_slsch_decoding(åœ¨nr_ue_slsch_rx_proceduresä¸­ï¼Œdecodingçš„éƒ¨åˆ†æ˜¯sci2éƒ¨åˆ† <strong>return ret</strong>)<ul>
<li>polar_decoder_int16(åœ¨nr_slsch_decodingå‡½æ•°ä¸­)</li>
<li>LOG_E(NR_PHY, â€œpolar_decoder_int16 failed with ret %d for slot %d\nâ€, decoder_state, nr_slot_rx);</li>
<li>return ret</li>
</ul>
</li>
</ul>
</li>
<li>validate_rx_payload(log(â€œPSSCH testâ€))</li>
</ul>
</li>
</ul>
</li>
</ul>
<h2 id="ci-scriptéƒ¨åˆ†"><a href="#ci-scriptéƒ¨åˆ†" class="headerlink" title="ci-scriptéƒ¨åˆ†"></a>ci-scriptéƒ¨åˆ†</h2><h3 id="sl-check-log-py"><a href="#sl-check-log-py" class="headerlink" title="sl_check_log.py"></a>sl_check_log.py</h3><p>æ ¹æ®nearby.logä¸­â€PSSCH testâ€å­—æ®µè¿›è¡Œæ£€æŸ¥ï¼Œå°†â€PSSCH test OK with 1 &#x2F; 2 &#x3D; 0.50â€ä¸­çš„1æ”¾å…¥nb_decoded,å°†2æ”¾å…¥total_rx, ç”±äºæ˜¯forå¾ªç¯ä¸€ç›´æ£€æŸ¥nearby.logï¼Œè€Œä¸”æ¯ä¸ªå¾ªç¯å†…ä¼šç›´æ¥æŠŠintå‹æ•°æ®è¦†ç›–ç»™nb_decoded,â€nb_decoded &#x3D; int(field[-5])â€,å› æ­¤ä¼šæŠŠlogé‡Œçš„æœ€åä¸€æ¡æ•°æ®ä¼ ç»™nb_decodedã€‚åŒæ—¶nb_decoded_listä¹Ÿæ˜¯åªæœ€åä¸€æ¡æ•°æ®çš„listï¼Œä¾‹å¦‚nb_decoded_list&#x3D;[1]ï¼ŒåŒç†total_rx_list&#x3D;[103]</p>

      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="en">
    <link itemprop="mainEntityOfPage" href="https://hechenyi.github.io/2025/04/22/MATLAB%E6%B3%A2%E5%BD%A2%E7%94%9F%E6%88%90/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="John Doe">
      <meta itemprop="description" content="">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Hexo">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/2025/04/22/MATLAB%E6%B3%A2%E5%BD%A2%E7%94%9F%E6%88%90/" class="post-title-link" itemprop="url">MATLABæ³¢å½¢ç”Ÿæˆ</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">Posted on</span>

              <time title="Created: 2025-04-22 03:14:52" itemprop="dateCreated datePublished" datetime="2025-04-22T03:14:52+08:00">2025-04-22</time>
            </span>
              <span class="post-meta-item">
                <span class="post-meta-item-icon">
                  <i class="far fa-calendar-check"></i>
                </span>
                <span class="post-meta-item-text">Edited on</span>
                <time title="Modified: 2025-04-24 18:56:12" itemprop="dateModified" datetime="2025-04-24T18:56:12+08:00">2025-04-24</time>
              </span>
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-folder"></i>
              </span>
              <span class="post-meta-item-text">In</span>
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/MATLAB/" itemprop="url" rel="index"><span itemprop="name">MATLAB</span></a>
                </span>
            </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      
          <h2 id="Wireless-Waveform-Generator"><a href="#Wireless-Waveform-Generator" class="headerlink" title="Wireless Waveform Generator"></a>Wireless Waveform Generator</h2><h3 id="OFDM-Waveform-Configuration"><a href="#OFDM-Waveform-Configuration" class="headerlink" title="OFDM Waveform Configuration"></a>OFDM Waveform Configuration</h3><p>éœ€è¦é…ç½®FFT Lengthï¼ŒGuard band subcarrierï¼ŒCyclic prefix lengthsï¼ŒOFDM symbolsï¼ŒTransmit antennasï¼Œå­è½½æ³¢é—´è·ç­‰å‚æ•°ï¼Œå¦å¤–å¯ä»¥é…ç½®Pilotï¼Œå¹¶å¯ä»¥é€‰å®šPilotåœ¨å­è½½æ³¢ä¸­çš„ä½ç½®å·²ç»å®ƒçš„è¾“å…¥çŸ©é˜µã€‚å¦å¤–OFDMéƒ½æ˜¯å’ŒQAMé…åˆä½¿ç”¨ï¼Œå¯¹äºQAMçš„é…ç½®ï¼Œå¯ä»¥è°ƒæ•´å®ƒçš„Modulation orderï¼ŒSymbol mappingï¼Œbit sourceç­‰å‚æ•°</p>
<img src="/images/OFDMGenerator.png">
ä¸‹é¢æ˜¯å¯¼å‡ºçš„matlabä»£ç 

<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br></pre></td><td class="code"><pre><span class="line">% Generated by MATLAB(R) 24.2 (R2024b) and Communications Toolbox 24.2 (R2024b).</span><br><span class="line">% Generated on: 21-Apr-2025 20:59:07</span><br><span class="line"></span><br><span class="line">%% Generating OFDM waveform</span><br><span class="line">% OFDM configuration</span><br><span class="line">ofdmMod = comm.OFDMModulator(<span class="string">&#x27;FFTLength&#x27;</span>, 128, ...</span><br><span class="line">    <span class="string">&#x27;NumGuardBandCarriers&#x27;</span>, [6;5], ...</span><br><span class="line">    <span class="string">&#x27;InsertDCNull&#x27;</span>, <span class="literal">false</span>, ...</span><br><span class="line">    <span class="string">&#x27;CyclicPrefixLength&#x27;</span>, 16, ...</span><br><span class="line">    <span class="string">&#x27;Windowing&#x27;</span>, <span class="literal">false</span>, ...</span><br><span class="line">    <span class="string">&#x27;OversamplingFactor&#x27;</span>, 1, ...</span><br><span class="line">    <span class="string">&#x27;NumSymbols&#x27;</span>, 19, ...</span><br><span class="line">    <span class="string">&#x27;NumTransmitAntennas&#x27;</span>, 1, ...</span><br><span class="line">    <span class="string">&#x27;PilotInputPort&#x27;</span>, <span class="literal">true</span>, ...</span><br><span class="line">    <span class="string">&#x27;PilotCarrierIndices&#x27;</span>, [12;26;40;54]);</span><br><span class="line"></span><br><span class="line">scs = 1000000;</span><br><span class="line">M = 16; 	 % Modulation order</span><br><span class="line">% input bit <span class="built_in">source</span>:</span><br><span class="line">pn = comm.PNSequence(<span class="string">&#x27;Polynomial&#x27;</span>, <span class="string">&#x27;x9+x5+1&#x27;</span>, <span class="string">&#x27;InitialConditions&#x27;</span>, [zeros(1, 8) 1]);</span><br><span class="line">pn.SamplesPerFrame = 8588;</span><br><span class="line"><span class="keyword">in</span> = [pn()];</span><br><span class="line"></span><br><span class="line">dataInput = qammod(<span class="keyword">in</span>, M, <span class="string">&#x27;bin&#x27;</span>, <span class="string">&#x27;InputType&#x27;</span>, <span class="string">&#x27;bit&#x27;</span>, <span class="string">&#x27;UnitAveragePower&#x27;</span>, <span class="literal">true</span>);</span><br><span class="line">ofdmInfo = info(ofdmMod);</span><br><span class="line">ofdmSize = ofdmInfo.DataInputSize;</span><br><span class="line">dataInput = reshape(dataInput, ofdmSize);</span><br><span class="line"></span><br><span class="line">% Generation</span><br><span class="line">pilotInput = ones(4, 19, 1);</span><br><span class="line">waveform = ofdmMod(dataInput, pilotInput);</span><br><span class="line"></span><br><span class="line">Fs = ofdmMod.FFTLength * scs * ofdmMod.OversamplingFactor; 								 % Specify the sample rate of the waveform <span class="keyword">in</span> Hz</span><br><span class="line"></span><br><span class="line">%% Visualize</span><br><span class="line">% Spectrum Analyzer</span><br><span class="line">spectrum = spectrumAnalyzer(<span class="string">&#x27;SampleRate&#x27;</span>, Fs);</span><br><span class="line">spectrum(waveform);</span><br><span class="line">release(spectrum);</span><br><span class="line"></span><br><span class="line">% Constellation Diagram</span><br><span class="line">constel = comm.ConstellationDiagram(<span class="string">&#x27;ColorFading&#x27;</span>, <span class="literal">true</span>, ...</span><br><span class="line">    <span class="string">&#x27;ShowTrajectory&#x27;</span>, 0, ...</span><br><span class="line">    <span class="string">&#x27;ShowReferenceConstellation&#x27;</span>, <span class="literal">false</span>);</span><br><span class="line">constel(dataInput(:));</span><br><span class="line">release(constel);</span><br><span class="line"></span><br><span class="line">% OFDM Subcarrier Mapping</span><br><span class="line">showResourceMapping(ofdmMod);</span><br></pre></td></tr></table></figure>

<h3 id="5gNRUplink"><a href="#5gNRUplink" class="headerlink" title="5gNRUplink"></a>5gNRUplink</h3><p>éœ€è¦é…ç½®Mainï¼ˆSCS Carriersï¼Œ Bandwdith Partsï¼Œ Channel Bandwidthï¼ŒSubFramesç­‰ç­‰ï¼‰ï¼ŒPUSCHï¼ŒPUCCHå’ŒSRS<br><img src="/images/5gNRUplinkGenerator.png"></p>
<p>è¿™é‡Œä¸éœ€è¦åƒOFDM Generatorä¸€æ ·é…ç½®FFTï¼Œå› ä¸ºå­è½½æ³¢æ•°ç›®å¯ä»¥æ¨ç®—å‡ºæ¥ã€‚<br>PUSCHåœ¨é…ç½®æ—¶éœ€è¦æ³¨æ„symbol lengthï¼Œç”¨æ¥è¡¨ç¤ºåœ¨ä¸€ä¸ªslotå æ®çš„å¤§å°ï¼Œå¦‚æœsymbol lengthæ˜¯7ï¼Œé‚£ä¹ˆåªæœ‰ä¸€ä¸ªslotçš„ä¸€åŠï¼Œå› æ­¤Resource Gridå¦‚ä¸‹<br><img src="/images/ResourceGrid_1.png"><br>è¿˜å¯ä»¥æ”¹å˜SlotAllocationå’ŒPeriodï¼Œç”¨æ¥æ”¹å˜å æ®çš„slotåœ¨æ‰€æœ‰slotä¸­çš„ä½ç½®<br><img src="/images/ResourceGrid_2.png"><br>å¯¹äºPUCCHï¼Œå…¶å¯ä»¥å’ŒPUSCHåœ¨æ—¶åŸŸï¼ˆä¹Ÿå°±æ˜¯slotï¼‰æœ‰é‡åˆï¼Œä½†æ˜¯ä¸èƒ½åœ¨RBä¸Šæœ‰é‡åˆï¼Œè¿™é‡Œä¹Ÿå¯ä»¥ä½“ç°OFDMçš„æ¦‚å¿µï¼Œä¹Ÿå°±æ˜¯è¯´é¢‘ç‡æ˜¯å¤ç”¨çš„</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br><span class="line">151</span><br><span class="line">152</span><br><span class="line">153</span><br><span class="line">154</span><br><span class="line">155</span><br><span class="line">156</span><br><span class="line">157</span><br><span class="line">158</span><br><span class="line">159</span><br><span class="line">160</span><br><span class="line">161</span><br><span class="line">162</span><br><span class="line">163</span><br><span class="line">164</span><br><span class="line">165</span><br><span class="line">166</span><br><span class="line">167</span><br><span class="line">168</span><br><span class="line">169</span><br><span class="line">170</span><br><span class="line">171</span><br><span class="line">172</span><br><span class="line">173</span><br><span class="line">174</span><br><span class="line">175</span><br><span class="line">176</span><br><span class="line">177</span><br><span class="line">178</span><br><span class="line">179</span><br><span class="line">180</span><br><span class="line">181</span><br><span class="line">182</span><br><span class="line">183</span><br><span class="line">184</span><br><span class="line">185</span><br><span class="line">186</span><br><span class="line">187</span><br><span class="line">188</span><br><span class="line">189</span><br><span class="line">190</span><br><span class="line">191</span><br><span class="line">192</span><br><span class="line">193</span><br><span class="line">194</span><br><span class="line">195</span><br><span class="line">196</span><br><span class="line">197</span><br><span class="line">198</span><br><span class="line">199</span><br><span class="line">200</span><br><span class="line">201</span><br><span class="line">202</span><br><span class="line">203</span><br><span class="line">204</span><br></pre></td><td class="code"><pre><span class="line">% Generated by MATLAB(R) 24.2 (R2024b) and 5G Toolbox 24.2 (R2024b).</span><br><span class="line">% Generated on: 21-Apr-2025 22:26:35</span><br><span class="line"></span><br><span class="line">%% Generating Uplink waveform</span><br><span class="line">% Uplink configuration</span><br><span class="line">cfgUL = nrULCarrierConfig;</span><br><span class="line">cfgUL.Label = <span class="string">&#x27;Carrier1&#x27;</span>;</span><br><span class="line">cfgUL.FrequencyRange = <span class="string">&#x27;FR1&#x27;</span>;</span><br><span class="line">cfgUL.ChannelBandwidth = 60;</span><br><span class="line">cfgUL.NCellID = 1;</span><br><span class="line">cfgUL.NumSubframes = 1;</span><br><span class="line">cfgUL.InitialNSubframe = 0;</span><br><span class="line">cfgUL.WindowingPercent = 0;</span><br><span class="line">cfgUL.SampleRate = [];</span><br><span class="line">cfgUL.CarrierFrequency = 0;</span><br><span class="line"></span><br><span class="line">%% SCS specific carriers</span><br><span class="line">scscarrier = nrSCSCarrierConfig;</span><br><span class="line">scscarrier.SubcarrierSpacing = 15;</span><br><span class="line">scscarrier.NSizeGrid = 270;</span><br><span class="line">scscarrier.NStartGrid = 3;</span><br><span class="line"></span><br><span class="line">cfgUL.SCSCarriers = &#123;scscarrier&#125;;</span><br><span class="line"></span><br><span class="line">%% Bandwidth Parts</span><br><span class="line">bwp = nrWavegenBWPConfig;</span><br><span class="line">bwp.BandwidthPartID = 1;</span><br><span class="line">bwp.Label = <span class="string">&#x27;BWP1&#x27;</span>;</span><br><span class="line">bwp.SubcarrierSpacing = 15;</span><br><span class="line">bwp.CyclicPrefix = <span class="string">&#x27;normal&#x27;</span>;</span><br><span class="line">bwp.NSizeBWP = 270;</span><br><span class="line">bwp.NStartBWP = 3;</span><br><span class="line"></span><br><span class="line">cfgUL.BandwidthParts = &#123;bwp&#125;;</span><br><span class="line"></span><br><span class="line">%% Intracell Guard Bands Configuration</span><br><span class="line">gb = nrIntraCellGuardBandsConfig;</span><br><span class="line">gb.GuardBandSize = zeros(0,2);</span><br><span class="line">gb.SubcarrierSpacing = 15;</span><br><span class="line"></span><br><span class="line">cfgUL.IntraCellGuardBands = &#123;gb&#125;;</span><br><span class="line"></span><br><span class="line">%% PUSCH Instances Configuration</span><br><span class="line">pusch = nrWavegenPUSCHConfig;</span><br><span class="line">pusch.Enable = <span class="literal">true</span>;</span><br><span class="line">pusch.Label = <span class="string">&#x27;PUSCH1&#x27;</span>;</span><br><span class="line">pusch.Power = 0;</span><br><span class="line">pusch.BandwidthPartID = 1;</span><br><span class="line">pusch.Modulation = <span class="string">&#x27;64QAM&#x27;</span>;</span><br><span class="line">pusch.NumLayers = 1;</span><br><span class="line">pusch.MappingType = <span class="string">&#x27;A&#x27;</span>;</span><br><span class="line">pusch.SymbolAllocation = [0 4];</span><br><span class="line">pusch.SlotAllocation = 0:8;</span><br><span class="line">pusch.Period = 10;</span><br><span class="line">pusch.PRBSet = 0:269;</span><br><span class="line">pusch.TransformPrecoding = <span class="literal">false</span>;</span><br><span class="line">pusch.TransmissionScheme = <span class="string">&#x27;nonCodebook&#x27;</span>;</span><br><span class="line">pusch.NumAntennaPorts = 1;</span><br><span class="line">pusch.TPMI = 0;</span><br><span class="line">pusch.CodebookType = <span class="string">&#x27;codebook1_ng1n4n1&#x27;</span>;</span><br><span class="line">pusch.FrequencyHopping = <span class="string">&#x27;neither&#x27;</span>;</span><br><span class="line">pusch.SecondHopStartPRB = 1;</span><br><span class="line">pusch.Interlacing = <span class="literal">false</span>;</span><br><span class="line">pusch.RBSetIndex = 0;</span><br><span class="line">pusch.InterlaceIndex = 0;</span><br><span class="line">pusch.NID = [];</span><br><span class="line">pusch.RNTI = 1;</span><br><span class="line">pusch.NRAPID = [];</span><br><span class="line">pusch.Coding = <span class="literal">true</span>;</span><br><span class="line">pusch.TargetCodeRate = 0.513671875;</span><br><span class="line">pusch.XOverhead = 0;</span><br><span class="line">pusch.LimitedBufferRateMatching = <span class="literal">false</span>;</span><br><span class="line">pusch.MaxNumLayers = 8;</span><br><span class="line">pusch.MCSTable = <span class="string">&#x27;qam256&#x27;</span>;</span><br><span class="line">pusch.RVSequence = [0 2 3 1];</span><br><span class="line">pusch.DataSource = <span class="string">&#x27;PN9-ITU&#x27;</span>;</span><br><span class="line">pusch.EnableACK = <span class="literal">false</span>;</span><br><span class="line">pusch.NumACKBits = 10;</span><br><span class="line">pusch.BetaOffsetACK = 20;</span><br><span class="line">pusch.DataSourceACK = <span class="string">&#x27;PN9-ITU&#x27;</span>;</span><br><span class="line">pusch.EnableCSI1 = <span class="literal">false</span>;</span><br><span class="line">pusch.NumCSI1Bits = 10;</span><br><span class="line">pusch.BetaOffsetCSI1 = 6.25;</span><br><span class="line">pusch.DataSourceCSI1 = <span class="string">&#x27;PN9-ITU&#x27;</span>;</span><br><span class="line">pusch.EnableCSI2 = <span class="literal">false</span>;</span><br><span class="line">pusch.NumCSI2Bits = 10;</span><br><span class="line">pusch.BetaOffsetCSI2 = 6.25;</span><br><span class="line">pusch.DataSourceCSI2 = <span class="string">&#x27;PN9-ITU&#x27;</span>;</span><br><span class="line">pusch.EnableCGUCI = <span class="literal">false</span>;</span><br><span class="line">pusch.NumCGUCIBits = 7;</span><br><span class="line">pusch.BetaOffsetCGUCI = 20;</span><br><span class="line">pusch.DataSourceCGUCI = <span class="string">&#x27;PN9-ITU&#x27;</span>;</span><br><span class="line">pusch.EnableULSCH = <span class="literal">true</span>;</span><br><span class="line">pusch.UCIScaling = 1;</span><br><span class="line">pusch.DMRSPower = 0;</span><br><span class="line">pusch.EnablePTRS = <span class="literal">false</span>;</span><br><span class="line">pusch.PTRSPower = 0;</span><br><span class="line"></span><br><span class="line">% PUSCH DM-RS</span><br><span class="line">puschDMRS = nrPUSCHDMRSConfig;</span><br><span class="line">puschDMRS.DMRSConfigurationType = 1;</span><br><span class="line">puschDMRS.DMRSTypeAPosition = 2;</span><br><span class="line">puschDMRS.DMRSAdditionalPosition = 0;</span><br><span class="line">puschDMRS.DMRSLength = 1;</span><br><span class="line">puschDMRS.CustomSymbolSet = [];</span><br><span class="line">puschDMRS.DMRSPortSet = [];</span><br><span class="line">puschDMRS.NIDNSCID = [];</span><br><span class="line">puschDMRS.NSCID = 0;</span><br><span class="line">puschDMRS.GroupHopping = <span class="literal">false</span>;</span><br><span class="line">puschDMRS.SequenceHopping = <span class="literal">false</span>;</span><br><span class="line">puschDMRS.NRSID = [];</span><br><span class="line">puschDMRS.NumCDMGroupsWithoutData = 2;</span><br><span class="line">puschDMRS.DMRSUplinkR16 = <span class="literal">false</span>;</span><br><span class="line">puschDMRS.DMRSUplinkTransformPrecodingR16 = <span class="literal">false</span>;</span><br><span class="line">puschDMRS.DMRSEnhancedR18 = <span class="literal">false</span>;</span><br><span class="line"></span><br><span class="line">pusch.DMRS = puschDMRS;</span><br><span class="line"></span><br><span class="line">% PUSCH PT-RS</span><br><span class="line">puschPTRS = nrPUSCHPTRSConfig;</span><br><span class="line">puschPTRS.TimeDensity = 1;</span><br><span class="line">puschPTRS.FrequencyDensity = 2;</span><br><span class="line">puschPTRS.NumPTRSSamples = 2;</span><br><span class="line">puschPTRS.NumPTRSGroups = 2;</span><br><span class="line">puschPTRS.REOffset = <span class="string">&#x27;00&#x27;</span>;</span><br><span class="line">puschPTRS.PTRSPortSet = [];</span><br><span class="line">puschPTRS.NID = [];</span><br><span class="line"></span><br><span class="line">pusch.PTRS = puschPTRS;</span><br><span class="line"></span><br><span class="line">cfgUL.PUSCH = &#123;pusch&#125;;</span><br><span class="line"></span><br><span class="line">%% PUCCH Instances Configuration</span><br><span class="line">pucch = nrWavegenPUCCH0Config;</span><br><span class="line">pucch.Enable = <span class="literal">false</span>;</span><br><span class="line">pucch.Label = <span class="string">&#x27;PUCCH1&#x27;</span>;</span><br><span class="line">pucch.Power = 0;</span><br><span class="line">pucch.BandwidthPartID = 1;</span><br><span class="line">pucch.SymbolAllocation = [0 2];</span><br><span class="line">pucch.SlotAllocation = 0:7;</span><br><span class="line">pucch.Period = 10;</span><br><span class="line">pucch.PRBSet = 12:30;</span><br><span class="line">pucch.FrequencyHopping = <span class="string">&#x27;neither&#x27;</span>;</span><br><span class="line">pucch.SecondHopStartPRB = 1;</span><br><span class="line">pucch.Interlacing = <span class="literal">false</span>;</span><br><span class="line">pucch.RBSetIndex = 0;</span><br><span class="line">pucch.InterlaceIndex = 0;</span><br><span class="line">pucch.GroupHopping = <span class="string">&#x27;neither&#x27;</span>;</span><br><span class="line">pucch.HoppingID = [];</span><br><span class="line">pucch.InitialCyclicShift = 0;</span><br><span class="line">pucch.NumUCIBits = 1;</span><br><span class="line">pucch.DataSourceUCI = <span class="string">&#x27;PN9-ITU&#x27;</span>;</span><br><span class="line">pucch.DataSourceSR = 0;</span><br><span class="line"></span><br><span class="line">cfgUL.PUCCH = &#123;pucch&#125;;</span><br><span class="line"></span><br><span class="line">%% SRS Instances Configuration</span><br><span class="line">srs = nrWavegenSRSConfig;</span><br><span class="line">srs.Enable = <span class="literal">false</span>;</span><br><span class="line">srs.Label = <span class="string">&#x27;SRS1&#x27;</span>;</span><br><span class="line">srs.Power = 0;</span><br><span class="line">srs.BandwidthPartID = 1;</span><br><span class="line">srs.NumSRSPorts = 1;</span><br><span class="line">srs.SymbolStart = 13;</span><br><span class="line">srs.NumSRSSymbols = 1;</span><br><span class="line">srs.SlotAllocation = 0:9;</span><br><span class="line">srs.Period = 10;</span><br><span class="line">srs.FrequencyStart = 0;</span><br><span class="line">srs.NRRC = 0;</span><br><span class="line">srs.CSRS = 0;</span><br><span class="line">srs.BSRS = 0;</span><br><span class="line">srs.BHop = 0;</span><br><span class="line">srs.Repetition = 1;</span><br><span class="line">srs.KTC = 2;</span><br><span class="line">srs.KBarTC = 0;</span><br><span class="line">srs.FrequencyScalingFactor = 1;</span><br><span class="line">srs.StartRBIndex = 0;</span><br><span class="line">srs.EnableStartRBHopping = <span class="literal">false</span>;</span><br><span class="line">srs.CyclicShift = 0;</span><br><span class="line">srs.GroupSeqHopping = <span class="string">&#x27;neither&#x27;</span>;</span><br><span class="line">srs.NSRSID = 0;</span><br><span class="line">srs.SRSPositioning = <span class="literal">false</span>;</span><br><span class="line">srs.EnableEightPortTDM = <span class="literal">false</span>;</span><br><span class="line">srs.CyclicShiftHopping = <span class="literal">false</span>;</span><br><span class="line">srs.CyclicShiftHoppingID = 0;</span><br><span class="line">srs.CyclicShiftHoppingSubset = [];</span><br><span class="line">srs.HoppingFinerGranularity = <span class="literal">false</span>;</span><br><span class="line">srs.CombOffsetHopping = <span class="literal">false</span>;</span><br><span class="line">srs.CombOffsetHoppingID = 0;</span><br><span class="line">srs.CombOffsetHoppingSubset = [];</span><br><span class="line">srs.HoppingWithRepetition = <span class="literal">false</span>;</span><br><span class="line"></span><br><span class="line">cfgUL.SRS = &#123;srs&#125;;</span><br><span class="line"></span><br><span class="line">% Generation</span><br><span class="line">[waveform,info] = nrWaveformGenerator(cfgUL);</span><br><span class="line"></span><br><span class="line">Fs = info.ResourceGrids(1).Info.SampleRate; 								 % Specify the sample rate of the waveform <span class="keyword">in</span> Hz</span><br><span class="line"></span><br><span class="line">%% Visualize</span><br><span class="line">% Spectrum Analyzer</span><br><span class="line">spectrum = spectrumAnalyzer(<span class="string">&#x27;SampleRate&#x27;</span>, Fs);</span><br><span class="line">spectrum(waveform);</span><br><span class="line">release(spectrum);</span><br></pre></td></tr></table></figure>

<p>æƒ³ä½ äº†ï¼Œè€è”¡</p>

      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="en">
    <link itemprop="mainEntityOfPage" href="https://hechenyi.github.io/2025/04/21/OFDM/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="John Doe">
      <meta itemprop="description" content="">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Hexo">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/2025/04/21/OFDM/" class="post-title-link" itemprop="url">OFDM</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">Posted on</span>

              <time title="Created: 2025-04-21 20:50:57" itemprop="dateCreated datePublished" datetime="2025-04-21T20:50:57+08:00">2025-04-21</time>
            </span>
              <span class="post-meta-item">
                <span class="post-meta-item-icon">
                  <i class="far fa-calendar-check"></i>
                </span>
                <span class="post-meta-item-text">Edited on</span>
                <time title="Modified: 2025-06-26 23:18:18" itemprop="dateModified" datetime="2025-06-26T23:18:18+08:00">2025-06-26</time>
              </span>
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-folder"></i>
              </span>
              <span class="post-meta-item-text">In</span>
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/5G/" itemprop="url" rel="index"><span itemprop="name">5G</span></a>
                </span>
            </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      
          <h2 id="Basic-Concept"><a href="#Basic-Concept" class="headerlink" title="Basic Concept"></a>Basic Concept</h2><p>åœ¨OFDMä¸­ï¼Œä¸€ä¸ªOFDMç¬¦å·å°±æ˜¯å¤šä¸ªå­è½½æ³¢çš„ç»“åˆï¼Œæ¯ä¸ªå­è½½æ³¢æ‰¿è½½ä¸€ä¸ªè°ƒåˆ¶ç¬¦å·ï¼ˆå¦‚QPSKã€ 16QAMã€ 64QAMç­‰ï¼‰<br>æ‰€ä»¥ä¸€ä¸ªOFDMç¬¦å·åœ¨é¢‘åŸŸä¸­ä¼šæœ‰å¤šä¸ªè°ƒåˆ¶ç¬¦å·ï¼ŒIFFTå°±æ˜¯æŠŠè¿™äº›è°ƒåˆ¶ç¬¦å·è½¬æ¢æˆæ—¶åŸŸçš„è¿ç»­ç¬¦å·ï¼Œå˜æˆä¸€ä¸ªOFDMç¬¦å·ã€‚<br>æ•´ä½“çš„è¿‡ç¨‹æ˜¯modData -&gt; æ’å…¥pilot -&gt; æ’å…¥nullï¼ˆæ¸…é›¶æ— æ•ˆå­è½½æ³¢ï¼‰-&gt; å­è½½æ³¢åˆ†é…ä¸æ˜ å°„ -&gt; IFFT -&gt; åŠ CP -&gt; ofdmDataOut</p>
<p>å…¶ä¸­å­è½½æ³¢åˆ†é…æ˜¯æŒ‡OFDMå°†æ•´ä¸ªé¢‘è°±åˆ†æˆè‹¥å¹²ä¸ªæ­£äº¤çš„å­è½½æ³¢ï¼Œæ¯ä¸ªè°ƒåˆ¶ç¬¦å·ä¼šè¢«æ˜ å°„åˆ°ä¸€ä¸ªå­è½½æ³¢ä¸Šã€‚</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">s(t_m) = \sum_&#123;n=0&#125;^&#123;N-1&#125;[I_ncosw_nt_m - Q_n sinw_nt_m] = Re \sum_&#123;n=0&#125;^&#123;N-1&#125;[(I_n + jQ_n)e^&#123;jw_nt_m&#125;]</span><br></pre></td></tr></table></figure>
<p>å…¶ä¸­$\sum_{n&#x3D;0}^{N-1}[(I_n + jQ_n)e^{jw_nt_m}]$æ˜¯IDFTçš„å½¢å¼ï¼Œå†ç»“åˆIFFTå› æ­¤å¯å°†ä¸Šå¼å­è½¬å˜ä¸ºï¼š  </p>
<p>$Re[IFFT(I_n + jQ_n)]$  </p>
<p>å› æ­¤å¯å°†$Z_n &#x3D; I_n + jQ_n$ç†è§£ä¸ºOFDMä¿¡å·åœ¨DFTçš„é¢‘è°±ä¸Šçš„ç¦»æ•£ç‚¹ã€‚ä»ä¸Šè¿°è¡¨è¾¾å¼å®ç°äº†æ¯ä¸ªç¬¦å·ä¹˜ä»¥ä¸€ä¸ªå¤æŒ‡æ•°ä¿¡å·ï¼ˆé¢‘ç‡ä¸ºè¯¥å­è½½æ³¢çš„é¢‘ç‡ï¼‰è¿›è¡Œæ˜ å°„ã€‚ä¹Ÿå°±æ˜¯è¯´ï¼Œæ¯ä¸ªç¬¦å·éƒ½ä¼šä¸ä¸€ä¸ªæ­£å¼¦æˆ–ä½™å¼¦æ³¢ç›¸ä¹˜ï¼Œå¹¶æ ¹æ®å­è½½æ³¢çš„é¢‘ç‡è¿›è¡Œåç§»ã€‚</p>
<p>IFFT: å¯¹è°ƒåˆ¶åçš„ç¬¦å·è¿›è¡Œ é€†ç¦»æ•£å‚…é‡Œå¶å˜æ¢ï¼ˆIFFTï¼‰ï¼Œå°†é¢‘åŸŸä¿¡å·è½¬æ¢ä¸ºæ—¶åŸŸä¿¡å·ã€‚IFFT æ˜¯å°†å„ä¸ªå­è½½æ³¢çš„ä¿¡å·åˆæˆåœ¨ä¸€èµ·çš„æ­¥éª¤ï¼Œåœ¨è¿™ä¸ªæ­¥éª¤ä¹‹åï¼Œä¿¡å·ç”±é¢‘åŸŸè½¬ä¸ºæ—¶åŸŸã€‚<br>åœ¨matlabä»¿çœŸä¸­ï¼Œdataä¸ºåŸå§‹å¤æ•°å¯¹ï¼ŒX_freqä¸ºé¢‘åŸŸä¿¡å·ï¼Œzeros(FFT_size,1),è£…æœ‰dataï¼Œè¿™æ ·å°±å®ç°äº†å°†åŸå§‹æ•°æ®åŠ è½½åˆ°å­è½½æ³¢ä¸Šï¼Œç„¶åX_time &#x3D; ifft(ifftshift(X_freq), N)</p>
<h2 id="OFDM-å­è½½æ³¢æ—¶åŸŸä¸é¢‘åŸŸç‰¹æ€§è¯´æ˜"><a href="#OFDM-å­è½½æ³¢æ—¶åŸŸä¸é¢‘åŸŸç‰¹æ€§è¯´æ˜" class="headerlink" title="OFDM å­è½½æ³¢æ—¶åŸŸä¸é¢‘åŸŸç‰¹æ€§è¯´æ˜"></a>OFDM å­è½½æ³¢æ—¶åŸŸä¸é¢‘åŸŸç‰¹æ€§è¯´æ˜</h2><h3 id="OFDM-å­è½½æ³¢çš„é¢‘åŸŸè¡¨ç¤º"><a href="#OFDM-å­è½½æ³¢çš„é¢‘åŸŸè¡¨ç¤º" class="headerlink" title="OFDM å­è½½æ³¢çš„é¢‘åŸŸè¡¨ç¤º"></a>OFDM å­è½½æ³¢çš„é¢‘åŸŸè¡¨ç¤º</h3><p>åœ¨ OFDM ç³»ç»Ÿä¸­ï¼Œä¿¡å·åœ¨é¢‘åŸŸç”±å¤šä¸ªå­è½½æ³¢ç»„æˆï¼Œæ¯ä¸ªå­è½½æ³¢å¯¹åº”ä¸€ä¸ªç‰¹å®šçš„é¢‘ç‡åˆ†é‡ã€‚å‡è®¾æœ‰ (N) ä¸ªå­è½½æ³¢ï¼Œæ€»é¢‘åŸŸä¿¡å·ä¸ºï¼š</p>
<p>$$<br>X[k], \quad k &#x3D; 0, 1, \ldots, N-1<br>$$</p>
<p>å…¶ä¸­ï¼Œ$X[k]$ æ˜¯ç¬¬ $k$ ä¸ªå­è½½æ³¢çš„å¤æ•°è°ƒåˆ¶ç¬¦å·ï¼ˆä¾‹å¦‚ QAM ç¬¦å·ï¼‰ã€‚</p>
<hr>
<h3 id="å•ä¸ªå­è½½æ³¢çš„æ—¶åŸŸä¿¡å·"><a href="#å•ä¸ªå­è½½æ³¢çš„æ—¶åŸŸä¿¡å·" class="headerlink" title="å•ä¸ªå­è½½æ³¢çš„æ—¶åŸŸä¿¡å·"></a>å•ä¸ªå­è½½æ³¢çš„æ—¶åŸŸä¿¡å·</h3><p>å¦‚æœé¢‘åŸŸä¿¡å·åªæœ‰ç¬¬ $k_0$ ä¸ªå­è½½æ³¢ä¸ºéé›¶ï¼ˆä¾‹å¦‚ä¸º1ï¼‰ï¼Œå…¶ä½™å‡ä¸ºé›¶ï¼š</p>
<p>$$<br>X[k] &#x3D; \begin{cases}<br>1, &amp; k &#x3D; k_0 \<br>0, &amp; k \neq k_0<br>\end{cases}<br>$$</p>
<p>åˆ™æ—¶åŸŸä¿¡å·é€šè¿‡é€†ç¦»æ•£å‚…é‡Œå¶å˜æ¢ï¼ˆIFFTï¼‰å¾—åˆ°ï¼š</p>
<p>$$<br>x[n] &#x3D; \frac{1}{N} \sum_{k&#x3D;0}^{N-1} X[k] e^{j 2\pi \frac{k n}{N}} &#x3D; \frac{1}{N} e^{j 2\pi \frac{k_0}{N} n}, \quad n&#x3D;0, 1, \ldots, N-1<br>$$</p>
<p>è¿™è¡¨ç¤ºæ—¶åŸŸæ˜¯ä¸€ä¸ªé¢‘ç‡ä¸º $\frac{k_0}{N}$ çš„å¤æŒ‡æ•°åºåˆ—ï¼ˆæ­£å¼¦æ³¢ï¼‰ï¼Œä¸”é•¿åº¦ä¸º $N$ã€‚</p>
<hr>
<h3 id="ä¸ºä»€ä¹ˆå­è½½æ³¢æ—¶åŸŸæ˜¯å¸¦é¢‘ç§»çš„-sinc-å‡½æ•°ï¼Ÿ"><a href="#ä¸ºä»€ä¹ˆå­è½½æ³¢æ—¶åŸŸæ˜¯å¸¦é¢‘ç§»çš„-sinc-å‡½æ•°ï¼Ÿ" class="headerlink" title="ä¸ºä»€ä¹ˆå­è½½æ³¢æ—¶åŸŸæ˜¯å¸¦é¢‘ç§»çš„ sinc å‡½æ•°ï¼Ÿ"></a>ä¸ºä»€ä¹ˆå­è½½æ³¢æ—¶åŸŸæ˜¯å¸¦é¢‘ç§»çš„ sinc å‡½æ•°ï¼Ÿ</h3><ul>
<li><strong>ç†æƒ³æƒ…å†µ</strong>ï¼šæ— é™é•¿çš„å•é¢‘æ­£å¼¦æ³¢å¯¹åº”é¢‘åŸŸå•ç‚¹ï¼ˆDirac Î´å‡½æ•°ï¼‰ã€‚</li>
<li><strong>å®é™…æƒ…å†µ</strong>ï¼šæ—¶åŸŸä¿¡å·æœ‰é™é•¿ï¼ˆé•¿åº¦ä¸º$N$ï¼‰ï¼Œç­‰ä»·äºå°†æ— é™é•¿æ­£å¼¦æ³¢ä¹˜ä»¥ä¸€ä¸ªçŸ©å½¢çª—ï¼š</li>
</ul>
<p>$$<br>x_{\text{windowed}}[n] &#x3D; \frac{1}{N} e^{j 2\pi \frac{k_0}{N} n} \cdot w[n]<br>$$</p>
<p>å…¶ä¸­ï¼š</p>
<p>$$<br>w[n] &#x3D; \begin{cases}<br>1, &amp; 0 \leq n &lt; N \<br>0, &amp; \text{otherwise}<br>\end{cases}<br>$$</p>
<ul>
<li><p><strong>çŸ©å½¢çª—çš„é¢‘åŸŸå¯¹åº”ä¸€ä¸ª sinc å‡½æ•°</strong>ï¼Œå› æ­¤é¢‘åŸŸä¸å†æ˜¯å•ä¸€ç‚¹ï¼Œè€Œæ˜¯ä¸€ä¸ªå¸¦ä¸»ç“£å’Œæ—ç“£çš„ sinc å‡½æ•°å½¢çŠ¶ã€‚</p>
</li>
<li><p>åè¿‡æ¥ï¼Œé¢‘åŸŸä¸­æŸä¸ªé¢‘ç‡ç‚¹å®é™…ä»£è¡¨ä¸€ä¸ª<strong>å¸¦é¢‘ç§»çš„ sinc å‡½æ•°</strong>åœ¨æ—¶åŸŸçš„è¡¨ç°ã€‚</p>
</li>
</ul>
<hr>
<h3 id="å¯¹-frac-1-N-e-j-2-pi-frac-k-0-N-n-è¿›è¡Œæ±‚DTFT"><a href="#å¯¹-frac-1-N-e-j-2-pi-frac-k-0-N-n-è¿›è¡Œæ±‚DTFT" class="headerlink" title="å¯¹$\frac{1}{N} e^{j 2\pi \frac{k_0}{N} n}$è¿›è¡Œæ±‚DTFT"></a>å¯¹$\frac{1}{N} e^{j 2\pi \frac{k_0}{N} n}$è¿›è¡Œæ±‚DTFT</h3><p>å¯¹è¯¥ä¿¡å·è¿›è¡Œç¦»æ•£æ—¶é—´å‚…é‡Œå¶å˜æ¢ï¼ˆDTFTï¼‰ï¼š</p>
<p>$$<br>X(e^{j\Omega}) &#x3D; \sum_{n&#x3D;-\infty}^{\infty} x[n] \cdot e^{-j\Omega n}<br>$$</p>
<p>ä»£å…¥ (x[n])ï¼š</p>
<p>$$<br>X(e^{j\Omega}) &#x3D; \frac{1}{N} \sum_{n&#x3D;-\infty}^{\infty} e^{-j n \left( \Omega - \frac{2\pi k_0}{N} \right)}<br>$$</p>
<p>è§’é¢‘ç‡ $\Omega$ å’Œå®é™…é¢‘ç‡ $f$ ä¹‹é—´çš„å…³ç³»ä¸ºï¼š</p>
<p>$$<br>\Omega &#x3D; 2\pi \frac{f}{f_s} \quad \Rightarrow \quad f &#x3D; \frac{\Omega}{2\pi} f_s<br>$$</p>
<p>æ‰€ä»¥ä¸»å†²å‡»çš„ä½ç½®é¢‘ç‡ä¸ºï¼š<br>$$<br>\Delta f &#x3D; \Delta \Omega \cdot \frac{f_s}{2\pi}<br>$$</p>
<p>æ‰€ä»¥é¢‘ç§»ä¸º<br>$$<br>f_{k_0} &#x3D; \frac{2\pi \cdot \frac{k_0}{N} f_s}{2\pi} &#x3D; \frac{k_0}{N} f_s<br>$$</p>
<p>è¿™æ­£æ˜¯æˆ‘ä»¬è®¾å®šçš„ç¬¬ $k_0$ä¸ªå­è½½æ³¢çš„é¢‘ç§»ï¼<br>å› æ­¤ç›¸é‚»å­è½½æ³¢é—´è·ç­‰äº $\frac{1}{N}  f_s$</p>
<hr>
<h3 id="ç»“è®º"><a href="#ç»“è®º" class="headerlink" title="ç»“è®º"></a>ç»“è®º</h3><table>
<thead>
<tr>
<th>é¢‘åŸŸç‰¹å¾</th>
<th>æ—¶åŸŸå¯¹åº”ä¿¡å·</th>
</tr>
</thead>
<tbody><tr>
<td>å•ä¸ªé¢‘ç‡ç‚¹ï¼ˆç†æƒ³ Dirac Î´ï¼‰</td>
<td>æ— é™é•¿æ­£å¼¦æ³¢ï¼ˆå¤æŒ‡æ•°ï¼‰</td>
</tr>
<tr>
<td>æœ‰é™é•¿åº¦æ—¶åŸŸï¼ˆä¹˜çŸ©å½¢çª—ï¼‰</td>
<td>å¸¦é¢‘ç§»çš„ sinc å‡½æ•°ï¼ˆçŸ©å½¢çª—ä¹˜æ­£å¼¦æ³¢ï¼‰</td>
</tr>
</tbody></table>
<p>å› æ­¤ï¼ŒOFDM ä¸­æ¯ä¸ªå­è½½æ³¢åœ¨æ—¶åŸŸè¡¨ç°ä¸ºä¸€ä¸ªå¸¦é¢‘ç§»çš„ sinc å‡½æ•°ï¼Œè€Œæ•´ä¸ª OFDM ä¿¡å·æ˜¯å¤šä¸ªå¸¦é¢‘ç§» sinc å‡½æ•°çš„å åŠ ã€‚</p>
<hr>
<h3 id="OFDM-æ—¶åŸŸä¿¡å·ä¸é¢‘åè¡¥å¿è¯´æ˜"><a href="#OFDM-æ—¶åŸŸä¿¡å·ä¸é¢‘åè¡¥å¿è¯´æ˜" class="headerlink" title="OFDM æ—¶åŸŸä¿¡å·ä¸é¢‘åè¡¥å¿è¯´æ˜"></a>OFDM æ—¶åŸŸä¿¡å·ä¸é¢‘åè¡¥å¿è¯´æ˜</h3><p>å…ˆéœ€è¦ç†è§£Carrier Frequency Offsetï¼ˆCFOï¼‰çš„æ¦‚å¿µï¼ŒCFOä¼šä¸¥é‡ç ´åå­è½½æ³¢æ­£äº¤æ€§ï¼Œå¿…é¡»åœ¨æ¥æ”¶ç«¯ä¼°è®¡å¹¶è¡¥å¿å®ƒ</p>
<ul>
<li><p>ä½¿ç”¨å‰å¯¼ç¬¦å·ï¼ˆpreambleï¼‰&#x2F;åŒæ­¥ç¬¦å·ä¼°è®¡</p>
</li>
<li><p>ä½¿ç”¨CPï¼ˆå¾ªç¯å‰ç¼€ï¼‰é‡å¤ç‰¹å¾</p>
</li>
<li><p>æœ€å¤§ä¼¼ç„¶ä¼°è®¡ï¼ˆMLEï¼‰</p>
</li>
<li><p>åŸºäºåŒæ­¥ä¿¡å·å—ï¼ˆPSS&#x2F;SSSï¼‰<br>è¿™é‡Œæˆ‘ä»¬ä½¿ç”¨PSS&#x2F;SSSæ¥è®¡ç®—é¢‘åè¡¥å¿<br>æ ¹æ®ä¸Šé¢åˆ†æå¯çŸ¥OFDMç³»ç»Ÿä¸­ï¼Œå‘é€çš„æ—¶åŸŸä¿¡å·$r(t)$æ˜¯ç”±æ‰€æœ‰å­è½½æ³¢çš„å¤æŒ‡æ•°è°ƒæ•´ä¿¡å·å åŠ è€Œæˆï¼š<br>$$<br>r(t) &#x3D; \sum_{k&#x3D;0}^{N-1} X_k \cdot e^{j 2\pi k \Delta f t}<br>$$</p>
</li>
<li><p><code>N</code>: å­è½½æ³¢æ•°é‡  </p>
</li>
<li><p><code>Xâ‚–</code>: ç¬¬ <code>k</code> ä¸ªå­è½½æ³¢çš„è°ƒåˆ¶ç¬¦å·ï¼ˆå¦‚ QAMï¼‰  </p>
</li>
<li><p><code>Î”f</code>: å­è½½æ³¢é—´éš”  </p>
</li>
<li><p><code>t</code>: æ—¶é—´  </p>
</li>
<li><p><code>r(t)</code>: å‘é€çš„æ—¶åŸŸå¤æ•°ä¿¡å·ï¼ˆOFDM ç¬¦å·ï¼‰</p>
</li>
</ul>
<p>ç¦»æ•£å½¢å¼(IFFTè¿ç®—(IDFT)):<br>$$<br>r[n] &#x3D; \sum_{k&#x3D;0}^{N-1} X_k \cdot e^{j2\pi k n &#x2F; N}<br>$$</p>
<p>é¢‘å$\Delta f$æ˜¯æŒ‡å‘é€ç«¯å’Œæ¥æ”¶ç«¯æœ¬åœ°è½½æ³¢æŒ¯è¡å™¨ä¹‹é—´å­˜åœ¨çš„é¢‘ç‡å·®å¼‚  </p>
<p>æ ¹æ®ä»¥ä¸‹å…¬å¼æ¥è¿›è¡Œè°ƒæ•´<br>$$<br>\hat{r}[n] &#x3D; r[n] \cdot e^{j 2 \pi f_{\text{off}} n T_s}<br>$$</p>
<h3 id="MATLAB-ä»£ç ç¤ºä¾‹"><a href="#MATLAB-ä»£ç ç¤ºä¾‹" class="headerlink" title="MATLAB ä»£ç ç¤ºä¾‹"></a>MATLAB ä»£ç ç¤ºä¾‹</h3><figure class="highlight matlab"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">N = <span class="number">1024</span>;              <span class="comment">% å­è½½æ³¢æ€»æ•°ï¼ˆIFFTå¤§å°ï¼‰</span></span><br><span class="line">k0 = <span class="number">300</span>;              <span class="comment">% é€‰æ‹©ä¸€ä¸ªå­è½½æ³¢ç´¢å¼•</span></span><br><span class="line">X = <span class="built_in">zeros</span>(N,<span class="number">1</span>);</span><br><span class="line">X(k0) = <span class="number">1</span>;             <span class="comment">% é¢‘åŸŸå•ç‚¹æ¿€æ´»</span></span><br><span class="line">x = ifft(ifftshift(X), N); <span class="comment">% å¾—åˆ°æ—¶åŸŸä¿¡å·</span></span><br><span class="line"></span><br><span class="line">n = <span class="number">0</span>:N<span class="number">-1</span>;</span><br><span class="line"><span class="built_in">plot</span>(n, <span class="built_in">real</span>(x));</span><br><span class="line">title(<span class="string">&#x27;å•ä¸ªå­è½½æ³¢æ—¶åŸŸæ³¢å½¢ï¼ˆå¸¦é¢‘ç§»çš„ sinc å‡½æ•°å½¢æ€ï¼‰&#x27;</span>);</span><br><span class="line">xlabel(<span class="string">&#x27;é‡‡æ ·ç‚¹ n&#x27;</span>);</span><br><span class="line">ylabel(<span class="string">&#x27;å¹…åº¦&#x27;</span>);</span><br><span class="line">grid on;</span><br></pre></td></tr></table></figure>




<h3 id="payloadå¤„ç†"><a href="#payloadå¤„ç†" class="headerlink" title="payloadå¤„ç†"></a>payloadå¤„ç†</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line">dataBits = txParamConfig.txDataBits;</span><br><span class="line">% Append CRC bits to data bits</span><br><span class="line">crcData = crcGenerate(dataBits, txObj.crcDataGen);</span><br><span class="line">% Additively scramble using scramble polynomial</span><br><span class="line">scrOut = xor(crcData, txObj.pnSeq(sysParam.initState));</span><br><span class="line">% Perform convolutional coding</span><br><span class="line">dataEnc = convenc([scrOut;zeros(dataConvK-1,1)], ...</span><br><span class="line">    poly2trellis(dataConvK,dataConvCode),puncVec); % Terminated mode</span><br><span class="line">dataEnc = [dataEnc; zeros(sysParam.trBlkPadSize,1)]; % append pad to factorize payload length</span><br><span class="line">dataEnc = reshape(dataEnc,[],numDataOFDMSymbols); % form columns of symbols</span><br><span class="line">% Perform interleaving and symbol</span><br><span class="line">modData = zeros(numel(dataEnc)/(numDataOFDMSymbols*bitsPerModSym),numDataOFDMSymbols);</span><br><span class="line"><span class="keyword">for</span> i = 1:numDataOFDMSymbols</span><br><span class="line">    % Interleave each symbol</span><br><span class="line">    intrlvOut = OFDMInterleave(dataEnc(:,i),sysParam.dataIntrlvNcolumns);</span><br><span class="line">    % Modulate the symbol</span><br><span class="line">    modData(:,i) = qammod(intrlvOut, txParamConfig.modOrder, UnitAveragePower=<span class="literal">true</span>, InputType=<span class="string">&quot;bit&quot;</span>);</span><br><span class="line">end</span><br><span class="line">modDataInt = 1</span><br><span class="line">% Remove the pilot indices from modData indices</span><br><span class="line">modDataInd(pilotInd) = [];</span><br><span class="line">% Load data and pilots on the grid</span><br><span class="line">grid(pilotInd, (headerIdx+1:numSymPerFrame)) = pilot;</span><br><span class="line">grid(modDataInd, (headerIdx+1:numSymPerFrame)) = modData;</span><br></pre></td></tr></table></figure>
<p>åˆ†æä»£ç ï¼Œå¯çŸ¥modDataçš„ç»´åº¦çš„å®½æ˜¯numel(dataEnc)&#x2F;(numDataOFDMSymbols<em>bitsPerModSym)ï¼Œ<br>å…¶ä¸­numel(dataEnc)æ‰€æœ‰çš„bits numberï¼Œ numDataOFDMSymbols</em>bitsPerModSymè¡¨ç¤ºæ¯ä¸€ä¸ªFrameçš„OFDMç¬¦å·æ•°<strong>ä¹˜ä¸Š</strong>æ¯ä¸ªè°ƒåˆ¶åçš„ç¬¦å·çš„bitsæ•°ï¼ˆä¾‹å¦‚4QAMæœ‰ä¸¤ä¸ªbitsï¼‰ï¼Œè¿™æ ·æ—¢å¯ä»¥è®¡ç®—å‡ºæ¯ä¸ªOFDMç¬¦å·å¯¹åº”çš„å­è½½æ³¢æ•°ï¼Œä¹Ÿå°±æ˜¯è°ƒåˆ¶ç¬¦å·æ•°ï¼Œè¿™æ˜¯å¯¹äºpayloadè€Œè¨€<br>æ¥ä¸‹æ¥æ˜¯OFDMè°ƒåˆ¶</p>
<h3 id="OFDM-Modulation"><a href="#OFDM-Modulation" class="headerlink" title="OFDM Modulation"></a>OFDM Modulation</h3><p>æˆ‘ä»¬ä»¥payloadä¸ºä¾‹ï¼Œä¹Ÿå°±æ˜¯å¯¹moddataè¿›è¡Œè°ƒåˆ¶<br>ofdmDataOut &#x3D; ofdmmod(modData, fftLen, cpLen, nullInd, sysParam.pilotIdx,pilot)<br>è¾“å…¥äº†æ¯ä¸ªOFDMç¬¦å·çš„IFFTç‚¹æ•°ï¼Œæ¯ä¸ªOFDMç¬¦å·å‰é¢åŠ çš„å¾ªç¯å‰ç¼€é•¿åº¦ï¼Œè¦æ¸…é›¶çš„å­è½½æ³¢ä½ç½®ï¼Œå¯¼é¢‘å­è½½æ³¢ä½ç½®å’Œå¯¼é¢‘ç¬¦å·ã€‚<br>åœ¨modDataé‡Œæ ¹æ®pilotIdxï¼ŒæŠŠpilotç¬¦å·æ’åˆ°æŒ‡å®šä½ç½®ï¼ŒIFFTè¿ç®—åˆ™æ˜¯æŠŠé¢‘åŸŸä¸Šçš„å¤æ•°ç¬¦å˜æˆæ—¶åŸŸä¿¡å·ã€‚<br>è¾“å‡ºçš„ç»´åº¦æ˜¯(fftLen+cpLen) x numDataOFDMSymbols, 1<br>ä¹Ÿå°±æ˜¯ä¸€ä¸ªåˆ—å‘é‡ï¼Œè¡¨ç¤ºå¤šä¸ªOFDMç¬¦å·åœ¨æ—¶åŸŸä¸Šä¸²è”åœ¨ä¸€èµ·çš„ç»“æ„ï¼Œå› ä¸ºæ¯ä¸ªOFDMç¬¦å·å˜æˆfftLen+cpLenä¸ªæ—¶åŸŸé‡‡æ ·ç‚¹</p>
<h3 id="é‡‡æ ·é¢‘ç‡"><a href="#é‡‡æ ·é¢‘ç‡" class="headerlink" title="é‡‡æ ·é¢‘ç‡"></a>é‡‡æ ·é¢‘ç‡</h3><p>é‡‡æ ·ç‡ &#x3D; å­è½½æ³¢æ•°é‡ x å­è½½æ³¢é—´éš”<br>è¿™æ˜¯5G NRçš„ç‰¹æ€§<br>æ•°å­¦è¯æ˜:<br>$f_{sampling} &#x3D; \frac{n_{subcarrier} * n_{OFDMSymbolsPerSlot}}{T_{slot}} &#x3D; \frac{n_{subcarrier}}{T_{TimePerSymbol}} &#x3D; n_{subcarrier} * \Delta f$  </p>
<hr>
<blockquote>
<p><strong>Notice</strong><br><br>éœ€è¦æ³¨æ„çš„æ˜¯è¿™é‡Œçš„å­è½½æ³¢æ•°é‡åŒ…å«ä½¿ç”¨å’Œæœªä½¿ç”¨çš„å­è½½æ³¢ï¼Œä¹Ÿå°±æ˜¯ç­‰äºFFT size (é’ˆå¯¹ä¸€ä¸ªOFDMç¬¦å·è€Œè¨€ï¼Œä¹Ÿå°±æ˜¯å¯¹x[n]çš„ä¸€ä¸ªOFDMç¬¦å·é‡‡æ ·åçš„ç¦»æ•£ä¿¡å·è¿›è¡Œifftå˜æ¢)ï¼Œæ‰€ä»¥ä¸å®Œå…¨ç­‰äºå¸¦å®½ï¼ˆå¸¦å®½åªç”±ä½¿ç”¨çš„å­è½½æ³¢æ•°é‡å†³å®šï¼Œ CPåªå æ®æ—¶é—´èµ„æºè€Œä¸å æ®é¢‘åŸŸèµ„æºï¼‰, FFT size ï¼ˆNï¼‰æœ¬è´¨ä¸Šæ˜¯å¯¹é•¿åº¦ä¸ºNçš„æ—¶åŸŸä¿¡å·è¿›è¡Œå˜æ¢ï¼Œé»˜è®¤æŠŠè¿™æ®µä¿¡å·çœ‹æˆæ˜¯å‘¨æœŸæ€§é‡å¤çš„ã€‚ä¸€ä¸ªOFDMç¬¦å·çš„é‡‡æ ·ç‚¹æ•°ç›®é€šå¸¸ç­‰äºFFT sizeã€‚å¦‚æœé‡‡æ ·ç‚¹æ•°ç›®è¦å¤§äºFFT sizeï¼Œé‚£ä¹ˆå¯ä»¥é€å—åšFFTï¼Œå¦‚æœé‡‡æ ·ç‚¹æ•°ç›®è¦å°ï¼Œé‚£ä¹ˆåšFFTæ—¶ä¸€èˆ¬ä¼šè¡¥é›¶ï¼ˆzero-paddingï¼‰ã€‚</p>
</blockquote>
<hr>
<h2 id="MATLAB-example"><a href="#MATLAB-example" class="headerlink" title="MATLAB example"></a>MATLAB example</h2><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">openExample(<span class="string">&#x27;comm/OFDMEndToEndExample&#x27;</span>)</span><br></pre></td></tr></table></figure>
<h2 id="basic-description"><a href="#basic-description" class="headerlink" title="basic description"></a>basic description</h2><img src="/images/dataflow.png">  

<p>This example shows how to run a complete end-to-end OFDM transimission for a single-input single-output (SISO) channel. The physical-layer transmission protocol mimics typical <strong>synchonization signals</strong>, <strong>reference symbols</strong>, <strong>control channels</strong>, and <strong>data channels</strong> popular across standardized transmission schemes such as LTE, 5G NR, and WLAN.</p>
<h2 id="Channel-Parameters"><a href="#Channel-Parameters" class="headerlink" title="Channel Parameters"></a>Channel Parameters</h2><ul>
<li>SNR<br>20dB</li>
<li>foff</li>
<li>doppler</li>
<li>pathDelay</li>
<li>pathGain</li>
</ul>
<h2 id="System-Parameters"><a href="#System-Parameters" class="headerlink" title="System Parameters"></a>System Parameters</h2><ul>
<li>FFTLen<br>1024</li>
<li>numFrames<br>100</li>
<li>numSymbolsPerFrame<br>15</li>
<li>CPLen<br>256</li>
<li>txDatabits<br>[â€¦]</li>
<li>usedSubCarr<br>600</li>
<li>modulationOrder<br>64&#x3D;64-QAM</li>
<li>codeRate<br>0&#x3D;1&#x2F;2</li>
<li>BW<br>10MHz</li>
<li>fc(carrier frequency)<br>1.9GHz</li>
<li>enableFading<br>True</li>
</ul>
<h2 id="å…·ä½“è¿‡ç¨‹"><a href="#å…·ä½“è¿‡ç¨‹" class="headerlink" title="å…·ä½“è¿‡ç¨‹"></a>å…·ä½“è¿‡ç¨‹</h2><h3 id="Populate-Parameter-Structure"><a href="#Populate-Parameter-Structure" class="headerlink" title="Populate Parameter Structure"></a>Populate Parameter Structure</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">///helperOFDMSetParameters <span class="keyword">function</span></span><br><span class="line">[sysParam, txParam] = helperOFDMSetParameters(userParam);</span><br><span class="line">///é€šè¿‡æŸ¥è¡¨æ¥è¿›ä¸€æ­¥è·å–FFTLen, CPLen, numSubCarr, BWç­‰æ•°æ®</span><br><span class="line">[~,codeParam] = helperOFDMGetTables(userParam.BWIndex,userParam.codeRateIndex);</span><br></pre></td></tr></table></figure>
<h3 id="Initialize-states-and-process-data-frames"><a href="#Initialize-states-and-process-data-frames" class="headerlink" title="Initialize states and process data frames"></a>Initialize states and process data frames</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line">/// Initialize transmitter and receiver</span><br><span class="line">txObj = helperOFDMTxInit(sysParam);</span><br><span class="line">rxObj = helperOFDMRxInit(sysParam);</span><br><span class="line">/// å¾ªç¯å‘é€ï¼Œå¤§å¾ªç¯æ˜¯ä¿¡å™ªæ¯”ï¼Œç”¨æ¥æ¨¡æ‹Ÿä¸åŒç¯å¢ƒï¼Œå°å¾ªç¯æ˜¯framesçš„æ•°é‡ï¼Œç”¨æ¥ä¸€ä¸ªframeä¸€ä¸ªframeçš„å‘é€</span><br><span class="line"><span class="keyword">for</span> simLoopIdx = 1:length(SNRdB)</span><br><span class="line">    ...</span><br><span class="line">    <span class="keyword">for</span> frameNum = 1 : sysParam.numFrames+1</span><br><span class="line">        sysParam.frameNum = frameNum;</span><br><span class="line">        /// Generate Payload data</span><br><span class="line">        txParam.txDatabits = randi([0 1], sysParam.trBlkSize, 1);</span><br><span class="line">        /// Store data bits <span class="keyword">for</span> BER calculation</span><br><span class="line">        sysParam.txDatabits = [sysParam.txDatabits; txParam.txDataBits];</span><br><span class="line">        /// Transmit data</span><br><span class="line">        [txOut, txGrid, txDiagnostics] = helperOFDMTx(txParam, sysParam, txObj);</span><br><span class="line">        /// ç»è¿‡æ¨¡æ‹Ÿçš„channelè¿›è¡Œä¼ é€</span><br><span class="line">        chanOut = helperOFDMChannel(txOut, chanParam, sysParam);</span><br><span class="line">        /// Run the receiver front-end</span><br><span class="line">        rxIn = helperOFDMRxFrontEnd(chanOut, sysParam, rxObj);</span><br><span class="line">        /// Run the receiver processing</span><br><span class="line">        [rxDataBits, isConnected, toff, rxDiagnostics] = helperOFDMRx(rxIn, sysParam, rxObj);</span><br><span class="line">        /// Collect bit and frame error statistics</span><br><span class="line">        <span class="keyword">if</span> is Connected</span><br><span class="line">            BER = errorRate(...</span><br><span class="line">                sysParam.txDataBits(end-(2*sysParam.trBlkSize)+(1:sysParam.trBlkSize)), ...</span><br><span class="line">                rxDataBits);</span><br></pre></td></tr></table></figure>




      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  


  
  <nav class="pagination">
    <a class="extend prev" rel="prev" href="/blog/page/2/"><i class="fa fa-angle-left" aria-label="Previous page"></i></a><a class="page-number" href="/blog/">1</a><a class="page-number" href="/blog/page/2/">2</a><span class="page-number current">3</span><a class="page-number" href="/blog/page/4/">4</a><a class="extend next" rel="next" href="/blog/page/4/"><i class="fa fa-angle-right" aria-label="Next page"></i></a>
  </nav>



          </div>
          

<script>
  window.addEventListener('tabs:register', () => {
    let { activeClass } = CONFIG.comments;
    if (CONFIG.comments.storage) {
      activeClass = localStorage.getItem('comments_active') || activeClass;
    }
    if (activeClass) {
      let activeTab = document.querySelector(`a[href="#comment-${activeClass}"]`);
      if (activeTab) {
        activeTab.click();
      }
    }
  });
  if (CONFIG.comments.storage) {
    window.addEventListener('tabs:click', event => {
      if (!event.target.matches('.tabs-comment .tab-content .tab-pane')) return;
      let commentClass = event.target.classList[1];
      localStorage.setItem('comments_active', commentClass);
    });
  }
</script>

        </div>
          
  
  <div class="toggle sidebar-toggle">
    <span class="toggle-line toggle-line-first"></span>
    <span class="toggle-line toggle-line-middle"></span>
    <span class="toggle-line toggle-line-last"></span>
  </div>

  <aside class="sidebar">
    <div class="sidebar-inner">

      <ul class="sidebar-nav motion-element">
        <li class="sidebar-nav-toc">
          Table of Contents
        </li>
        <li class="sidebar-nav-overview">
          Overview
        </li>
      </ul>

      <!--noindex-->
      <div class="post-toc-wrap sidebar-panel">
      </div>
      <!--/noindex-->

      <div class="site-overview-wrap sidebar-panel">
        <div class="site-author motion-element" itemprop="author" itemscope itemtype="http://schema.org/Person">
  <p class="site-author-name" itemprop="name">John Doe</p>
  <div class="site-description" itemprop="description"></div>
</div>
<div class="site-state-wrap motion-element">
  <nav class="site-state">
      <div class="site-state-item site-state-posts">
          <a href="/archives/">
        
          <span class="site-state-item-count">34</span>
          <span class="site-state-item-name">posts</span>
        </a>
      </div>
      <div class="site-state-item site-state-categories">
        <span class="site-state-item-count">5</span>
        <span class="site-state-item-name">categories</span>
      </div>
  </nav>
</div>



      </div>

    </div>
  </aside>
  <div id="sidebar-dimmer"></div>


      </div>
    </main>

    <footer class="footer">
      <div class="footer-inner">
        

        

<div class="copyright">
  
  &copy; 
  <span itemprop="copyrightYear">2025</span>
  <span class="with-love">
    <i class="fa fa-heart"></i>
  </span>
  <span class="author" itemprop="copyrightHolder">John Doe</span>
</div>

        








      </div>
    </footer>
  </div>

  
  <script src="/lib/anime.min.js"></script>
  <script src="/lib/velocity/velocity.min.js"></script>
  <script src="/lib/velocity/velocity.ui.min.js"></script>

<script src="/js/utils.js"></script>

<script src="/js/motion.js"></script>


<script src="/js/schemes/muse.js"></script>


<script src="/js/next-boot.js"></script>




  















  

  

</body>
</html>
